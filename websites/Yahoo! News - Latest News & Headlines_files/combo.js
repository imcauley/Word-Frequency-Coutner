
/* lightbox-default.js 912839 */ YUI.add("media-lightbox-default",function(b){if(b.UA.ie>0&&b.UA.ie<8){YMedia.Lightbox_init=function(){};YMedia.Lightbox_init.loadLightbox=function(j){};return}var i=function(j){if(document&&document.location&&document.location.host){j=j.replace(document.location.protocol+"//"+document.location.host,"")}return j};if(typeof(YMedia.Lightbox_init)==="undefined"){YMedia.Lightbox_init=function(){}}YMedia.Lightbox_init.photoGallery=/^(?:\/.*)?\/(?:anh|photos|foto|fotos|�貊�|媯�堭)\/([^\/]+)\/(?:[\?\;][^\/]*)?$/;YMedia.Lightbox_init.photoGalleryPhoto=/^(?:\/.*)?\/(?:anh|photos|foto|fotos|�貊�|媯�堭)\/([^\/]+)\/([^\/]+)\.html(?:[\?\;][^\/]*)?$/;YMedia.Lightbox_init.photoHeadless=/^(?:\/.*)?\/(?:anh|photos|foto|fotos|�貊�|媯�堭)\/([^\/]+)\.html(?:[\?\;][^\/]*)?$/;var g=b.one("a.yui-carousel-next.embedded-ss");if(g){var f=g.getAttribute("data-uuid");var d=b.one("a.yui-carousel-next.embedded-ss span strong")._node.innerHTML;var h=g.getAttribute("href");var a=b.one("#spotlight .yui-carousel-nav .ymg-carousel-nav-wrap .ymg-nav-buttons");if(a){a.prepend('<a href="'+h+'" class="yui-carousel-button yom-button prevent-default  ymg-nav-next embedded-ss" role="button" data-uuid="'+f+'"><span><strong>'+d+"</strong></span></a>");g.setStyle("display","none")}else{g=null}}YMedia.Lightbox_init.isPhotoUrl=function c(j){j=i(j);return(YMedia.Lightbox_init.photoGallery.test(j)||YMedia.Lightbox_init.photoGalleryPhoto.test(j)||YMedia.Lightbox_init.photoHeadless.test(j))};YMedia.Lightbox_init.matchPhotoUrl=function e(k){k=i(k);var j=YMedia.Lightbox_init.photoGallery.exec(k);if(j){return{urlcase:"photoGallery",matched:j}}j=YMedia.Lightbox_init.photoGalleryPhoto.exec(k);if(j){return{urlcase:"photoGalleryPhoto",matched:j}}j=YMedia.Lightbox_init.photoHeadless.exec(k);if(j){return{urlcase:"photoHeadless",matched:j}}return false};YMedia.Lightbox_init.loadLightbox=function(m){var n=m.interAds;var p=m.interAdsViewed;var j=m.embed_ads_position;var k=m.device=="full"?"desktop":m.device;var r=m.darla_version&&0===m.darla_version.indexOf("2")?"2":"1";YMedia.DarlaVersion=r;var o={groups:{group01:{base:"http://l.yimg.com/",comboBase:"http://l.yimg.com/zz/combo?",modules:{},combine:true,filter:"min",root:"/"}},combine:true,allowRollup:true,comboBase:"http://l.yimg.com/zz/combo?",maxURLLength:"2000"};if("2"===r){o.groups.group01.modules["media-darla-secure-base"]={path:m.darla_ycs_path.replace("http://l.yimg.com/","")+"/js/darla-secure-base-min.js"};o.groups.group01.modules["media-darla-csc-min"]={path:m.darla_ycs_path.replace("http://l.yimg.com/","")+"/js/csc-min.js"}}else{var w="d/";var l=w+"combo?";var u=w+"lib/";var s=m.darla_lib_js;s=s.replace(l,"");var q=s.split("&amp;");for(var t in q){if(q[t]){if(q[t].indexOf("fc")>0){o.groups.group01.modules["media-fc"]={path:u+q[t].replace("http://l.yimg.com/","")}}else{if(q[t].indexOf("util")>0){o.groups.group01.modules["media-util"]={path:u+q[t].replace("http://l.yimg.com/","")}}else{if(q[t].indexOf("complex_renderer")>0){o.groups.group01.modules["media-complex_renderer"]={path:u+q[t].replace("http://l.yimg.com/","")}}}}}}}if(-1===m.lightbox_darla_js.indexOf("yimg")){o.groups.group02={base:"/",modules:{},combine:false,root:"/"};o.groups.group02.modules["media-lightbox-darla"]={fullpath:m.lightbox_darla_js};o.groups.group02.modules["media-boba"]={fullpath:m.core_lightbox_js};o.groups.group02.modules["media-boba_lightbox-"+k]={fullpath:m.lightbox_js};o.groups.group02.modules["media-boba_lightbox_module-"+k]={fullpath:m.lightbox_module_js}}else{o.groups.group01.modules["media-lightbox-darla"]={path:m.lightbox_darla_js.replace("http://l.yimg.com/","")};o.groups.group01.modules["media-boba"]={path:m.core_lightbox_js.replace("http://l.yimg.com/","")};o.groups.group01.modules["media-boba_lightbox-"+k]={path:m.lightbox_js.replace("http://l.yimg.com/","")};o.groups.group01.modules["media-boba_lightbox_module-"+k]={path:m.lightbox_module_js.replace("http://l.yimg.com/","")}}var v=b.delegate("click",function(D){var x=D.currentTarget.getAttribute("href"),y=b.one(".photos_ss"),E=D.currentTarget.getAttribute("class");var A=/lightbox[a-f\d]+/m;var B=A.exec(E);if(E.indexOf("embedded-ss")===-1){if(!(B&&b.Media.boba_lightbox_module_targets&&b.Media.boba_lightbox_module_targets[B])){if(y!==null&&b.Media.boba_lightbox_module_whitelist){for(var F in b.Media.boba_lightbox_module_whitelist){if(b.Media.boba_lightbox_module_whitelist[F](D)){return}}}if(!YMedia.Lightbox_init.isPhotoUrl(x)){return}}}D.preventDefault();v.detach();if(!YMedia.BOBA){YMedia.BOBA={}}YMedia.BOBA.ywaSettings=b.Media.ywaSettings;YMedia.BOBA.YWA=b.Media.YWA;YMedia.BOBA.configs=b.Media.boba_lightbox_module_configs;YMedia.BOBA.dataset=b.Media.boba_lightbox_module_dataset;YMedia.BOBA.targets=b.Media.boba_lightbox_module_targets;YMedia.BOBA.whitelist=b.Media.boba_lightbox_module_whitelist;var C=YUI();YUI.YUICfg=o;YUI.YUICfg.root="yui:"+YUI.version+"/build/";C.applyConfig(YUI.YUICfg);if("2"===r){var z=["node","event","json-parse","io","io-base","io-queue","gallery-preload","async-queue","event-flick","event-delegate","selector-css3","event-touch","media-lightbox-darla","media-boba","media-boba_lightbox-"+k,"media-boba_lightbox_module-"+k,"event-custom","media-darla-secure-base","media-darla-csc-min"]}else{var z=["node","event","json-parse","io","io-base","io-queue","gallery-preload","async-queue","event-flick","event-delegate","selector-css3","media-fc","event-touch","media-util","media-complex_renderer","media-lightbox-darla","media-boba","media-boba_lightbox-"+k,"media-boba_lightbox_module-"+k,"event-custom"]}if(window.MediaPerfTiming){window.MediaPerfTiming.config({console:true});window.MediaPerfTiming.startTimer("MediaGalleryBOBALightboxData","m1")}C.use(z,function(G){if("2"===r){var K={spaceid:m.spaceid,content_id:m.content_id,region:m.region};YUI.PhotoAdsDarla=YUI.PhotoAdsDarla(K);YUI.PhotoAdsDarla.photoslightboxdarla={fetch:(G.bind(YUI.PhotoAdsDarla.event,YUI.PhotoAdsDarla,"photoslightboxdarla"))}}else{var K={property:m.property,fc_domain:m.fc_domain,intl:m.intl,spaceid:m.spaceid};YUI.PhotoAdsDarla.photoslightboxdarla=YUI.PhotoAdsDarla.photoslightboxdarla(K)}if(typeof(m.ad_css)==="string"&&typeof(m.lang_css)==="string"&&typeof(m.lightbox_css)==="string"){G.Get.css([m.ad_css,m.lang_css,m.lightbox_css],function(P){if(P){G.Array.each(P,function(Q){G.log("Error loading JS: "+Q.error,"error")});return}})}else{return}YUI.PhotoAdsDarla.fetch=YUI.PhotoAdsDarla.photoslightboxdarla.fetch;var I="";if("2"===r){I='<div id="yom-ad-LREC-tgt"></div><div id="yom-ad-LREC2-tgt"></div>'}else{I='<div class="LREC"></div><div class="LREC2"></div>'}var H=0;if(H===1){G.one(document.body).append('<iframe id="yom-ad-darla-callframe-photoslightboxdarla" style="display:none;"></iframe><div id="photos_photoslightboxdarla" class="photos_ss off"><div class="mainSec"><div class="stage"><div class="yui-lightbox-property-logo" style="background-image: url(\'http://l.yimg.com/a/i/brand/purplelogo/uh/'+m.region+"/20/"+m.site+"/"+m.site+'.png\')"></div><div class="imageContainer"><div class="backstage"></div><ul class="bimgs"></ul></div><div class="control"><button class="caption"><span class="hide">Toggle caption</span></button><button class="fbshare"><span class="hide">Toggle caption</span></button><div class="hud"><span class="currentSlide"></span> / <span class="all_Slides"></span></div></div></div><div class="desc off" style="opacity:0"><p class="imgDesc"><!-- Script-filled content --></p><p class="related"></p></div><div class="imgMeta"><div class="provider"><!-- Script-filled content --></div><div class="imgDate"><!-- Script-filled content --></div><button class="fbshare"><span class="hide">Share to Facebook</span></button></div><button class="closeBtn"><span class="hide">Close</span></button><button class="arrowLeft"><div class="bd"><span class="hide">Previous image</span></div></button><button class="arrowRight"><div class="bd"><span class="hide">Next image</span></div></button></div><div class="sidebar">'+I+'<div class="ss_info disable"><button class="btn"><span class="hide">Description Toggle</span></button><div class="ss_info_wrap"><div class="hd"></div><div class="bd"></div><div class="ft"></div></div></div><div class="RRThumbnail"><ul class="RRThumbnailList"></ul></div><div class="RRThumbCtrl"><div class="hud"><span><span class="visableThumbFrom">1</span> - <span class="visableThumbTo"></span></span> / <span class="allThumbs"></span></div><div class="arrowLeft"></div><div class="arrowRight"></div></div></div></div>')}else{G.one(document.body).append('<iframe id="yom-ad-darla-callframe-photoslightboxdarla" style="display:none;"></iframe><div id="photos_photoslightboxdarla" class="photos_ss off"><div class="mainSec"><div class="stage"><div class="yui-lightbox-property-logo" style="background-image: url(\'http://l.yimg.com/a/i/brand/purplelogo/uh/'+m.region+"/20/"+m.site+"/"+m.site+'.png\')"></div><div class="imageContainer"><div class="backstage"></div><ul class="bimgs"></ul></div><div class="desc off" style="opacity:0"><div class="imgDesc"><!-- Script-filled content --></div><div class="related"></div></div><div class="imgMeta"><div class="provider"><!-- Script-filled content --></div><div class="imgDate"><!-- Script-filled content --></div></div><div class="control"><button class="arrowLeft"><span class="hide">Previous slide</span></button><button class="arrowRight"><span class="hide">Next slide</span></button><button class="caption"><span class="hide">Toggle caption</span></button><button class="fbshare"><span class="hide">Toggle caption</span></button><div class="hud"><span class="currentSlide"></span> / <span class="all_Slides"></span></div></div></div><button class="closeBtn"><span class="hide">Close</span></button></div><div class="sidebar">'+I+'<div class="ss_info disable"><button class="btn"><span class="hide">Description Toggle</span></button><div class="ss_info_wrap"><div class="hd"></div><div class="bd"></div><div class="ft"></div></div></div><div class="RRThumbnail"><ul class="RRThumbnailList"></ul></div><div class="RRThumbCtrl"><div class="hud"><span><span class="visableThumbFrom">1</span> - <span class="visableThumbTo"></span></span> / <span class="allThumbs"></span></div><div class="arrowLeft"></div><div class="arrowRight"></div></div></div></div>')}var N=document.createElement("script");var O="var lightbox_ult_mid='photoslightboxdarla',lightbox_ult_mit='onclicklightbox',lightbox_ult_site='"+m.site+"',lightbox_ult_region='"+m.region+"',lightbox_ult_lang='"+m.lang+"',lightbox_default_spaceid='"+m.spaceid+"',lightbox_capenable=1;";N.text=O;G.one(document.body).appendChild(N);var J=m.multimediagallery;var L=function L(X,W){if(YMedia.BOBA.lightbox){delete YMedia.BOBA.lightbox}var Z=W.currentTarget.getAttribute("class");var U=/lightbox[a-f\d]+/m;var V=U.exec(Z);if(G.Photos&&G.Photos.LightboxModule){if(!G.Object.isEmpty(YMedia.BOBA.configs)&&!G.Object.isEmpty(YMedia.BOBA.dataset)&&!G.Object.isEmpty(YMedia.BOBA.targets)&&YMedia.BOBA.targets[V]){var Q=YMedia.BOBA.targets[V]["lightboxId"];if(Q){var R=YMedia.BOBA.targets[V]["pivotId"];var T=YMedia.BOBA.dataset[Q];var Y=YMedia.BOBA.configs[Q];if(!G.Object.isEmpty(Y)&&!G.Object.isEmpty(T)){Y.interAds=n;Y.interAdsViewed=p;Y.embed_ads_position=j;Y.multimediagallery=J;Y.video_js=m.video_js;Y.video_player_js=m.video_player_js;Y.darla_version=r;if(T.videoconf){Y.videoconf=T.videoconf}YMedia.BOBA.lightbox=new G.Photos.LightboxModule(JSON.stringify(Y),[],T);if(YMedia.BOBA.lightbox.checksupport()!==false){W.preventDefault();YMedia.BOBA.lightbox.slideShow(W,R);return}}}}}switch(X.urlcase){case"photoGallery":var P=X.matched[1];YMedia.BOBA.lightbox=new G.Photos.Lightbox('{"ss_alias":"'+P+'", "spaceid":"'+m.spaceid+'","darla_id":"","images_total":0, "interAds":"'+n+'", "interAdsViewed":'+p+',"embed_ads_position":"'+j+'","multimediagallery":"'+J+'","darla_version":"'+r+'","video_js":"'+m.video_js+'","video_player_js":"'+m.video_player_js+'"}',[],[],"default-lightbox");if(YMedia.BOBA.lightbox.checksupport()!==false){YMedia.BOBA.lightbox.slideShow(W)}break;case"photoGalleryPhoto":var P=X.matched[1];var S=X.matched[2];YMedia.BOBA.lightbox=new G.Photos.Lightbox('{"ss_alias":"'+P+'", "ss_pivot_alias":"'+S+'", "spaceid":"'+m.spaceid+'", "darla_id":"", "interAds":"'+n+'", "interAdsViewed":'+p+', "images_total":0, "embed_ads_position":"'+j+'","multimediagallery":"'+J+'","darla_version":"'+r+'","video_js":"'+m.video_js+'","video_player_js":"'+m.video_player_js+'"}',[],[],"default-lightbox");if(YMedia.BOBA.lightbox.checksupport()!==false){YMedia.BOBA.lightbox.slideShow(W)}break;case"photoHeadless":if(Z.indexOf("embedded-ss")!=-1&&W.currentTarget.getAttribute("data-uuid")){YMedia.BOBA.lightbox=new G.Photos.Lightbox('{"ss_uuid":"'+W.currentTarget.getAttribute("data-uuid")+'","spaceid":"'+m.spaceid+'","darla_id":"", "interAds":"'+n+'", "interAdsViewed":'+p+', "images_total":0, "embed_ads_position":"'+j+'","multimediagallery":"'+J+'","darla_version":"'+r+'","video_js":"'+m.video_js+'","video_player_js":"'+m.video_player_js+'"}',[],[],"default-lightbox")}else{var S=X.matched[1];YMedia.BOBA.lightbox=new G.Photos.Lightbox('{"pt_alias":"'+S+'","spaceid":"'+m.spaceid+'","darla_id":"", "interAds":"'+n+'", "interAdsViewed":'+p+', "images_total":0, "embed_ads_position":"'+j+'","multimediagallery":"'+J+'","darla_version":"'+r+'","video_js":"'+m.video_js+'","video_player_js":"'+m.video_player_js+'"}',[],[],"default-lightbox")}if(YMedia.BOBA.lightbox.checksupport()!==false){YMedia.BOBA.lightbox.slideShow(W)}break;default:return}};YMedia.Lightbox_init.initLightbox=L;var M=YMedia.Lightbox_init.matchPhotoUrl(x);L(M,D);G.delegate("click",function(U){if(window.MediaPerfTiming){window.MediaPerfTiming.config({console:true});window.MediaPerfTiming.startTimer("MediaGalleryBOBALightboxData","m2")}var Q=U.currentTarget.getAttribute("href"),P=U.currentTarget.getAttribute("class");var S=/lightbox[a-f\d]+/m;var T=S.exec(P);if(P.indexOf("embedded-ss")===-1){if(!(T&&YMedia.BOBA.targets&&YMedia.BOBA.targets[T])){if(y!==null&&YMedia.BOBA.whitelist){for(var R in YMedia.BOBA.whitelist){if(YMedia.BOBA.whitelist[R](U)){return}}}if(!YMedia.Lightbox_init.isPhotoUrl(Q)){return}}}U.preventDefault();var V=YMedia.Lightbox_init.matchPhotoUrl(Q);L(V,U);if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaGalleryBOBALightboxData","m2");window.MediaPerfTiming.done("MediaGalleryBOBALightboxData")}},document.body,"a:not(a.yui-carousel-button):not(a.yom-button):not(a.yui-carousel-next):not(a.yui-carousel-prev):not(a.boba-lightbox-off), a.embedded-ss");if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("MediaGalleryBOBALightboxData","m1");window.MediaPerfTiming.done("MediaGalleryBOBALightboxData")}})},document.body,"a:not(a.yui-carousel-button):not(a.yom-button):not(a.yui-carousel-next):not(a.yui-carousel-prev):not(a.boba-lightbox-off), a.embedded-ss")}},"0.1",{requires:["get","event-delegate","selector-css3"]});
/* ywa.js 683982 */ var YAHOO;YAHOO=YAHOO||{};YAHOO.ywa=YAHOO.ywa||{};YAHOO.ywa.tracking=YAHOO.ywa.tracking||{};if(typeof YAHOO.ywa.tracking.ColoSetting==="undefined"){YAHOO.ywa.tracking.ColoSetting=(function(){var a,b;a={trackingDomains:{US:{nonSecure:"a.analytics.yahoo.com",secure:"a.analytics.yahoo.com"},EU:{nonSecure:"s.analytics.yahoo.com",secure:"s.analytics.yahoo.com"},ONO:{nonSecure:"o.analytics.yahoo.com",secure:"o.analytics.yahoo.com"},APAC:{nonSecure:"apac.analytics.yahoo.com",secure:"apac.analytics.yahoo.com"},VSCALE:{nonSecure:"z.analytics.yahoo.com",secure:"z.analytics.yahoo.com"},VSCALE2:{nonSecure:"e.analytics.yahoo.com",secure:"e.analytics.yahoo.com"},VSCALE3:{nonSecure:"y.analytics.yahoo.com",secure:"y.analytics.yahoo.com"}},defaultTrackingDomain:{nonSecure:"y.analytics.yahoo.com",secure:"y.analytics.yahoo.com"}};b={isKnownColo:function(c){return(a.trackingDomains[c]!==undefined)},getColoDescriptor:function(d){var c;c={};if(b.isKnownColo(d)){c.nonSecure=a.trackingDomains[d].nonSecure;c.secure=a.trackingDomains[d].secure}else{c.nonSecure=a.defaultTrackingDomain.nonSecure;c.secure=a.defaultTrackingDomain.secure}return c}};return b}())}if(typeof YAHOO.ywa.tracking.TrackerManager==="undefined"){YAHOO.ywa.tracking.TrackerManager=(function(){var a,b;a={scriptPlace:document.body,trackers:{},verMajorMinor:"5.1.0.13",verBuildTime:"Jun 12, 2012 - 12:14PM",verBuildType:"js",lockedForTracker:true,isSecure:(window.location.protocol.indexOf("https:")===0),excludedDomain:"",excludeProtocol:"",downloadExtension:"\\.pdf$|\\.doc$|\\.dot$|\\.xls$|\\.xlt$|\\.xlw$|\\.ppt$|\\.pps$|\\.zip$|\\.rar$|\\.gz$|\\.gzip$|\\.wav$|\\.mp[3-4]?$|\\.mpeg$",enableOverwriteOnclicks:true,isOnloadOverwrite:false,windowOnload:null,flashVer:"",isPrerender:false,ywaOLH:function(c){if(a.windowOnload){a.windowOnload.call(window,c)}if(a.enableOverwriteOnclicks){a.addOCHs()}window.onload=a.windowOnload},ywaOCH:function(d){var c;for(c in a.trackers){if(a.trackers[c]!==undefined&&a.trackers[c]!==null&&a.trackers[c].onclickOverwrite){a.trackers[c].onclickOverwrite(this)}}return(this.ywaOnClick?this.ywaOnClick(d):true)},addOLH:function(){var c;if(a.isOnloadOverwrite){return}c=[];if(window.screen||c.toSource||(c.shift&&a.mic)){if(window.onload&&!a.windowOnload){a.windowOnload=window.onload}window.onload=a.ywaOLH}a.isOnloadOverwrite=true},addOCHs:function(){var c,d;for(c=0,d=document.links.length;c<d;c+=1){if(document.links[c].onclick){document.links[c].ywaOnClick=document.links[c].onclick}document.links[c].onclick=a.ywaOCH}},mxRgXpStr:function(l){while(l.indexOf(" ")>=0){l=l.replace(" ","")}var g,f,c,m,h,d,k;h="";d=l.split(",");for(g=0,k=d.length;g<k;g+=1){c=d[g].split(".");for(f=0,m=c.length;f<m;f+=1){if(c[f].indexOf("*")>=0){c[f]=".+"}}if(m>0){d[g]=c.join("\\.")}}if(k>0){h+=d.join("$|^")}if(h.length>0){return"^"+h+"$"}return""},ehDocVisibilityChange:function(f){var c,d;if(!a.isPrerender){return}for(c=0,d=window.ITTs.length;c<d;c+=1){if(window.ITTs[c].submit!==undefined){window.ITTs[c].submit()}}a.isPrerender=false},checkDomainValidity:function(d){var c;c=/\.yahoo\.com$/i;if(d.secure===undefined||d.secure===null||d.nonSecure===undefined||d.nonSecure===null){return false}return(c.test(d.secure)&&c.test(d.nonSecure))},setTrackingDomains:function(d,e){var c,f;c={nonSecure:"",secure:""};f=YAHOO.ywa.tracking.ColoSetting.getColoDescriptor(d);if(e){c.secure=e.secure;c.nonSecure=e.nonSecure}else{c.secure=f.secure;c.nonSecure=f.nonSecure}if(!a.checkDomainValidity(c)){throw new Error("[YWA-TrackerManager] Tracking domain is not a valid Yahoo! domain.")}return c}};b={getDPID:function(){return""+Math.floor(Math.random()*4294967295)},getScriptPlace:function(){return a.scriptPlace},version:function(){return a.verMajorMinor},buildType:function(){return a.verBuildType},buildTime:function(){return a.verBuildTime},versionAndType:function(){return b.version()+"."+b.buildType()},fullVersion:function(){return b.versionAndType()+" "+b.buildTime()},isLockedForTracker:function(){return a.lockedForTracker},createTracker:function(c){var d;if(c===undefined||c===null){throw new Error("[YWA-TrackerManager] Unavailable configuration descriptor to create a tracker.")}if(!c.projectId){throw new Error("[YWA-TrackerManager] Undefined project ID in configuration descriptor.")}a.lockedForTracker=false;c.coloId=c.coloId||"";c.domainSetting=a.setTrackingDomains(c.coloId,c.domainSetting);c.enableOnclickHandler=((c.enableOnclickHandler!==undefined&&c.enableOnclickHandler!==null)?c.enableOnclickHandler:true);c.excludeParameters=c.excludeParameters||"";c.excludeProtocol=c.excludeProtocol||b.getExcludeProtocol();d=new YAHOO.ywa.tracking.Tracker(c);a.trackers[c.projectId]=d;window.ITTs[d.getITTIdx()]=d;a.lockedForTracker=true;return d},getTracker:function(){var c;if(arguments.length<1||arguments[0]===null){throw new Error("[YWA-TrackerManager] Undefined project ID")}if(a.trackers[arguments[0]]){c=a.trackers[arguments[0]]}else{if(arguments.length<2||YAHOO.ywa.tracking.ColoSetting.isKnownColo(arguments[1])){c=b.createTracker({projectId:arguments[0],coloId:arguments[1]})}else{c=b.createTracker({projectId:arguments[0],domainSetting:{secure:arguments[2]||arguments[1],nonSecure:arguments[1]}})}}return c},getIsSecure:function(){return a.isSecure},getExcludeDomains:function(){return a.excludedDomain},getExcludeProtocol:function(){return a.excludeProtocol},getDownloadExtension:function(){return a.downloadExtension},getEnableOverwriteOnclicks:function(){return a.enableOverwriteOnclicks},setEnableOverwriteOnclicks:function(c){a.enableOverwriteOnclicks=((c!==undefined&&c!==null)?c:true)},gcpn:function(c){var e,d,h,g,f;h=location.search;g=h.indexOf("?"+c+"=");f=h.indexOf("&"+c+"=");if((g===0)||(f>-1)){e=(g===0)?0:f;d=h.indexOf("&",e+1);return h.substring(e+2+c.length,(d>-1)?d:h.length)}return""},getFileName:function(c){var d;d=c.indexOf("?");c=((d>0)?c.substring(0,d):c);return c.substring(c.lastIndexOf("/")+1,c.length)},gh:function(c){var d;d=c.host.indexOf(":");return(d>=0)?c.host.substring(0,d):c.host},ghs:function(c){var d;d=c.indexOf("//");if(d>=0){c=c.substring(d+2,c.length);d=c.indexOf("/");if(d>=0){return c.substring(0,d)}return c.substring(d+2,c.length)}return""},gpr:function(c){var e,d;e=c.protocol;d=e.indexOf(":");return(d>=0)?e:e+":"},gp:function(c){var e,d;e=c.pathname;d=e.indexOf("/");return(d===0)?e:"/"+e},mxDmnRGXP:function(c){if(c.toUpperCase().indexOf("REGEXP:")===0){return new RegExp(c.substring(7),"i")}else{return new RegExp(a.mxRgXpStr(c),"i")}},getCookie:function(e){var g,d,c,f;c=document.cookie;f=c.indexOf(e+"=");if(f!==-1){g=f+e.length+1;d=c.indexOf(";",g);if(d===-1){d=c.length}return c.substring(g,d)}return""},setCookie:function(c,g,k,j,h){var f,e,i;i=new Date();i.setTime(i.getTime()+(k*1000));f=((k>=0)?"; expires="+i.toGMTString():"; expires=Thu, 01-Jan-1970 00:00:01 GMT");e=c+"="+g+f+"; path="+h+((j!=="")?("; domain="+j):(""));document.cookie=e},deleteCookie:function(c,e,d){return b.setCookie(c,"1",-1,e,d)},flash:function(){if(a.flashVer===""){var f,d,h,c;d="";h=navigator.plugins;if(typeof h!=="undefined"&&h!==null&&h.length>0){if(h["Shockwave Flash 2.0"]||h["Shockwave Flash"]){f=h["Shockwave Flash 2.0"]?" 2.0":"";d=h["Shockwave Flash"+f].description}}else{c=function(e){var j;j=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+e);return((j!==undefined&&j!==null)?j.GetVariable("$version"):0)};try{d=c(1)}catch(g){d="unknown"}}a.flashVer=d}return a.flashVer},windowErrorHandler:function(){if(b.errorId!==""){window.ITTs[b.errorId].submitError()}},isDocVisibilityEqualsTo:function(c){if(c!=="visible"&&c!=="hidden"&&c!=="preview"&&c!=="prerender"){return false}return((document.webkitVisibilityState!==undefined&&document.webkitVisibilityState===c)||(document.visibilityState!==undefined&&document.visibilityState===c))},submitTrackers:function(){var c;for(c in a.trackers){if(a.trackers[c].submit){a.trackers[c].submit()}}},createBeaconDescriptor:function(){return{trackingDomain:"",scriptParent:null,version:"",TrackerDescriptor:{},EnvironmentDescriptor:{},PageDescriptor:{},Additional:{}}}};(function(){var c;window.ITTs=[];try{c=document.getElementsByTagName("head");if(c!==undefined&&c!==null&&c.length>0){a.scriptPlace=c[0]}}catch(d){}a.isPrerender=b.isDocVisibilityEqualsTo("prerender");if(document.attachEvent){document.attachEvent("webkitvisibilitychange",a.ehDocVisibilityChange);document.attachEvent("visibilitychange",a.ehDocVisibilityChange)}if(document.addEventListener){document.addEventListener("webkitvisibilitychange",a.ehDocVisibilityChange,false);document.addEventListener("visibilitychange",a.ehDocVisibilityChange,false)}a.addOLH()}());return b}());window.YWA=YAHOO.ywa.tracking.TrackerManager}if(typeof YAHOO.ywa.tracking.Tracker==="undefined"){YAHOO.ywa.tracking.Tracker=function(b){var a,c;a={tm:YAHOO.ywa.tracking.TrackerManager,beaconDescriptor:null,config:{domainSetting:{},index:window.ITTs.length,enableOnclickHandler:true,isPageViewTracked:false,isNoErrorOccured:true,excludeParameters:"",excludeDomains:"",excludeProtocol:"",excludePath:"",downloadExtensions:"",domains:"",isDebugMode:false,isRun:false,isColoInitialized:false,fpCookieName:"",fpCookieDomain:"",fpCookiePath:"/"},getClnUrl:function(v){var f,e,w,g,s,o,d,n,h,x,l,m,j,q,t;l="_S_PEPOS,_S_PEPRM";q=["[","]"];if(a.config.excludeParameters===undefined||a.config.excludeParameters===null){return v}f=v.split("?");if(f!==undefined&&f.length===1){return v}e=f[1].split("&");w=((a.config.excludeParameters.indexOf(";")>=0)?a.config.excludeParameters.split(";"):a.config.excludeParameters.split(","));g=[];o=0;for(n=0,s=w.length;n<s;n+=1){if(n<s-1||n===s-1&&w[n]!==""){g[o]=w[n];o+=1}}s=o;d="";for(n=0,m=e.length;n<m;n+=1){h=e[n].split("=")[0];for(o=0;o<q.length;o+=1){t=h.indexOf(q[o]);if(t>=0){h=h.substring(0,t)+"\\"+h.substring(t,h.length)}}j=true;x=new RegExp("\\b"+h+"\\b","gi");for(o=0;o<s;o+=1){j=j&&(h.length>0&&!x.test(g[o])||h.length===0&&g[o]!=="")}if(j){d+=((d.length>0)?"&":"")+e[n]}}return f[0]+((d.length>0)?"?"+d:"")},getBeaconDescriptor:function(){var k,j,g,i,e,f,h,d;j=function(l,m){return(typeof(l)===m.toLowerCase())};g=function(l){return j(l,"number")};i=function(l){if(!g(l)){return false}return(parseInt(l,10)===l)};e=function(l){return j(l,"object")};f=function(l){if(l===null||l===undefined){return false}return((e(l))&&(l.reverse)&&(l.valueOf().toString()===l.toString()))};h=function(l){if(l===null||l===undefined){return false}return((e(l))&&(i(l.valueOf()))&&(l.valueOf().toString()!==l.toString()))};d=function(l,n){var m;if(l===undefined){return undefined}if(l===null){return null}for(m in l){if(h(l[m])){n[m]=new Date(l[m].getTime())}else{if(f(l[m])){n[m]=l.slice(0)}else{if(e(l[m])){n[m]=d(l[m])}else{n[m]=l[m]}}}}};k=a.tm.createBeaconDescriptor();k.trackingDomain=a.beaconDescriptor.trackingDomain;k.scriptParent=a.beaconDescriptor.scriptParent;k.version=a.beaconDescriptor.version;d(a.beaconDescriptor.TrackerDescriptor,k.TrackerDescriptor);if(!a.config.isPageViewTracked){d(a.beaconDescriptor.EnvironmentDescriptor,k.EnvironmentDescriptor)}d(a.beaconDescriptor.PageDescriptor,k.PageDescriptor);d(a.beaconDescriptor.Additional,k.Additional);return k},setupEnviromentDescriptor:function(){var g,k,f,h,d;g=[];f="";h=document.referrer;a.tm.errorId=a.config.index;if(a.beaconDescriptor.PageDescriptor.referrer!==undefined&&a.beaconDescriptor.PageDescriptor.referrer!==null&&a.beaconDescriptor.PageDescriptor.referrer.length>0){h=a.beaconDescriptor.PageDescriptor.referrer}else{if((navigator.userAgent.indexOf("Mac")>=0)&&(navigator.userAgent.indexOf("MSIE 4")>=0)){h=document.referrer}else{if(a.config.isNoErrorOccured){a.tm.windowOnerror=window.onerror;window.onerror=a.tm.windowErrorHandler;if(document.location!==top.location){try{h=top.document.referrer;f=top.location.href}catch(j){a.beaconDescriptor.PageDescriptor.isNoReferrer="webkit"}}}else{a.beaconDescriptor.PageDescriptor.isNoReferrer="t"}}}if(a.tm.windowOnerror){window.onerror=a.tm.windowOnerror}else{window.onerror=null}if(h.length>0){k=(a.config.domains!==undefined&&a.config.domains!==null)?a.tm.mxDmnRGXP(a.config.domains):a.tm.mxDmnRGXP(a.tm.gh(location));a.beaconDescriptor.PageDescriptor.referrer=(k.test(a.tm.ghs(h))?a.getClnUrl(h):h)}if(f.length>0){a.beaconDescriptor.PageDescriptor.topLocation=f}d=new Date();a.beaconDescriptor.Additional.trackingDate=d.toGMTString();a.beaconDescriptor.EnvironmentDescriptor.timezoneOffset=parseInt(d.getTimezoneOffset()/60,10);a.beaconDescriptor.EnvironmentDescriptor.navigatorLanguage=navigator.language||navigator.userLanguage||"unknown";a.beaconDescriptor.EnvironmentDescriptor.navigatorJava=(navigator.javaEnabled()?"Y":"N");try{a.beaconDescriptor.EnvironmentDescriptor.screenDimension=screen.width+"x"+screen.height;a.beaconDescriptor.EnvironmentDescriptor.colorDepth=screen.colorDepth||screen.pixelDepth||"unknown"}catch(i){}a.beaconDescriptor.EnvironmentDescriptor.cookieSupport="true"},reset:function(){a.beaconDescriptor.Additional={}},fpcSupport:function(){if(a.tm.getCookie(a.config.fpCookieName)!==""){return true}var g,e,h,f;e="itfpctmp";h=new Date();f="fpc-"+h.getTime();a.tm.setCookie(e,f,180,a.config.fpCookieDomain,a.config.fpCookiePath);g=a.tm.getCookie(e);if(g===f){a.tm.deleteCookie(e,a.config.fpCookieDomain,a.config.fpCookiePath);return true}return false},checkDPID:function(){if(a.beaconDescriptor.TrackerDescriptor.dpId===""){a.beaconDescriptor.TrackerDescriptor.dpId=a.tm.getDPID();a.tm.setCookie("ywadp"+a.beaconDescriptor.TrackerDescriptor.projectId,a.beaconDescriptor.TrackerDescriptor.dpId,94608000,a.config.fpCookieDomain,a.config.fpCookiePath)}},track:function(){if(a.tm.isDocVisibilityEqualsTo("prerender")){return}a.checkDPID();if(a.config.isRun){return}if(!a.config.isPageViewTracked){a.setupEnviromentDescriptor()}if(!c.isProtocolExcluded()){if(!a.config.isDebugMode){a.config.isColoInitialized=true;YAHOO.ywa.tracking.BeaconScheduler.addToQueue(a.getBeaconDescriptor())}else{window.alert(YAHOO.ywa.tracking.BeaconScheduler.getTrackingUrl(a.getBeaconDescriptor()))}}else{if(a.config.isDebugMode){window.alert("'"+YAHOO.ywa.tracking.BeaconScheduler.getTrackingUrl(a.getBeaconDescriptor())+"' isn't tracked because of excluded protocol.")}}a.config.isPageViewTracked=true;a.reset();a.tm.errorId=""},exitlink:function(d){a.beaconDescriptor.Additional.exitUrl=d;a.track()}};c={FPCV:"",isOnclickHandlerEnabled:function(){return a.config.enableOnclickHandler},setOnclickHandlerEnabled:function(d){a.config.enableOnclickHandler=d},onclickOverwrite:function(d){var f,e;if(!a.config.enableOnclickHandler){return}if(c.isDomainExcluded(a.tm.gh(d))){if(a.config.isDebugMode){window.alert("'"+a.tm.gh(d)+"' isn't tracked as exitlink.")}return true}if(d.pathname!==undefined&&d.pathname!==null){e=a.tm.getFileName(d.pathname);if(e!==""){f=new RegExp(c.getDownloadExts(),"i");if(f.test(e)&&(e.indexOf(".")!==-1)){if(((a.config.excludePath!=="")&&(!a.tm.mxDmnRGXP(a.config.excludePath).test(d.pathname)))||(a.config.excludePath.length===0)){c.download(d.href)}}else{c.el(d)}}else{c.el(d)}}},initializeTrackingDomain:function(d){if(a.config.isColoInitialized){return}a.config.isColoInitialized=true;a.config.domainSetting=YAHOO.ywa.tracking.ColoSetting.getColoDescriptor(d);a.beaconDescriptor.trackingDomain=(window.location.protocol.indexOf("https:")===0?"https://"+a.config.domainSetting.secure:"http://"+a.config.domainSetting.nonSecure)},getITTIdx:function(){return a.config.index},getSessionId:function(){return a.beaconDescriptor.TrackerDescriptor.sessionId},setSessionId:function(d){a.beaconDescriptor.TrackerDescriptor.sessionId=d},getDocumentName:function(){return a.beaconDescriptor.PageDescriptor.documentName},setDocumentName:function(d){a.beaconDescriptor.PageDescriptor.documentName=d},getDocumentGroup:function(){return a.beaconDescriptor.PageDescriptor.documentGroup},setDocumentGroup:function(d){a.beaconDescriptor.PageDescriptor.documentGroup=d},getMemberId:function(){return a.beaconDescriptor.PageDescriptor.memberId},setMemberId:function(d){a.beaconDescriptor.PageDescriptor.memberId=d},getAction:function(){return a.beaconDescriptor.Additional.action},setAction:function(d){a.beaconDescriptor.Additional.action=d},getAmount:function(){return a.beaconDescriptor.Additional.amount},setAmount:function(d){a.beaconDescriptor.Additional.amount=d},getOrderId:function(){return a.beaconDescriptor.Additional.orderId},setOrderId:function(d){a.beaconDescriptor.Additional.orderId=d},getTax:function(){return a.beaconDescriptor.Additional.tax},setTax:function(d){a.beaconDescriptor.Additional.tax=d},getShipping:function(){return a.beaconDescriptor.Additional.shipping},setShipping:function(d){a.beaconDescriptor.Additional.shipping=d},getDiscount:function(){return a.beaconDescriptor.Additional.discount},setDiscount:function(e){a.beaconDescriptor.Additional.discount=e},getSKU:function(){return a.beaconDescriptor.Additional.sku},setSKU:function(d){a.beaconDescriptor.Additional.sku=d},getUnits:function(){return a.beaconDescriptor.Additional.units},setUnits:function(d){a.beaconDescriptor.Additional.units=d},getAmounts:function(){return a.beaconDescriptor.Additional.amounts},setAmounts:function(d){a.beaconDescriptor.Additional.amounts=d},getCmpQuery:function(){return a.beaconDescriptor.Additional.campaignQuery},setCmpQuery:function(d){a.beaconDescriptor.Additional.campaignQuery=d},getCampaign:function(){return a.beaconDescriptor.Additional.campaign},setCampaign:function(d,e){a.beaconDescriptor.Additional.campaign=d+"#"+e},getPromo:function(){return a.beaconDescriptor.Additional.promo},setPromo:function(d,e){a.beaconDescriptor.Additional.promo=d+"#"+e},getISK:function(){return a.beaconDescriptor.Additional.internalSearchKey},setISK:function(d){a.beaconDescriptor.Additional.internalSearchKey=d},getISR:function(){return a.beaconDescriptor.Additional.internalSearchResult},setISR:function(d){a.beaconDescriptor.Additional.internalSearchResult=d},getEF:function(d){d=parseInt(d,10);return a.beaconDescriptor.Additional["extraField"+d]},setEF:function(e,d){e=parseInt(e,10);a.beaconDescriptor.Additional["extraField"+e]=d},getCF:function(d){d=parseInt(d,10);return a.beaconDescriptor.Additional["customField"+((d<10)?"0":"")+d]},setCF:function(e,d){e=parseInt(e,10);a.beaconDescriptor.Additional["customField"+((e<10)?"0":"")+e]=d},getDebug:function(){return a.config.isDebugMode},setDebug:function(e){a.config.isDebugMode=((e!==undefined&&e!==null)?e:false)},getRun:function(){return a.config.isRun},setRun:function(d){if(d===undefined||d===null||d){a.config.isRun=(a.beaconDescriptor.TrackerDescriptor.projectId!==undefined)}else{a.config.isRun=false}},getUrl:function(){return a.beaconDescriptor.PageDescriptor.url},setUrl:function(d){a.beaconDescriptor.PageDescriptor.url=a.getClnUrl(d)},getEncoding:function(){return a.beaconDescriptor.PageDescriptor.encoding},setEncoding:function(d){a.beaconDescriptor.PageDescriptor.encoding=((d!==undefined&&d!==null)?d:"")},getCookieDomain:function(){return a.config.fpCookieDomain},setCookieDomain:function(e){a.config.fpCookieDomain=((e!==undefined&&e!==null&&e!=="")?e:"")},getCookiePath:function(){return a.config.fpCookiePath},setCookiePath:function(d){if(d!==undefined&&d!==null&&d!==""){if(d.charAt(0)!=="/"){d="/"+d}a.config.fpCookiePath=d}else{a.config.fpCookiePath="/"}},getTPSC:function(){return(a.beaconDescriptor.TrackerDescriptor.thirdPartySessionCookie===1)},setTPSC:function(d){a.beaconDescriptor.TrackerDescriptor.thirdPartySessionCookie=(d===true?1:"")},getReferrer:function(){return a.beaconDescriptor.PageDescriptor.referrer},setReferrer:function(d){if(d!==undefined&&d!==null&&d.length>0){a.beaconDescriptor.PageDescriptor.referrer=d}},getDomains:function(){return a.config.domains},setDomains:function(e){a.config.domains=((e!==undefined&&e!==null&&e!=="")?e:undefined)},getFlashUrl:function(){return a.beaconDescriptor.Additional.flashUrl},setFlashUrl:function(d){a.beaconDescriptor.Additional.flashUrl=((d!==undefined&&d!==null)?d:"")},getExcludeDomains:function(){var e;e=a.tm.getExcludeDomains();e+=(e.length>0&&a.config.excludeDomains.length>0?",":"")+a.config.excludeDomains;return e},addExcludeDomain:function(e){a.config.excludeDomains+=(a.config.excludeDomains.length>0?",":"")+e},removeExcludeDomain:function(g){var f,e,j,h;e=a.config.excludeDomains.split(",");j=[];for(f=0,h=e.length;f<h;f+=1){if(e[f]!==g){j[j.length]=e[f]}}a.config.excludeDomains=j.join(",")},isDomainExcluded:function(d){var e,f;f=c.getExcludeDomains();if(f!==""){e=a.tm.mxDmnRGXP(f);return e.test(d)}return false},getDownloadExts:function(){var d;d=a.tm.getDownloadExtension();d+=(d.length>0&&a.config.excludeDomains.length>0?"|":"")+a.config.excludeDomains;return d},addDownloadExt:function(h){var f,k,j,g,d;j=h.toLowerCase();g="";for(f=0,d=j.length;f<d;f+=1){k=j.charAt(f);if((k>="a"&&k<="z")||(k>="0"&&k<="9")||k==="-"||k==="_"){g+=k}}a.config.excludeDomains+=(a.config.excludeDomains.length>0?"|":"")+"\\."+g+"$"},removeDownloadExt:function(j){var d,h,f,g;h=a.config.excludeDomains.split("|");f=[];for(d=0,g=h.length;d<g;d+=1){if(h[d]!=="\\."+j.toLowerCase()+"$"){f[f.length]=h[d]}}a.config.excludeDomains=f.join("|")},getExcludeProtocol:function(){return a.config.excludeProtocol},addExcludeProtocol:function(d){a.config.excludeProtocol+=(a.config.excludeProtocol.length>0?",":"")+d.toLowerCase()},removeExcludeProtocol:function(j){var d,h,f,g;h=a.config.excludeProtocol.split(",");f=[];for(d=0,g=h.length;d<g;d+=1){if(h[d]!==j.toLowerCase()){f[f.length]=h[d]}}a.config.excludeProtocol=f.join(",")},isProtocolExcluded:function(){var d;d=","+c.getExcludeProtocol()+",";return d.indexOf(","+window.location.protocol+",")>=0},setFPCookies:function(){if(c.FPCV!==""){a.beaconDescriptor.TrackerDescriptor.fpcValue=c.FPCV;a.tm.setCookie(a.config.fpCookieName,c.FPCV,31536000,a.config.fpCookieDomain,a.config.fpCookiePath)}},submitPT:function(){return c.submit()},submitError:function(){a.config.isNoErrorOccured=false;return a.submit()},submit:function(){return a.track()},submit_customfield:function(){a.beaconDescriptor.Additional.customFieldsOnly=true;a.track()},submit_action:function(){a.beaconDescriptor.Additional.actionOnly=true;a.track()},submit_icmp:function(){a.beaconDescriptor.Additional.internalCampaignOnly=true;a.track()},el:function(d){var f,e;e=a.tm.gh(d);if(a.tm.gh(location)===e){return true}if(!c.isProtocolExcluded()){f=((a.config.domains!==undefined&&a.config.domains!==null&&a.config.domains!=="")?a.tm.mxDmnRGXP(a.config.domains):a.tm.mxDmnRGXP(a.tm.gh(location)))}else{f=a.tm.mxDmnRGXP("protocolexclusion")}if(f.test(e)){return true}if(d.href.indexOf("java")!==0){a.exitlink(d.href)}return true},download:function(d){a.beaconDescriptor.Additional.downloadUrl=d;a.track()},page:function(h,f,i,g,e){var d;d=a.beaconDescriptor.PageDescriptor.url;a.beaconDescriptor.PageDescriptor.url=a.beaconDescriptor.Additional.flashUrl!==""?a.beaconDescriptor.Additional.flashUrl:"FLASH";a.beaconDescriptor.PageDescriptor.documentName=h;a.beaconDescriptor.PageDescriptor.documentGroup=f;a.beaconDescriptor.PageDescriptor.memberId=i;a.beaconDescriptor.Additional.action=g;a.beaconDescriptor.Additional.amount=e;c.submit();a.beaconDescriptor.PageDescriptor.url=d}};(function(){if(a.tm.isLockedForTracker()){throw new Error("[YWA-Tracker] Invalid method to get a tracker object.")}if(b===undefined||b===null){throw new Error("[YWA-Tracker] Unavailable configuration descriptor to create a tracker.")}if(!b.projectId){throw new Error("[YWA-Tracker] Undefined project ID in configuration descriptor.")}if(!b.domainSetting){throw new Error("[YWA-Tracker] Undefined tracking domain information in configuration descriptor.")}if(!b.domainSetting.nonSecure||!b.domainSetting.secure){throw new Error("[YWA-Tracker] Invalid tracking domain information.")}a.config.domainSetting={nonSecure:b.domainSetting.nonSecure,secure:b.domainSetting.secure};a.config.enableOnclickHandler=(b.enableOnclickHandler||true);a.config.excludeParameters=(b.excludeParameters||"");a.config.excludeProtocol=(b.excludeProtocol||"");a.beaconDescriptor=a.tm.createBeaconDescriptor();a.beaconDescriptor.trackingDomain=(window.location.protocol.indexOf("https:")===0?"https://"+a.config.domainSetting.secure:"http://"+a.config.domainSetting.nonSecure);a.beaconDescriptor.scriptParent=a.tm.getScriptPlace();a.beaconDescriptor.version=a.tm.versionAndType();a.beaconDescriptor.TrackerDescriptor.projectId=b.projectId;a.beaconDescriptor.TrackerDescriptor.dpId=a.tm.getCookie("ywadp"+a.beaconDescriptor.TrackerDescriptor.projectId);a.config.fpCookieName="fpc"+a.beaconDescriptor.TrackerDescriptor.projectId;a.beaconDescriptor.TrackerDescriptor.fpcValue=a.tm.getCookie(a.config.fpCookieName);a.beaconDescriptor.TrackerDescriptor.trackerIdx=a.config.index;a.beaconDescriptor.PageDescriptor.url=a.getClnUrl(document.URL?document.URL:document.location);a.beaconDescriptor.PageDescriptor.documentName=document.title;a.beaconDescriptor.PageDescriptor.encoding=document.charset||document.characterSet||"";a.beaconDescriptor.EnvironmentDescriptor.flashVersion=a.tm.flash();a.beaconDescriptor.TrackerDescriptor.dpId=a.tm.getCookie("ywadp"+a.beaconDescriptor.TrackerDescriptor.projectId)}());return c}}if(typeof YAHOO.ywa.tracking.BeaconScheduler==="undefined"){YAHOO.ywa.tracking.BeaconScheduler=(function(){var a,b;a={parameterOrder:["a","v","dpid","b","c","m","f","e","t","n","d","cp","cq","scp","ci","enc","x","sid","ca","oc","p","q","r","xa","xd","xs","xt","el","fn","flv","fpc","isk","isr","g","h","ittidx","ix","j","k","l","tp","nr","js","cf01","cf02","cf03","cf04","cf05","cf06","cf07","cf08","cf09","cf10","cf11","cf12","cf13","cf14","cf15","cf16","cf17","cf18","cf19","cf20","cf21","cf22","cf23","cf24","cf25","cf26","cf27","cf28","cf29","cf30","cf31","cf32","cf33","cf34","cf35","cf36","cf37","cf38","cf39","cf40","cf41","cf42","cf43","cf44","cf45","cf46","cf47","cf48","cf49","cf50","cf51","cf52","cf53","cf54","cf55","cf56","cf57","cf58","cf59","cf60","cf61","cf62","cf63","cf64","cf65","cf66","cf67","cf68","cf69","cf70","cf71","cf72","cf73","cf74","cf75","cf76","cf77","cf78","cf79","cf80","cf81","cf82","cf83","cf84","cf85","cf86","cf87","cf88","cf89","cf90","cf91","cf92","cf93","cf94","cf95","cf96","cf97","cf98","cf99","cf100"],trackerAttributes:{dpId:"dpid",projectId:"a",fpcValue:"fpc",trackerIdx:"ittidx",sessionId:"sid",thirdPartySessionCookie:"tp"},environmentAttributes:{timezoneOffset:"n",navigatorLanguage:"g",navigatorJava:"h",screenDimension:"j",colorDepth:"k",cookieSupport:"l",flashVersion:"flv"},pageAttributes:{documentName:"b",documentGroup:"c",memberId:"m",url:"f",referrer:"e",topLocation:"t",encoding:"enc",isNoReferrer:"nr"},additionalAttributes:{trackingDate:"d",action:"x",amount:"xa",orderId:"oc",tax:"xt",shipping:"xs",discount:"xd",sku:"p",units:"q",amounts:"r",campaignQuery:"cq",internalSearchKey:"isk",internalSearchResult:"isr",exitUrl:"el",downloadUrl:"fn",customFieldsOnly:"cf",actionOnly:"ca",internalCampaignOnly:"ci",campaign:"cp",promo:"scp"},beaconQueue:[],responseScript:null,trunc:function(m,l){var c,j,k,d,g,f,e,i,h;if(m.length<=l){return m}c=m.split("?");if(c.length>1){d=c[0]+"?";j=c[1];k=j.split("&");k.sort();e=false;h=k.length;for(g=0,i=a.parameterOrder.length;g<i;g+=1){for(f=0;f<h;f+=1){if(k[f].indexOf(a.parameterOrder[g]+"=")===0){if(d.length+"&".length+k[f].length>l){return d+"&trnc=1"}d+=(e?"&":"")+k[f];e=true;break}}}return d}else{return m}},checkBeaconDescriptorValidity:function(c){var d;d=true;d=d&&(c.trackingDomain!==undefined&&c.trackingDomain!==null&&c.trackingDomain!=="");d=d&&(c.scriptParent!==undefined&&c.scriptParent!==null&&c.scriptParent.appendChild);d=d&&(c.version!==undefined&&c.version!==null&&c.version!=="");if(c.TrackerDescriptor!==undefined&&c.TrackerDescriptor!==null){d=d&&(c.TrackerDescriptor.dpId!==undefined&&c.TrackerDescriptor.dpId!==null&&c.TrackerDescriptor.dpId!=="");d=d&&(c.TrackerDescriptor.projectId!==undefined&&c.TrackerDescriptor.projectId!==null&&c.TrackerDescriptor.projectId!=="")}else{d=d&&false}d=d&&(c.EnvironmentDescriptor!==undefined&&c.EnvironmentDescriptor!==null);d=d&&(c.PageDescriptor!==undefined&&c.PageDescriptor!==null);d=d&&(c.Additional!==undefined&&c.Additional!==null);return d},timePop:function(){window.setTimeout(a.pop,50)},correctBeaconDescriptor:function(c){var d;if(c.TrackerDescriptor.fpcValue===undefined||c.TrackerDescriptor.fpcValue===null||c.TrackerDescriptor.fpcValue===""){d=YAHOO.ywa.tracking.TrackerManager.getTracker(c.TrackerDescriptor.projectId);c.TrackerDescriptor.fpcValue=d.FPCV}},send:function(d){var c;a.correctBeaconDescriptor(d);c=b.getTrackingUrl(d);a.responseScript=document.createElement("script");a.responseScript.onload=a.responseScript.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){a.timePop()}};a.responseScript.onerror=function(){a.timePop();throw new Error("[YWA-BeaconScheduler] No data collection available")};a.responseScript.defer=true;a.responseScript.type="text/javascript";a.responseScript.src=c;d.scriptParent.appendChild(a.responseScript)},pop:function(){var c;if(a.beaconQueue.length>0){c=a.beaconQueue.splice(0,1);a.send(c[0])}else{a.timePop()}}};b={getTrackingUrl:function(d){var c,e;e=function(f,g){var h;for(h in f){if(f[h]!==undefined&&f[h]!==""&&g[h]!==undefined){c.push("&"+g[h]+"="+encodeURIComponent(f[h]))}}};c=[];c.push(d.trackingDomain);c.push("/fpc.pl");c.push("?v="+d.version);e(d.TrackerDescriptor,a.trackerAttributes);e(d.EnvironmentDescriptor,a.environmentAttributes);e(d.PageDescriptor,a.pageAttributes);e(d.Additional,a.additionalAttributes);c=a.trunc(c.join(""),2000);return c},addToQueue:function(c){if(!a.checkBeaconDescriptorValidity(c)){return}a.beaconQueue.push(c)}};(function(){var c;for(c=0;c<10;c+=1){a.additionalAttributes["extraField"+(1+c)]="p"+(1+c)}for(c=0;c<99;c+=1){a.additionalAttributes["customField"+((c<9)?"0":"")+(1+c)]="cf"+(1+c)}a.timePop()}());return b}())}if(typeof YAHOO.ywa.tracking.MetaSetupController==="undefined"){YAHOO.ywa.tracking.MetaSetupController=(function(){var a,b;a={setupTrackerByMeta:function(c){var e,d;e=c.name.toUpperCase().split("-");if(e.length!==3&&e.length!==4){return}if(e[0]!=="YWATC"){return}d=YAHOO.ywa.tracking.TrackerManager.getTracker(e[1]);switch(e[2]){case"COLO":d.initializeTrackingDomain(c.content);break;case"ONCLICKHANDLER":d.setOnclickHandlerEnabled(c.content.toLowerCase()==="true");break;case"SESSIONID":d.setSessionId(c.content);break;case"DOCUMENTNAME":d.setDocumentName(c.content);break;case"DOCUMENTGROUP":d.setDocumentGroup(c.content);break;case"MEMBERID":d.setMemberId(c.content);break;case"ACTION":d.setAction(c.content);break;case"AMOUNT":d.setAmount(c.content);break;case"ORDERID":d.setOrderId(c.content);break;case"TAX":d.setTax(c.content);break;case"SHIPPING":d.setShipping(c.content);break;case"DISCOUNT":d.setDiscount(c.content);break;case"SKU":d.setSku(c.content);break;case"UNITS":d.setUnits(c.content);break;case"AMOUNTS":d.setAmounts(c.content);break;case"CMPQUERY":d.setCmpQuery(c.content);break;case"CAMPAIGN":if(e.length===4){d.setCampaign(e[3],c.content)}break;case"PROMO":if(e.length===4){d.setPromo(e[3],c.content)}break;case"ISK":d.setISK(c.content);break;case"ISR":d.setISR(c.content);break;case"EXTRAFIELD":if(e.length===4){d.setEF(e[3],c.content)}break;case"CUSTOMFIELD":if(e.length===4){d.setCF(e[3],c.content)}break;case"DEBUG":d.setDebug(c.content.toLowerCase()==="true");break;case"RUN":d.setRun(c.content.toLowerCase()==="true");break;case"URL":d.setUrl(c.content);break;case"ENCODING":d.setEncoding(c.content);break;case"COOKIEDOMAIN":d.setCookieDomain(c.content);break;case"COOKIEPATH":d.setCookiePath(c.content);break;case"TPSC":d.setTPSC(c.content.toLowerCase()==="true");break;case"REFERRER":d.setReferrer(c.content);break;case"DOMAINS":d.setDomains(c.content);break;case"FLASHURL":d.setFlashUrl(c.content);break;case"EXCLUDEDOMAIN":d.addExcludeDomain(c.content);break;case"EXCLUDEPROTOCOL":d.addExcludeProtocol(c.content);break;case"DOWNLOADEXTENSION":d.addDownloadExt(c.content);break}},setupTrackersByMetaTags:function(){var d,c,e;d=document.getElementsByTagName("meta");for(c=0,e=d.length;c<e;c+=1){if(d[c].name&&d[c].name.indexOf("YWATC")===0){a.setupTrackerByMeta(d[c])}}},submitTrackers:function(){YAHOO.ywa.tracking.TrackerManager.submitTrackers()}};b={};(function(){a.setupTrackersByMetaTags();a.submitTrackers()}())}())};
/* ywa-tracking.js 814230 */ YUI.add("media-ywa-tracking",function(a){a.namespace("Media.YWA");a.Media.YWA={init:function(b){this.submit(b)},submit:function(c){var b=this._initYWATracker(c);if(b){b.submit()}},submit_action:function(c){var b=this._initYWATracker(c);if(b){b.submit_action()}},_initYWATracker:function(d){if(!d){return}try{if(a.Lang.isString(d)){d=a.JSON.parse("{"+d+"}")}var i=d.projectId,b=d.documentName,h=d.documentGroup,g=d.customFields,f=d.action,k=null,c=null;if(!i||typeof YWA=="undefined"){return}k=YWA.getTracker(i);if(b){k.setDocumentName(b)}if(h){k.setDocumentGroup(h)}if(g){for(c in g){k.setCF(parseInt(c,10),g[c])}}if(f){k.setAction(f)}return k}catch(j){}}}},"1.0",{});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("shim-plugin",function(b){function a(c){this.init(c);}a.CLASS_NAME="yui-node-shim";a.TEMPLATE='<iframe class="'+a.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>';a.prototype={init:function(c){this._host=c.host;this.initEvents();this.insert();this.sync();},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this);},getShim:function(){return this._shim||(this._shim=b.Node.create(a.TEMPLATE,this._host.get("ownerDocument")));},insert:function(){var c=this._host;this._shim=c.insertBefore(this.getShim(),c.get("firstChild"));},sync:function(){var d=this._shim,c=this._host;if(d){d.setAttrs({width:c.getStyle("width"),height:c.getStyle("height")});}},destroy:function(){var c=this._shim;if(c){c.remove(true);}this._resizeHandle.detach();}};a.NAME="Shim";a.NS="shim";b.namespace("Plugin");b.Plugin.Shim=a;},"3.5.1",{requires:["node-style","node-pluginhost"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("querystring-stringify-simple",function(c){var b=c.namespace("QueryString"),a=encodeURIComponent;b.stringify=function(j,k){var d=[],h=k&&k.arrayKey?true:false,g,f,e;for(g in j){if(j.hasOwnProperty(g)){if(c.Lang.isArray(j[g])){for(f=0,e=j[g].length;f<e;f++){d.push(a(h?g+"[]":g)+"="+a(j[g][f]));}}else{d.push(a(g)+"="+a(j[g]));}}}return d.join("&");};},"3.5.1",{requires:["yui-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-base",function(a){var h=["start","complete","end","success","failure","progress"],b=["status","statusText","responseText","responseXML"],f=a.config.win,g=0;function c(j){var k=this;k._uid="io:"+g++;k._init(j);a.io._map[k._uid]=k;}c.prototype={_id:0,_headers:{"X-Requested-With":"XMLHttpRequest"},_timeout:{},_init:function(k){var m=this,l,j;m.cfg=k||{};a.augment(m,a.EventTarget);for(l=0,j=h.length;l<j;++l){m.publish("io:"+h[l],a.merge({broadcast:1},k));m.publish("io-trn:"+h[l],k);}},_create:function(k,p){var o=this,n={id:a.Lang.isNumber(p)?p:o._id++,uid:o._uid},m=k.xdr?k.xdr.use:null,l=k.form&&k.form.upload?"iframe":null,j;if(m==="native"){m=a.UA.ie?"xdr":null;}j=m||l;n=j?a.merge(a.IO.customTransport(j),n):a.merge(a.IO.defaultTransport(),n);if(n.notify){k.notify=function(r,q,s){o.notify(r,q,s);};}if(!j){if(f&&f.FormData&&k.data instanceof FormData){n.c.upload.onprogress=function(q){o.progress(n,q,k);};n.c.onload=function(q){o.load(n,q,k);};n.c.onerror=function(q){o.error(n,q,k);};n.upload=true;}}return n;},_destroy:function(j){if(f&&!j.notify&&!j.xdr){if(d&&!j.upload){j.c.onreadystatechange=null;}else{if(j.upload){j.c.upload.onprogress=null;j.c.onload=null;j.c.onerror=null;}else{if(a.UA.ie&&!j.e){j.c.abort();}}}}j=j.c=null;},_evt:function(n,k,j){var p=this,l,q=j["arguments"],r=p.cfg.emitFacade,m="io:"+n,o="io-trn:"+n;this.detach(o);if(k.e){k.c={status:0,statusText:k.e};}l=[r?{id:k.id,data:k.c,cfg:j,"arguments":q}:k.id];if(!r){if(n===h[0]||n===h[2]){if(q){l.push(q);}}else{if(k.evt){l.push(k.evt);}else{l.push(k.c);}if(q){l.push(q);}}}l.unshift(m);p.fire.apply(p,l);if(j.on){l[0]=o;p.once(o,j.on[n],j.context||a);p.fire.apply(p,l);}},start:function(k,j){this._evt(h[0],k,j);},complete:function(k,j){this._evt(h[1],k,j);},end:function(k,j){this._evt(h[2],k,j);this._destroy(k);},success:function(k,j){this._evt(h[3],k,j);this.end(k,j);},failure:function(k,j){this._evt(h[4],k,j);this.end(k,j);},progress:function(l,k,j){l.evt=k;this._evt(h[5],l,j);},load:function(l,k,j){l.evt=k.target;this._evt(h[1],l,j);},error:function(l,k,j){l.evt=k;this._evt(h[4],l,j);},_retry:function(l,k,j){this._destroy(l);j.xdr.use="flash";return this.send(k,j,l.id);},_concat:function(j,k){j+=(j.indexOf("?")===-1?"?":"&")+k;return j;},setHeader:function(j,k){if(k){this._headers[j]=k;}else{delete this._headers[j];}},_setHeaders:function(k,j){j=a.merge(this._headers,j);a.Object.each(j,function(m,l){if(m!=="disable"){k.setRequestHeader(l,j[l]);}});},_startTimeout:function(k,j){var l=this;l._timeout[k.id]=setTimeout(function(){l._abort(k,"timeout");},j);},_clearTimeout:function(j){clearTimeout(this._timeout[j]);delete this._timeout[j];},_result:function(m,k){var j;try{j=m.c.status;}catch(l){j=0;}if(j>=200&&j<300||j===304||j===1223){this.success(m,k);}else{this.failure(m,k);}},_rS:function(k,j){var l=this;if(k.c.readyState===4){if(j.timeout){l._clearTimeout(k.id);}setTimeout(function(){l.complete(k,j);l._result(k,j);},0);}},_abort:function(k,j){if(k&&k.c){k.e=j;k.c.abort();}},send:function(l,m,k){var n,j,q,r,v,p,t=this,w=l,o={};m=m?a.Object(m):{};n=t._create(m,k);j=m.method?m.method.toUpperCase():"GET";v=m.sync;p=m.data;if((a.Lang.isObject(p)&&!p.nodeType)&&!n.upload){p=a.QueryString.stringify(p);}if(m.form){if(m.form.upload){return t.upload(n,l,m);}else{p=t._serialize(m.form,p);}}if(p){switch(j){case"GET":case"HEAD":case"DELETE":w=t._concat(w,p);p="";break;case"POST":case"PUT":m.headers=a.merge({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},m.headers);break;}}if(n.xdr){return t.xdr(w,n,m);}else{if(n.notify){return n.c.send(n,l,m);}}if(!v&&!n.upload){n.c.onreadystatechange=function(){t._rS(n,m);};}try{n.c.open(j,w,!v,m.username||null,m.password||null);t._setHeaders(n.c,m.headers||{});t.start(n,m);if(m.xdr&&m.xdr.credentials){if(!a.UA.ie){n.c.withCredentials=true;}}n.c.send(p);if(v){for(q=0,r=b.length;q<r;++q){o[b[q]]=n.c[b[q]];}o.getAllResponseHeaders=function(){return n.c.getAllResponseHeaders();};o.getResponseHeader=function(u){return n.c.getResponseHeader(u);};t.complete(n,m);t._result(n,m);return o;}}catch(s){if(n.xdr){return t._retry(n,l,m);}else{t.complete(n,m);t._result(n,m);}}if(m.timeout){t._startTimeout(n,m.timeout);}return{id:n.id,abort:function(){return n.c?t._abort(n,"abort"):false;},isInProgress:function(){return n.c?(n.c.readyState%4):false;},io:t};}};a.io=function(k,j){var l=a.io._map["io:0"]||new c();return l.send.apply(l,[k,j]);};a.io.header=function(j,k){var l=a.io._map["io:0"]||new c();l.setHeader(j,k);};a.IO=c;a.io._map={};var d=f&&f.XMLHttpRequest,i=f&&f.XDomainRequest,e=f&&f.ActiveXObject;a.mix(a.IO,{_default:"xhr",defaultTransport:function(k){if(k){a.IO._default=k;}else{var j={c:a.IO.transports[a.IO._default](),notify:a.IO._default==="xhr"?false:true};return j;}},transports:{xhr:function(){return d?new XMLHttpRequest():e?new ActiveXObject("Microsoft.XMLHTTP"):null;},xdr:function(){return i?new XDomainRequest():null;},iframe:function(){return{};},flash:null,nodejs:null},customTransport:function(k){var j={c:a.IO.transports[k]()};j[(k==="xdr"||k==="flash")?"xdr":"notify"]=true;return j;}});a.mix(a.IO.prototype,{notify:function(k,l,j){var m=this;switch(k){case"timeout":case"abort":case"transport error":l.c={status:0,statusText:k};k="failure";default:m[k].apply(m,[l,j]);}}});},"3.5.1",{requires:["event-custom-base","querystring-stringify-simple"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("datatype-xml-parse",function(b){var a=b.Lang;b.mix(b.namespace("DataType.XML"),{parse:function(f){var d=null;if(a.isString(f)){try{if(!a.isUndefined(ActiveXObject)){d=new ActiveXObject("Microsoft.XMLDOM");d.async=false;d.loadXML(f);}}catch(c){try{if(!a.isUndefined(DOMParser)){d=new DOMParser().parseFromString(f,"text/xml");}}catch(g){}}}if((a.isNull(d))||(a.isNull(d.documentElement))||(d.documentElement.nodeName==="parsererror")){}return d;}});b.namespace("Parsers").xml=b.DataType.XML.parse;},"3.5.1");/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-xdr",function(a){var k=a.publish("io:xdrReady",{fireOnce:true}),e={},g={},j=a.config.doc,l=a.config.win,f=l&&l.XDomainRequest;function h(m,q,d){var n='<object id="io_swf" type="application/x-shockwave-flash" data="'+m+'" width="0" height="0">'+'<param name="movie" value="'+m+'">'+'<param name="FlashVars" value="yid='+q+"&uid="+d+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",p=j.createElement("div");j.body.appendChild(p);p.innerHTML=n;}function b(p,m,n){if(m==="flash"){p.c.responseText=decodeURI(p.c.responseText);}if(n==="xml"){p.c.responseXML=a.DataType.XML.parse(p.c.responseText);}return p;}function i(d,m){return d.c.abort(d.id,m);}function c(d){return f?g[d.id]!==4:d.c.isInProgress(d.id);}a.mix(a.IO.prototype,{_transport:{},_ieEvt:function(n,q){var p=this,m=n.id,d="timeout";n.c.onprogress=function(){g[m]=3;};n.c.onload=function(){g[m]=4;p.xdrResponse("success",n,q);};n.c.onerror=function(){g[m]=4;p.xdrResponse("failure",n,q);};if(q[d]){n.c.ontimeout=function(){g[m]=4;p.xdrResponse(d,n,q);};n.c[d]=q[d];}},xdr:function(d,m,p){var n=this;if(p.xdr.use==="flash"){e[m.id]=p;l.setTimeout(function(){try{m.c.send(d,{id:m.id,uid:m.uid,method:p.method,data:p.data,headers:p.headers});}catch(o){n.xdrResponse("transport error",m,p);delete e[m.id];}},a.io.xdr.delay);}else{if(f){n._ieEvt(m,p);m.c.open(p.method||"GET",d);m.c.send(p.data);}else{m.c.send(d,m,p);}}return{id:m.id,abort:function(){return m.c?i(m,p):false;},isInProgress:function(){return m.c?c(m.id):false;},io:n};},xdrResponse:function(q,s,v){v=e[s.id]?e[s.id]:v;var t=this,n=f?g:e,p=v.xdr.use,r=v.xdr.dataType;switch(q){case"start":t.start(s,v);break;case"success":t.success(b(s,p,r),v);delete n[s.id];break;case"timeout":case"abort":case"transport error":s.c={status:0,statusText:q};case"failure":t.failure(b(s,p,r),v);delete n[s.id];break;}},_xdrReady:function(m,d){a.fire(k,m,d);},transport:function(d){if(d.id==="flash"){h(a.UA.ie?d.src+"?d="+new Date().valueOf().toString():d.src,a.id,d.uid);a.IO.transports.flash=function(){return j.getElementById("io_swf");};}}});a.io.xdrReady=function(n,d){var m=a.io._map[d];a.io.xdr.delay=0;m._xdrReady.apply(m,[n,d]);};a.io.xdrResponse=function(d,m,p){var n=a.io._map[m.uid];n.xdrResponse.apply(n,[d,m,p]);};a.io.transport=function(m){var d=a.io._map["io:0"]||new a.IO();m.uid=d._uid;d.transport.apply(d,[m]);};a.io.xdr={delay:100};},"3.5.1",{requires:["io-base","datatype-xml-parse"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("attribute-complex",function(b){var a=b.Object,c=".";b.Attribute.Complex=function(){};b.Attribute.Complex.prototype={_normAttrVals:function(g){var i={},h={},j,d,f,e;if(g){for(e in g){if(g.hasOwnProperty(e)){if(e.indexOf(c)!==-1){j=e.split(c);d=j.shift();f=h[d]=h[d]||[];f[f.length]={path:j,value:g[e]};}else{i[e]=g[e];}}}return{simple:i,complex:h};}else{return null;}},_getAttrInitVal:function(m,j,p){var e=j.value,o=j.valueFn,d,f,h,g,q,n,k;if(o){if(!o.call){o=this[o];}if(o){e=o.call(this,m);}}if(!j.readOnly&&p){d=p.simple;if(d&&d.hasOwnProperty(m)){e=d[m];}f=p.complex;if(f&&f.hasOwnProperty(m)){k=f[m];for(h=0,g=k.length;h<g;++h){q=k[h].path;n=k[h].value;a.setValue(e,q,n);}}}return e;}};b.mix(b.Attribute,b.Attribute.Complex,true,null,1);b.AttributeComplex=b.Attribute.Complex;},"3.5.1",{requires:["attribute-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("base-pluginhost",function(c){var a=c.Base,b=c.Plugin.Host;c.mix(a,b,false,null,1);a.plug=b.plug;a.unplug=b.unplug;},"3.5.1",{requires:["base-base","pluginhost"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("classnamemanager",function(c){var b="classNamePrefix",d="classNameDelimiter",a=c.config;a[b]=a[b]||"yui3";a[d]=a[d]||"-";c.ClassNameManager=function(){var e=a[b],f=a[d];return{getClassName:c.cached(function(){var g=c.Array(arguments);if(g[g.length-1]!==true){g.unshift(e);}else{g.pop();}return g.join(f);})};}();},"3.5.1",{requires:["yui-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-base",function(b){var g=b.Lang,r=b.Node,e=b.ClassNameManager,w=e.getClassName,M,s=b.cached(function(L){return L.substring(0,1).toUpperCase()+L.substring(1);}),F="content",P="visible",K="hidden",y="disabled",B="focused",d="width",A="height",N="boundingBox",v="contentBox",k="parentNode",m="ownerDocument",x="auto",j="srcNode",I="body",H="tabIndex",q="id",i="render",J="rendered",n="destroyed",a="strings",o="<div></div>",z="Change",p="loading",E="_uiSet",D="",G=function(){},u=true,O=false,t,l={},f=[P,y,A,d,B,H],C=b.UA.webkit,h={};function c(Q){var T=this,L,S,R=T.constructor;T._strs={};T._cssPrefix=R.CSS_PREFIX||w(R.NAME.toLowerCase());Q=Q||{};c.superclass.constructor.call(T,Q);S=T.get(i);if(S){if(S!==u){L=S;}T.render(L);}}c.NAME="widget";t=c.UI_SRC="ui";c.ATTRS=l;l[q]={valueFn:"_guid",writeOnce:u};l[J]={value:O,readOnly:u};l[N]={value:null,setter:"_setBB",writeOnce:u};l[v]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:u};l[H]={value:null,validator:"_validTabIndex"};l[B]={value:O,readOnly:u};l[y]={value:O};l[P]={value:u};l[A]={value:D};l[d]={value:D};l[a]={value:{},setter:"_strSetter",getter:"_strGetter"};l[i]={value:O,writeOnce:u};c.CSS_PREFIX=w(c.NAME.toLowerCase());c.getClassName=function(){return w.apply(e,[c.CSS_PREFIX].concat(b.Array(arguments),true));};M=c.getClassName;c.getByNode=function(L){var S,R,Q=M();L=r.one(L);if(L){L=L.ancestor("."+Q,true);if(L){R=L.get(q);S=h[R];}}return S||null;};b.extend(c,b.Base,{getClassName:function(){return w.apply(e,[this._cssPrefix].concat(b.Array(arguments),true));},initializer:function(L){var Q=this.get(N);if(Q instanceof r){this._mapInstance(Q.get(q));}if(this._applyParser){this._applyParser(L);}},_mapInstance:function(L){if(!(h[L])){h[L]=this;}},destructor:function(){var L=this.get(N),Q;if(L instanceof r){Q=L.get(q);if(Q in h){delete h[Q];}this._destroyBox();}},destroy:function(L){this._destroyAllNodes=L;return c.superclass.destroy.apply(this);},_destroyBox:function(){var R=this.get(N),Q=this.get(v),L=this._destroyAllNodes,S;S=R&&R.compareTo(Q);if(this.UI_EVENTS){this._destroyUIEvents();}this._unbindUI(R);if(L){R.empty();R.remove(u);}else{if(Q){Q.remove(u);}if(!S){R.remove(u);}}},render:function(L){if(!this.get(n)&&!this.get(J)){this.publish(i,{queuable:O,fireOnce:u,defaultTargetOnly:u,defaultFn:this._defRenderFn});this.fire(i,{parentNode:(L)?r.one(L):null});}return this;},_defRenderFn:function(L){this._parentNode=L.parentNode;this.renderer();this._set(J,u);this._removeLoadingClassNames();},renderer:function(){var L=this;L._renderUI();L.renderUI();L._bindUI();L.bindUI();L._syncUI();L.syncUI();},bindUI:G,renderUI:G,syncUI:G,hide:function(){return this.set(P,O);},show:function(){return this.set(P,u);},focus:function(){return this._set(B,u);},blur:function(){return this._set(B,O);},enable:function(){return this.set(y,O);},disable:function(){return this.set(y,u);},_uiSizeCB:function(L){this.get(v).toggleClass(M(F,"expanded"),L);},_renderBox:function(L){var T=this,Q=T.get(v),R=T.get(N),V=T.get(j),S=T.DEF_PARENT_NODE,U=(V&&V.get(m))||R.get(m)||Q.get(m);if(V&&!V.compareTo(Q)&&!Q.inDoc(U)){V.replace(Q);}if(!R.compareTo(Q.get(k))&&!R.compareTo(Q)){if(Q.inDoc(U)){Q.replace(R);}R.appendChild(Q);}L=L||(S&&r.one(S));if(L){L.appendChild(R);}else{if(!R.inDoc(U)){r.one(I).insert(R,0);}}},_setBB:function(L){return this._setBox(this.get(q),L,this.BOUNDING_TEMPLATE);},_setCB:function(L){return(this.CONTENT_TEMPLATE===null)?this.get(N):this._setBox(null,L,this.CONTENT_TEMPLATE);},_defaultCB:function(L){return this.get(j)||null;},_setBox:function(R,Q,L){Q=r.one(Q)||r.create(L);if(!Q.get(q)){Q.set(q,R||b.guid());}return Q;},_renderUI:function(){this._renderBoxClassNames();this._renderBox(this._parentNode);},_renderBoxClassNames:function(){var S=this._getClasses(),L,Q=this.get(N),R;Q.addClass(M());for(R=S.length-3;R>=0;R--){L=S[R];Q.addClass(L.CSS_PREFIX||w(L.NAME.toLowerCase()));}this.get(v).addClass(this.getClassName(F));},_removeLoadingClassNames:function(){var R=this.get(N),L=this.get(v),Q=this.getClassName(p),S=M(p);R.removeClass(S).removeClass(Q);L.removeClass(S).removeClass(Q);},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND);this._bindDOM();},_unbindUI:function(L){this._unbindDOM(L);},_bindDOM:function(){var L=this.get(N).get(m),Q=c._hDocFocus;if(!Q){Q=c._hDocFocus=L.on("focus",this._onDocFocus,this);Q.listeners={count:0};}Q.listeners[b.stamp(this,true)]=true;Q.listeners.count++;if(C){this._hDocMouseDown=L.on("mousedown",this._onDocMouseDown,this);}},_unbindDOM:function(L){var T=c._hDocFocus,Q=b.stamp(this,true),S,R=this._hDocMouseDown;if(T){S=T.listeners;if(S[Q]){delete S[Q];S.count--;}if(S.count===0){T.detach();c._hDocFocus=null;}}if(C&&R){R.detach();}},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC);},_uiSetHeight:function(L){this._uiSetDim(A,L);this._uiSizeCB((L!==D&&L!==x));},_uiSetWidth:function(L){this._uiSetDim(d,L);},_uiSetDim:function(L,Q){this.get(N).setStyle(L,g.isNumber(Q)?Q+this.DEF_UNIT:Q);},_uiSetVisible:function(L){this.get(N).toggleClass(this.getClassName(K),!L);},_uiSetDisabled:function(L){this.get(N).toggleClass(this.getClassName(y),L);},_uiSetFocused:function(R,Q){var L=this.get(N);L.toggleClass(this.getClassName(B),R);if(Q!==t){if(R){L.focus();}else{L.blur();}}},_uiSetTabIndex:function(Q){var L=this.get(N);if(g.isNumber(Q)){L.set(H,Q);}else{L.removeAttribute(H);}},_onDocMouseDown:function(L){if(this._domFocus){this._onDocFocus(L);}},_onDocFocus:function(L){var Q=c.getByNode(L.target),R=c._active;if(R&&(R!==Q)){R._domFocus=false;R._set(B,false,{src:t});c._active=null;}if(Q){Q._domFocus=true;Q._set(B,true,{src:t});c._active=Q;}},toString:function(){return this.name+"["+this.get(q)+"]";},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:o,BOUNDING_TEMPLATE:o,_guid:function(){return b.guid();},_validTabIndex:function(L){return(g.isNumber(L)||g.isNull(L));},_bindAttrUI:function(Q){var R,L=Q.length;for(R=0;R<L;R++){this.after(Q[R]+z,this._setAttrUI);}},_syncAttrUI:function(R){var S,Q=R.length,L;for(S=0;S<Q;S++){L=R[S];
this[E+s(L)](this.get(L));}},_setAttrUI:function(L){if(L.target===this){this[E+s(L.attrName)](L.newVal,L.src);}},_strSetter:function(L){return b.merge(this.get(a),L);},getString:function(L){return this.get(a)[L];},getStrings:function(){return this.get(a);},_UI_ATTRS:{BIND:f,SYNC:f}});b.Widget=c;},"3.5.1",{requires:["attribute","event-focus","base-base","base-pluginhost","node-base","node-style","classnamemanager"],skinnable:true});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-htmlparser",function(f){var e=f.Widget,c=f.Node,d=f.Lang,a="srcNode",b="contentBox";e.HTML_PARSER={};e._buildCfg={aggregates:["HTML_PARSER"]};e.ATTRS[a]={value:null,setter:c.one,getter:"_getSrcNode",writeOnce:true};f.mix(e.prototype,{_getSrcNode:function(g){return g||this.get(b);},_applyParsedConfig:function(i,g,h){return(h)?f.mix(g,h,false):g;},_applyParser:function(g){var i=this,j=i.get(a),h=i._getHtmlParser(),l,k;if(h&&j){f.Object.each(h,function(n,m,p){k=null;if(d.isFunction(n)){k=n.call(i,j);}else{if(d.isArray(n)){k=j.all(n[0]);if(k.isEmpty()){k=null;}}else{k=j.one(n);}}if(k!==null&&k!==undefined){l=l||{};l[m]=k;}});}g=i._applyParsedConfig(j,g,l);},_getHtmlParser:function(){var h=this._getClasses(),k={},g,j;for(g=h.length-1;g>=0;g--){j=h[g].HTML_PARSER;if(j){f.mix(k,j,true);}}return k;}});},"3.5.1",{requires:["widget-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-skin",function(e){var d="boundingBox",b="contentBox",a="skin",c=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(){var f=this.get(b)||this.get(d),h=new RegExp("\\b"+c(a)+"-(\\S+)"),g;if(f){f.ancestor(function(i){g=i.get("className").match(h);return g;});}return(g)?g[1]:null;};},"3.5.1",{requires:["widget-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-uievents",function(g){var f="boundingBox",e=g.Widget,d="render",a=g.Lang,c=":",b=g.Widget._uievts=g.Widget._uievts||{};g.mix(e.prototype,{_destroyUIEvents:function(){var h=g.stamp(this,true);g.each(b,function(j,i){if(j.instances[h]){delete j.instances[h];if(g.Object.isEmpty(j.instances)){j.handle.detach();if(b[i]){delete b[i];}}}});},UI_EVENTS:g.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(f);},_createUIEvent:function(i){var l=this._getUIEventNode(),h=(g.stamp(l)+i),k=b[h],j;if(!k){j=l.delegate(i,function(m){var n=e.getByNode(this);if(n){if(n._filterUIEvent(m)){n.fire(m.type,{domEvent:m});}}},"."+g.Widget.getClassName());b[h]=k={instances:{},handle:j};}k.instances[g.stamp(this)]=1;},_filterUIEvent:function(h){return(h.currentTarget.compareTo(h.container)||h.container.compareTo(this._getUIEventNode()));},_getUIEvent:function(j){if(a.isString(j)){var k=this.parseType(j)[1],h,i;if(k){h=k.indexOf(c);if(h>-1){k=k.substring(h+c.length);}if(this.UI_EVENTS[k]){i=k;}}return i;}},_initUIEvent:function(i){var j=this._getUIEvent(i),h=this._uiEvtsInitQueue||{};if(j&&!h[j]){this._uiEvtsInitQueue=h[j]=1;this.after(d,function(){this._createUIEvent(j);delete this._uiEvtsInitQueue[j];});}},on:function(h){this._initUIEvent(h);return e.superclass.on.apply(this,arguments);},publish:function(i,h){var j=this._getUIEvent(i);if(j&&h&&h.defaultFn){this._initUIEvent(j);}return e.superclass.publish.apply(this,arguments);}},true);},"3.5.1",{requires:["widget-base","node-event-delegate"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("base-build",function(g){var c=g.Base,a=g.Lang,b="initializer",e="destructor",f,d=function(j,i,h){if(h[j]){i[j]=(i[j]||[]).concat(h[j]);}};c._build=function(h,o,t,x,w,q){var y=c._build,j=y._ctor(o,q),m=y._cfg(o,q,t),v=y._mixCust,k=j._yuibuild.dynamic,p,n,u,z,s,r;for(p=0,n=t.length;p<n;p++){u=t[p];z=u.prototype;s=z[b];r=z[e];delete z[b];delete z[e];g.mix(j,u,true,null,1);v(j,u,m);if(s){z[b]=s;}if(r){z[e]=r;}j._yuibuild.exts.push(u);}if(x){g.mix(j.prototype,x,true);}if(w){g.mix(j,y._clean(w,m),true);v(j,w,m);}j.prototype.hasImpl=y._impl;if(k){j.NAME=h;j.prototype.constructor=j;}return j;};f=c._build;g.mix(f,{_mixCust:function(h,t,p){var o,j,q,k,m,n;if(p){o=p.aggregates;j=p.custom;q=p.statics;}if(q){g.mix(h,t,true,q);}if(o){for(n=0,m=o.length;n<m;n++){k=o[n];if(!h.hasOwnProperty(k)&&t.hasOwnProperty(k)){h[k]=a.isArray(t[k])?[]:{};}g.aggregate(h,t,true,[k]);}}if(j){for(n in j){if(j.hasOwnProperty(n)){j[n](n,h,t);}}}},_tmpl:function(h){function i(){i.superclass.constructor.apply(this,arguments);}g.extend(i,h);return i;},_impl:function(n){var q=this._getClasses(),p,k,h,o,r,m;for(p=0,k=q.length;p<k;p++){h=q[p];if(h._yuibuild){o=h._yuibuild.exts;r=o.length;for(m=0;m<r;m++){if(o[m]===n){return true;}}}}return false;},_ctor:function(h,i){var k=(i&&false===i.dynamic)?false:true,l=(k)?f._tmpl(h):h,j=l._yuibuild;if(!j){j=l._yuibuild={};}j.id=j.id||null;j.exts=j.exts||[];j.dynamic=k;return l;},_cfg:function(m,q,n){var k=[],p={},v=[],h,t=(q&&q.aggregates),u=(q&&q.custom),r=(q&&q.statics),s=m,o,j;while(s&&s.prototype){h=s._buildCfg;if(h){if(h.aggregates){k=k.concat(h.aggregates);}if(h.custom){g.mix(p,h.custom,true);}if(h.statics){v=v.concat(h.statics);}}s=s.superclass?s.superclass.constructor:null;}if(n){for(o=0,j=n.length;o<j;o++){s=n[o];h=s._buildCfg;if(h){if(h.aggregates){k=k.concat(h.aggregates);}if(h.custom){g.mix(p,h.custom,true);}if(h.statics){v=v.concat(h.statics);}}}}if(t){k=k.concat(t);}if(u){g.mix(p,q.cfgBuild,true);}if(r){v=v.concat(r);}return{aggregates:k,custom:p,statics:v};},_clean:function(q,j){var p,k,h,n=g.merge(q),o=j.aggregates,m=j.custom;for(p in m){if(n.hasOwnProperty(p)){delete n[p];}}for(k=0,h=o.length;k<h;k++){p=o[k];if(n.hasOwnProperty(p)){delete n[p];}}return n;}});c.build=function(j,h,k,i){return f(j,h,k,null,null,i);};c.create=function(h,k,j,i,l){return f(h,k,j,i,l);};c.mix=function(h,i){return f(null,h,i,null,null,{dynamic:false});};c._buildCfg={custom:{ATTRS:function(m,k,i){k.ATTRS=k.ATTRS||{};if(i.ATTRS){var j=i.ATTRS,l=k.ATTRS,h;for(h in j){if(j.hasOwnProperty(h)){l[h]=l[h]||{};g.mix(l[h],j[h],true);}}}},_NON_ATTRS_CFG:d},aggregates:["_PLUG","_UNPLUG"]};},"3.5.1",{requires:["base-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-stdmod",function(b){var f=b.Lang,q=b.Node,x=b.UA,e=b.Widget,d="",J="hd",G="bd",j="ft",D="header",M="body",K="footer",N="fillHeight",m="stdmod",u="Node",I="Content",C="firstChild",h="childNodes",n="ownerDocument",v="contentBox",z="height",F="offsetHeight",y="auto",l="headerContentChange",B="bodyContentChange",o="footerContentChange",r="fillHeightChange",t="heightChange",O="contentUpdate",w="renderUI",E="bindUI",g="syncUI",H="_applyParsedConfig",s=b.Widget.UI_SRC;function P(L){this._stdModNode=this.get(v);b.before(this._renderUIStdMod,this,w);b.before(this._bindUIStdMod,this,E);b.before(this._syncUIStdMod,this,g);}P.HEADER=D;P.BODY=M;P.FOOTER=K;P.AFTER="after";P.BEFORE="before";P.REPLACE="replace";var k=P.HEADER,A=P.BODY,p=P.FOOTER,a=k+I,c=p+I,i=A+I;P.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:P.BODY,validator:function(L){return this._validateFillHeight(L);}}};P.HTML_PARSER={headerContent:function(L){return this._parseStdModHTML(k);},bodyContent:function(L){return this._parseStdModHTML(A);},footerContent:function(L){return this._parseStdModHTML(p);}};P.SECTION_CLASS_NAMES={header:e.getClassName(J),body:e.getClassName(G),footer:e.getClassName(j)};P.TEMPLATES={header:'<div class="'+P.SECTION_CLASS_NAMES[k]+'"></div>',body:'<div class="'+P.SECTION_CLASS_NAMES[A]+'"></div>',footer:'<div class="'+P.SECTION_CLASS_NAMES[p]+'"></div>'};P.prototype={_syncUIStdMod:function(){var L=this._stdModParsed;if(!L||!L[a]){this._uiSetStdMod(k,this.get(a));}if(!L||!L[i]){this._uiSetStdMod(A,this.get(i));}if(!L||!L[c]){this._uiSetStdMod(p,this.get(c));}this._uiSetFillHeight(this.get(N));},_renderUIStdMod:function(){this._stdModNode.addClass(e.getClassName(m));this._renderStdModSections();this.after(l,this._afterHeaderChange);this.after(B,this._afterBodyChange);this.after(o,this._afterFooterChange);},_renderStdModSections:function(){if(f.isValue(this.get(a))){this._renderStdMod(k);}if(f.isValue(this.get(i))){this._renderStdMod(A);}if(f.isValue(this.get(c))){this._renderStdMod(p);}},_bindUIStdMod:function(){this.after(r,this._afterFillHeightChange);this.after(t,this._fillHeight);this.after(O,this._fillHeight);},_afterHeaderChange:function(L){if(L.src!==s){this._uiSetStdMod(k,L.newVal,L.stdModPosition);}},_afterBodyChange:function(L){if(L.src!==s){this._uiSetStdMod(A,L.newVal,L.stdModPosition);}},_afterFooterChange:function(L){if(L.src!==s){this._uiSetStdMod(p,L.newVal,L.stdModPosition);}},_afterFillHeightChange:function(L){this._uiSetFillHeight(L.newVal);},_validateFillHeight:function(L){return !L||L==P.BODY||L==P.HEADER||L==P.FOOTER;},_uiSetFillHeight:function(R){var Q=this.getStdModNode(R);var L=this._currFillNode;if(L&&Q!==L){L.setStyle(z,d);}if(Q){this._currFillNode=Q;}this._fillHeight();},_fillHeight:function(){if(this.get(N)){var L=this.get(z);if(L!=d&&L!=y){this.fillHeight(this._currFillNode);}}},_uiSetStdMod:function(S,R,L){if(f.isValue(R)){var Q=this.getStdModNode(S,true);this._addStdModContent(Q,R,L);this.set(S+I,this._getStdModContent(S),{src:s});}else{this._eraseStdMod(S);}this.fire(O);},_renderStdMod:function(R){var L=this.get(v),Q=this._findStdModSection(R);if(!Q){Q=this._getStdModTemplate(R);}this._insertStdModSection(L,R,Q);this[R+u]=Q;return this[R+u];},_eraseStdMod:function(Q){var L=this.getStdModNode(Q);if(L){L.remove(true);delete this[Q+u];}},_insertStdModSection:function(L,S,R){var Q=L.get(C);if(S===p||!Q){L.appendChild(R);}else{if(S===k){L.insertBefore(R,Q);}else{var T=this[p+u];if(T){L.insertBefore(R,T);}else{L.appendChild(R);}}}},_getStdModTemplate:function(L){return q.create(P.TEMPLATES[L],this._stdModNode.get(n));},_addStdModContent:function(R,Q,L){switch(L){case P.BEFORE:L=0;break;case P.AFTER:L=undefined;break;default:L=P.REPLACE;}R.insert(Q,L);},_getPreciseHeight:function(R){var L=(R)?R.get(F):0,S="getBoundingClientRect";if(R&&R.hasMethod(S)){var Q=R.invoke(S);if(Q){L=Q.bottom-Q.top;}}return L;},_findStdModSection:function(L){return this.get(v).one("> ."+P.SECTION_CLASS_NAMES[L]);},_parseStdModHTML:function(Q){var L=this._findStdModSection(Q);if(L){if(!this._stdModParsed){this._stdModParsed={};b.before(this._applyStdModParsedConfig,this,H);}this._stdModParsed[Q+I]=1;return L.get("innerHTML");}return null;},_applyStdModParsedConfig:function(S,L,R){var Q=this._stdModParsed;if(Q){Q[a]=!(a in L)&&(a in Q);Q[i]=!(i in L)&&(i in Q);Q[c]=!(c in L)&&(c in Q);}},_getStdModContent:function(L){return(this[L+u])?this[L+u].get(h):null;},setStdModContent:function(R,Q,L){this.set(R+I,Q,{stdModPosition:L});},getStdModNode:function(R,Q){var L=this[R+u]||null;if(!L&&Q){L=this._renderStdMod(R);}return L;},fillHeight:function(Q){if(Q){var V=this.get(v),W=[this.headerNode,this.bodyNode,this.footerNode],L,X,Y=0,T=0,S=false;for(var U=0,R=W.length;U<R;U++){L=W[U];if(L){if(L!==Q){Y+=this._getPreciseHeight(L);}else{S=true;}}}if(S){if(x.ie||x.opera){Q.set(F,0);}X=V.get(F)-parseInt(V.getComputedStyle("paddingTop"),10)-parseInt(V.getComputedStyle("paddingBottom"),10)-parseInt(V.getComputedStyle("borderBottomWidth"),10)-parseInt(V.getComputedStyle("borderTopWidth"),10);if(f.isNumber(X)){T=X-Y;if(T>=0){Q.set(F,T);}}}}}};b.WidgetStdMod=P;},"3.5.1",{requires:["base-build","widget"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position",function(a){var i=a.Lang,l=a.Widget,n="xy",j="position",g="positioned",k="boundingBox",h="relative",m="renderUI",f="bindUI",d="syncUI",c=l.UI_SRC,e="xyChange";function b(o){this._posNode=this.get(k);a.after(this._renderUIPosition,this,m);a.after(this._syncUIPosition,this,d);a.after(this._bindUIPosition,this,f);}b.ATTRS={x:{setter:function(o){this._setX(o);},getter:function(){return this._getX();},lazyAdd:false},y:{setter:function(o){this._setY(o);},getter:function(){return this._getY();},lazyAdd:false},xy:{value:[0,0],validator:function(o){return this._validateXY(o);}}};b.POSITIONED_CLASS_NAME=l.getClassName(g);b.prototype={_renderUIPosition:function(){this._posNode.addClass(b.POSITIONED_CLASS_NAME);},_syncUIPosition:function(){var o=this._posNode;if(o.getStyle(j)===h){this.syncXY();}this._uiSetXY(this.get(n));},_bindUIPosition:function(){this.after(e,this._afterXYChange);},move:function(){var o=arguments,p=(i.isArray(o[0]))?o[0]:[o[0],o[1]];this.set(n,p);},syncXY:function(){this.set(n,this._posNode.getXY(),{src:c});},_validateXY:function(o){return(i.isArray(o)&&i.isNumber(o[0])&&i.isNumber(o[1]));},_setX:function(o){this.set(n,[o,this.get(n)[1]]);},_setY:function(o){this.set(n,[this.get(n)[0],o]);},_getX:function(){return this.get(n)[0];},_getY:function(){return this.get(n)[1];},_afterXYChange:function(o){if(o.src!=c){this._uiSetXY(o.newVal);}},_uiSetXY:function(o){this._posNode.setXY(o);}};a.WidgetPosition=b;},"3.5.1",{requires:["base-build","node-screen","widget"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position-align",function(a){var f=a.Lang,d="align",b="alignOn",g="visible",i="boundingBox",e="offsetWidth",j="offsetHeight",h="region",k="viewportRegion";function c(l){if(!this._posNode){a.error("WidgetPosition needs to be added to the Widget, "+"before WidgetPositionAlign is added");}a.after(this._bindUIPosAlign,this,"bindUI");a.after(this._syncUIPosAlign,this,"syncUI");}c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:false,value:false},alignOn:{value:[],validator:a.Lang.isArray}};c.TL="tl";c.TR="tr";c.BL="bl";c.BR="br";c.TC="tc";c.RC="rc";c.BC="bc";c.LC="lc";c.CC="cc";c.prototype={_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles();},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange);this.after("alignOnChange",this._afterAlignOnChange);this.after("visibleChange",this._syncUIPosAlign);},_syncUIPosAlign:function(){var l=this.get(d);this._uiSetVisiblePosAlign(this.get(g));if(l){this._uiSetAlign(l.node,l.points);}},align:function(m,l){if(arguments.length){this.set(d,{node:m,points:l});}else{this._syncUIPosAlign();}return this;},centered:function(l){return this.align(l,[c.CC,c.CC]);},_setAlignCenter:function(l){if(l){this.set(d,{node:l===true?null:l,points:[c.CC,c.CC]});}return l;},_uiSetAlign:function(o,n){if(!f.isArray(n)||n.length!==2){a.error("align: Invalid Points Arguments");return;}var m=this._getRegion(o),l,p,q;if(!m){return;}l=n[0];p=n[1];switch(p){case c.TL:q=[m.left,m.top];break;case c.TR:q=[m.right,m.top];break;case c.BL:q=[m.left,m.bottom];break;case c.BR:q=[m.right,m.bottom];break;case c.TC:q=[m.left+Math.floor(m.width/2),m.top];break;case c.BC:q=[m.left+Math.floor(m.width/2),m.bottom];break;case c.LC:q=[m.left,m.top+Math.floor(m.height/2)];break;case c.RC:q=[m.right,m.top+Math.floor(m.height/2)];break;case c.CC:q=[m.left+Math.floor(m.width/2),m.top+Math.floor(m.height/2)];break;default:break;}if(q){this._doAlign(l,q[0],q[1]);}},_uiSetVisiblePosAlign:function(l){if(l){this._attachPosAlignUIHandles();}else{this._detachPosAlignUIHandles();}},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles){return;}var n=this.get(i),m=a.bind(this._syncUIPosAlign,this),l=[];a.Array.each(this.get(b),function(r){var q=r.eventName,p=a.one(r.node)||n;if(q){l.push(p.on(q,m));}});this._posAlignUIHandles=l;},_detachPosAlignUIHandles:function(){var l=this._posAlignUIHandles;if(l){new a.EventHandle(l).detach();this._posAlignUIHandles=null;}},_doAlign:function(m,l,p){var o=this._posNode,n;switch(m){case c.TL:n=[l,p];break;case c.TR:n=[l-o.get(e),p];break;case c.BL:n=[l,p-o.get(j)];break;case c.BR:n=[l-o.get(e),p-o.get(j)];break;case c.TC:n=[l-(o.get(e)/2),p];break;case c.BC:n=[l-(o.get(e)/2),p-o.get(j)];break;case c.LC:n=[l,p-(o.get(j)/2)];break;case c.RC:n=[l-o.get(e),p-(o.get(j)/2)];break;case c.CC:n=[l-(o.get(e)/2),p-(o.get(j)/2)];break;default:break;}if(n){this.move(n);}},_getRegion:function(m){var l;if(!m){l=this._posNode.get(k);}else{m=a.Node.one(m);if(m){l=m.get(h);}}return l;},_afterAlignChange:function(l){var m=l.newVal;if(m){this._uiSetAlign(m.node,m.points);}},_afterAlignOnChange:function(l){this._detachPosAlignUIHandles();if(this.get(g)){this._attachPosAlignUIHandles();}}};a.WidgetPositionAlign=c;},"3.5.1",{requires:["widget-position"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-stack",function(e){var m=e.Lang,s=e.UA,B=e.Node,f=e.Widget,A="zIndex",o="shim",y="visible",C="boundingBox",v="renderUI",g="bindUI",r="syncUI",p="offsetWidth",d="offsetHeight",l="parentNode",a="firstChild",w="ownerDocument",h="width",u="height",k="px",n="shimdeferred",D="shimresize",x="visibleChange",c="widthChange",j="heightChange",z="shimChange",b="zIndexChange",i="contentUpdate",q="stacked";function t(E){this._stackNode=this.get(C);this._stackHandles={};e.after(this._renderUIStack,this,v);e.after(this._syncUIStack,this,r);e.after(this._bindUIStack,this,g);}t.ATTRS={shim:{value:(s.ie==6)},zIndex:{value:0,setter:"_setZIndex"}};t.HTML_PARSER={zIndex:function(E){return this._parseZIndex(E);}};t.SHIM_CLASS_NAME=f.getClassName(o);t.STACKED_CLASS_NAME=f.getClassName(q);t.SHIM_TEMPLATE='<iframe class="'+t.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>';t.prototype={_syncUIStack:function(){this._uiSetShim(this.get(o));this._uiSetZIndex(this.get(A));},_bindUIStack:function(){this.after(z,this._afterShimChange);this.after(b,this._afterZIndexChange);},_renderUIStack:function(){this._stackNode.addClass(t.STACKED_CLASS_NAME);},_parseZIndex:function(E){var F;if(!E.inDoc()||E.getStyle("position")==="static"){F="auto";}else{F=E.getComputedStyle("zIndex");}return F==="auto"?null:F;},_setZIndex:function(E){if(m.isString(E)){E=parseInt(E,10);}if(!m.isNumber(E)){E=0;}return E;},_afterShimChange:function(E){this._uiSetShim(E.newVal);},_afterZIndexChange:function(E){this._uiSetZIndex(E.newVal);},_uiSetZIndex:function(E){this._stackNode.setStyle(A,E);},_uiSetShim:function(E){if(E){if(this.get(y)){this._renderShim();}else{this._renderShimDeferred();}if(s.ie==6){this._addShimResizeHandlers();}}else{this._destroyShim();}},_renderShimDeferred:function(){this._stackHandles[n]=this._stackHandles[n]||[];var F=this._stackHandles[n],E=function(G){if(G.newVal){this._renderShim();}};F.push(this.on(x,E));},_addShimResizeHandlers:function(){this._stackHandles[D]=this._stackHandles[D]||[];var F=this.sizeShim,E=this._stackHandles[D];E.push(this.after(x,F));E.push(this.after(c,F));E.push(this.after(j,F));E.push(this.after(i,F));},_detachStackHandles:function(E){var F=this._stackHandles[E],G;if(F&&F.length>0){while((G=F.pop())){G.detach();}}},_renderShim:function(){var E=this._shimNode,F=this._stackNode;if(!E){E=this._shimNode=this._getShimTemplate();F.insertBefore(E,F.get(a));this._detachStackHandles(n);this.sizeShim();}},_destroyShim:function(){if(this._shimNode){this._shimNode.get(l).removeChild(this._shimNode);this._shimNode=null;this._detachStackHandles(n);this._detachStackHandles(D);}},sizeShim:function(){var F=this._shimNode,E=this._stackNode;if(F&&s.ie===6&&this.get(y)){F.setStyle(h,E.get(p)+k);F.setStyle(u,E.get(d)+k);}},_getShimTemplate:function(){return B.create(t.SHIM_TEMPLATE,this._stackNode.get(w));}};e.WidgetStack=t;},"3.5.1",{requires:["base-build","widget"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("widget-position-constrain",function(c){var f="constrain",d="constrain|xyChange",b="constrainChange",n="preventOverlap",e="align",o="",g="bindUI",i="xy",a="x",m="y",j=c.Node,p="viewportRegion",l="region",k;function h(q){if(!this._posNode){c.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added");}c.after(this._bindUIPosConstrained,this,g);}h.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:false}};k=h._PREVENT_OVERLAP={x:{"tltr":1,"blbr":1,"brbl":1,"trtl":1},y:{"trbr":1,"tlbl":1,"bltl":1,"brtr":1}};h.prototype={getConstrainedXY:function(t,s){s=s||this.get(f);var r=this._getRegion((s===true)?null:s),q=this._posNode.get(l);return[this._constrain(t[0],a,q,r),this._constrain(t[1],m,q,r)];},constrain:function(u,r){var t,q,s=r||this.get(f);if(s){t=u||this.get(i);q=this.getConstrainedXY(t,s);if(q[0]!==t[0]||q[1]!==t[1]){this.set(i,q,{constrained:true});}}},_setConstrain:function(q){return(q===true)?q:j.one(q);},_constrain:function(q,r,z,s){if(s){if(this.get(n)){q=this._preventOverlap(q,r,z,s);}var v=(r==a),y=(v)?s.width:s.height,u=(v)?z.width:z.height,t=(v)?s.left:s.top,w=(v)?s.right-u:s.bottom-u;if(q<t||q>w){if(u<y){if(q<t){q=t;}else{if(q>w){q=w;}}}else{q=t;}}}return q;},_preventOverlap:function(r,s,C,t){var w=this.get(e),B=(s===a),z,v,u,y,A,q;if(w&&w.points&&k[s][w.points.join(o)]){v=this._getRegion(w.node);if(v){z=(B)?C.width:C.height;u=(B)?v.left:v.top;y=(B)?v.right:v.bottom;A=(B)?v.left-t.left:v.top-t.top;q=(B)?t.right-v.right:t.bottom-v.bottom;}if(r>u){if(q<z&&A>z){r=u-z;}}else{if(A<z&&q>z){r=y;}}}return r;},_bindUIPosConstrained:function(){this.after(b,this._afterConstrainChange);this._enableConstraints(this.get(f));},_afterConstrainChange:function(q){this._enableConstraints(q.newVal);},_enableConstraints:function(q){if(q){this.constrain();this._cxyHandle=this._cxyHandle||this.on(d,this._constrainOnXYChange);}else{if(this._cxyHandle){this._cxyHandle.detach();this._cxyHandle=null;}}},_constrainOnXYChange:function(q){if(!q.constrained){q.newVal=this.getConstrainedXY(q.newVal);}},_getRegion:function(q){var r;if(!q){r=this._posNode.get(p);}else{q=j.one(q);if(q){r=q.get(l);}}return r;}};c.WidgetPositionConstrain=h;},"3.5.1",{requires:["widget-position"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("overlay",function(a){a.Overlay=a.Base.create("overlay",a.Widget,[a.WidgetStdMod,a.WidgetPosition,a.WidgetStack,a.WidgetPositionAlign,a.WidgetPositionConstrain]);},"3.5.1",{requires:["widget","widget-stdmod","widget-position","widget-stack","widget-position-align","widget-position-constrain"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-base",function(b){var c="running",n="startTime",l="elapsedTime",j="start",i="tween",m="end",d="node",k="paused",o="reverse",h="iterationCount",a=Number;var f={},e;b.Anim=function(){b.Anim.superclass.constructor.apply(this,arguments);b.Anim._instances[b.stamp(this)]=this;};b.Anim.NAME="anim";b.Anim._instances={};b.Anim.RE_DEFAULT_UNIT=/^width|height|top|right|bottom|left|margin.*|padding.*|border.*$/i;b.Anim.DEFAULT_UNIT="px";b.Anim.DEFAULT_EASING=function(q,p,s,r){return s*q/r+p;};b.Anim._intervalTime=20;b.Anim.behaviors={left:{get:function(q,p){return q._getOffset(p);}}};b.Anim.behaviors.top=b.Anim.behaviors.left;b.Anim.DEFAULT_SETTER=function(t,u,w,x,z,s,v,y){var q=t._node,r=q._node,p=v(z,a(w),a(x)-a(w),s);if(r&&(r.style||r.attributes)){if(u in r.style||u in b.DOM.CUSTOM_STYLES){y=y||"";q.setStyle(u,p+y);}else{if(r.attributes[u]){q.setAttribute(u,p);}}}else{if(q.set){q.set(u,p);}}};b.Anim.DEFAULT_GETTER=function(s,p){var r=s._node,q=r._node,t="";if(q&&(q.style||q.attributes)){if(p in q.style||p in b.DOM.CUSTOM_STYLES){t=r.getComputedStyle(p);}else{if(q.attributes[p]){t=r.getAttribute(p);}}}else{if(r.get){t=r.get(p);}}return t;};b.Anim.ATTRS={node:{setter:function(p){if(p){if(typeof p=="string"||p.nodeType){p=b.one(p);}}this._node=p;if(!p){}return p;}},duration:{value:1},easing:{value:b.Anim.DEFAULT_EASING,setter:function(p){if(typeof p==="string"&&b.Easing){return b.Easing[p];}}},from:{},to:{},startTime:{value:0,readOnly:true},elapsedTime:{value:0,readOnly:true},running:{getter:function(){return !!f[b.stamp(this)];},value:false,readOnly:true},iterations:{value:1},iterationCount:{value:0,readOnly:true},direction:{value:"normal"},paused:{readOnly:true,value:false},reverse:{value:false}};b.Anim.run=function(){var q=b.Anim._instances;for(var p in q){if(q[p].run){q[p].run();}}};b.Anim.pause=function(){for(var p in f){if(f[p].pause){f[p].pause();}}b.Anim._stopTimer();};b.Anim.stop=function(){for(var p in f){if(f[p].stop){f[p].stop();}}b.Anim._stopTimer();};b.Anim._startTimer=function(){if(!e){e=setInterval(b.Anim._runFrame,b.Anim._intervalTime);}};b.Anim._stopTimer=function(){clearInterval(e);e=0;};b.Anim._runFrame=function(){var p=true;for(var q in f){if(f[q]._runFrame){p=false;f[q]._runFrame();}}if(p){b.Anim._stopTimer();}};b.Anim.RE_UNITS=/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/;var g={run:function(){if(this.get(k)){this._resume();}else{if(!this.get(c)){this._start();}}return this;},pause:function(){if(this.get(c)){this._pause();}return this;},stop:function(p){if(this.get(c)||this.get(k)){this._end(p);}return this;},_added:false,_start:function(){this._set(n,new Date()-this.get(l));this._actualFrames=0;if(!this.get(k)){this._initAnimAttr();}f[b.stamp(this)]=this;b.Anim._startTimer();this.fire(j);},_pause:function(){this._set(n,null);this._set(k,true);delete f[b.stamp(this)];this.fire("pause");},_resume:function(){this._set(k,false);f[b.stamp(this)]=this;this._set(n,new Date()-this.get(l));b.Anim._startTimer();this.fire("resume");},_end:function(p){var q=this.get("duration")*1000;if(p){this._runAttrs(q,q,this.get(o));}this._set(n,null);this._set(l,0);this._set(k,false);delete f[b.stamp(this)];this.fire(m,{elapsed:this.get(l)});},_runFrame:function(){var u=this._runtimeAttr.duration,r=new Date()-this.get(n),q=this.get(o),p=(r>=u),s,v;this._runAttrs(r,u,q);this._actualFrames+=1;this._set(l,r);this.fire(i);if(p){this._lastFrame();}},_runAttrs:function(A,z,w){var x=this._runtimeAttr,r=b.Anim.behaviors,y=x.easing,p=z,u=false,q,s,v;if(A>=z){u=true;}if(w){A=z-A;p=0;}for(v in x){if(x[v].to){q=x[v];s=(v in r&&"set" in r[v])?r[v].set:b.Anim.DEFAULT_SETTER;if(!u){s(this,v,q.from,q.to,A,z,y,q.unit);}else{s(this,v,q.from,q.to,p,z,y,q.unit);}}}},_lastFrame:function(){var p=this.get("iterations"),q=this.get(h);q+=1;if(p==="infinite"||q<p){if(this.get("direction")==="alternate"){this.set(o,!this.get(o));}this.fire("iteration");}else{q=0;this._end();}this._set(n,new Date());this._set(h,q);},_initAnimAttr:function(){var w=this.get("from")||{},v=this.get("to")||{},p={duration:this.get("duration")*1000,easing:this.get("easing")},r=b.Anim.behaviors,u=this.get(d),t,s,q;b.each(v,function(A,y){if(typeof A==="function"){A=A.call(this,u);}s=w[y];if(s===undefined){s=(y in r&&"get" in r[y])?r[y].get(this,y):b.Anim.DEFAULT_GETTER(this,y);}else{if(typeof s==="function"){s=s.call(this,u);}}var x=b.Anim.RE_UNITS.exec(s);var z=b.Anim.RE_UNITS.exec(A);s=x?x[1]:s;q=z?z[1]:A;t=z?z[2]:x?x[2]:"";if(!t&&b.Anim.RE_DEFAULT_UNIT.test(y)){t=b.Anim.DEFAULT_UNIT;}if(!s||!q){b.error('invalid "from" or "to" for "'+y+'"',"Anim");return;}p[y]={from:s,to:q,unit:t};},this);this._runtimeAttr=p;},_getOffset:function(q){var s=this._node,t=s.getComputedStyle(q),r=(q==="left")?"getX":"getY",u=(q==="left")?"setX":"setY";if(t==="auto"){var p=s.getStyle("position");if(p==="absolute"||p==="fixed"){t=s[r]();s[u](t);}else{t=0;}}return t;},destructor:function(){delete b.Anim._instances[b.stamp(this)];}};b.extend(b.Anim,b.Base,g);},"3.5.1",{requires:["base-base","node-style"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-easing",function(b){var a={easeNone:function(f,e,h,g){return h*f/g+e;},easeIn:function(f,e,h,g){return h*(f/=g)*f+e;},easeOut:function(f,e,h,g){return -h*(f/=g)*(f-2)+e;},easeBoth:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f+e;}return -h/2*((--f)*(f-2)-1)+e;},easeInStrong:function(f,e,h,g){return h*(f/=g)*f*f*f+e;},easeOutStrong:function(f,e,h,g){return -h*((f=f/g-1)*f*f*f-1)+e;},easeBothStrong:function(f,e,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+e;}return -h/2*((f-=2)*f*f*f-2)+e;},elasticIn:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return -(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;},elasticOut:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j)===1){return e+k;}if(!i){i=j*0.3;}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}return f*Math.pow(2,-10*g)*Math.sin((g*j-h)*(2*Math.PI)/i)+k+e;},elasticBoth:function(g,e,k,j,f,i){var h;if(g===0){return e;}if((g/=j/2)===2){return e+k;}if(!i){i=j*(0.3*1.5);}if(!f||f<Math.abs(k)){f=k;h=i/4;}else{h=i/(2*Math.PI)*Math.asin(k/f);}if(g<1){return -0.5*(f*Math.pow(2,10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i))+e;}return f*Math.pow(2,-10*(g-=1))*Math.sin((g*j-h)*(2*Math.PI)/i)*0.5+k+e;},backIn:function(f,e,i,h,g){if(g===undefined){g=1.70158;}if(f===h){f-=0.001;}return i*(f/=h)*f*((g+1)*f-g)+e;},backOut:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}return i*((f=f/h-1)*f*((g+1)*f+g)+1)+e;},backBoth:function(f,e,i,h,g){if(typeof g==="undefined"){g=1.70158;}if((f/=h/2)<1){return i/2*(f*f*(((g*=(1.525))+1)*f-g))+e;}return i/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+e;},bounceIn:function(f,e,h,g){return h-b.Easing.bounceOut(g-f,0,h,g)+e;},bounceOut:function(f,e,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+e;}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+e;}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+e;}}}return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+e;},bounceBoth:function(f,e,h,g){if(f<g/2){return b.Easing.bounceIn(f*2,0,h,g)*0.5+e;}return b.Easing.bounceOut(f*2-g,0,h,g)*0.5+h*0.5+e;}};b.Easing=a;},"3.5.1",{requires:["anim-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("cookie",function(c){var k=c.Lang,i=c.Object,g=null,d=k.isString,n=k.isObject,f=k.isUndefined,e=k.isFunction,h=encodeURIComponent,b=decodeURIComponent,m=c.config.doc;function j(o){throw new TypeError(o);}function l(o){if(!d(o)||o===""){j("Cookie name must be a non-empty string.");}}function a(o){if(!d(o)||o===""){j("Subcookie name must be a non-empty string.");}}c.Cookie={_createCookieString:function(q,t,r,p){p=p||{};var v=h(q)+"="+(r?h(t):t),o=p.expires,u=p.path,s=p.domain;if(n(p)){if(o instanceof Date){v+="; expires="+o.toUTCString();}if(d(u)&&u!==""){v+="; path="+u;}if(d(s)&&s!==""){v+="; domain="+s;}if(p.secure===true){v+="; secure";}}return v;},_createCookieHashString:function(o){if(!n(o)){j("Cookie._createCookieHashString(): Argument must be an object.");}var p=[];i.each(o,function(r,q){if(!e(r)&&!f(r)){p.push(h(q)+"="+h(String(r)));}});return p.join("&");},_parseCookieHash:function(s){var r=s.split("&"),t=g,q={};if(s.length){for(var p=0,o=r.length;p<o;p++){t=r[p].split("=");q[b(t[0])]=b(t[1]);}}return q;},_parseCookieString:function(w,y){var x={};if(d(w)&&w.length>0){var o=(y===false?function(z){return z;}:b),u=w.split(/;\s/g),v=g,p=g,r=g;for(var q=0,s=u.length;q<s;q++){r=u[q].match(/([^=]+)=/i);if(r instanceof Array){try{v=b(r[1]);p=o(u[q].substring(r[1].length+1));}catch(t){}}else{v=b(u[q]);p="";}x[v]=p;}}return x;},_setDoc:function(o){m=o;},exists:function(o){l(o);var p=this._parseCookieString(m.cookie,true);return p.hasOwnProperty(o);},get:function(p,o){l(p);var s,q,r;if(e(o)){r=o;o={};}else{if(n(o)){r=o.converter;}else{o={};}}s=this._parseCookieString(m.cookie,!o.raw);q=s[p];if(f(q)){return g;}if(!e(r)){return q;}else{return r(q);}},getSub:function(o,q,p){var r=this.getSubs(o);if(r!==g){a(q);if(f(r[q])){return g;}if(!e(p)){return r[q];}else{return p(r[q]);}}else{return g;}},getSubs:function(o){l(o);var p=this._parseCookieString(m.cookie,false);if(d(p[o])){return this._parseCookieHash(p[o]);}return g;},remove:function(p,o){l(p);o=c.merge(o||{},{expires:new Date(0)});return this.set(p,"",o);},removeSub:function(p,s,o){l(p);a(s);o=o||{};var r=this.getSubs(p);if(n(r)&&r.hasOwnProperty(s)){delete r[s];if(!o.removeIfEmpty){return this.setSubs(p,r,o);}else{for(var q in r){if(r.hasOwnProperty(q)&&!e(r[q])&&!f(r[q])){return this.setSubs(p,r,o);}}return this.remove(p,o);}}else{return"";}},set:function(p,q,o){l(p);if(f(q)){j("Cookie.set(): Value cannot be undefined.");}o=o||{};var r=this._createCookieString(p,q,!o.raw,o);m.cookie=r;return r;},setSub:function(p,r,q,o){l(p);a(r);if(f(q)){j("Cookie.setSub(): Subcookie value cannot be undefined.");}var s=this.getSubs(p);if(!n(s)){s={};}s[r]=q;return this.setSubs(p,s,o);},setSubs:function(p,q,o){l(p);if(!n(q)){j("Cookie.setSubs(): Cookie value must be an object.");}var r=this._createCookieString(p,this._createCookieHashString(q),false,o);m.cookie=r;return r;}};},"3.5.1",{requires:["yui-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("intl",function(d){var b={},a="yuiRootLang",e="yuiActiveLang",c=[];d.mix(d.namespace("Intl"),{_mod:function(f){if(!b[f]){b[f]={};}return b[f];},setLang:function(g,j){var i=this._mod(g),f=i[e],h=!!i[j];if(h&&j!==f){i[e]=j;this.fire("intl:langChange",{module:g,prevVal:f,newVal:(j===a)?"":j});}return h;},getLang:function(f){var g=this._mod(f)[e];return(g===a)?"":g;},add:function(g,h,f){h=h||a;this._mod(g)[h]=f;this.setLang(g,h);},get:function(h,g,j){var f=this._mod(h),i;j=j||f[e];i=f[j]||{};return(g)?i[g]:d.merge(i);},getAvailableLangs:function(h){var f=d.Env._loader,g=f&&f.moduleInfo[h],i=g&&g.lang;return(i)?i.concat():c;}});d.augment(d.Intl,d.EventTarget);d.Intl.publish("intl:langChange",{emitFacade:true});},"3.5.1",{requires:["event-custom","intl-base"]});
if(typeof YAHOO==='undefined'){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="http://geo.yahoo.com/t";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
YAHOO.ULT.SRC_SPACEID_KEY='_S';YAHOO.ULT.DEST_SPACEID_KEY='_s';YAHOO.ULT.YLC_LIBSRC=2;YAHOO.ULT.CTRL_C='\x03';YAHOO.ULT.CTRL_D='\x04';YAHOO.ULT.BASE64_STR="ABCDEFGHIJKLMNOP"+"QRSTUVWXYZabcdef"+"ghijklmnopqrstuv"+"wxyz0123456789._-";(function(){YAHOO.ULT.track_click=function(u,p){if(!u||!p){return u;}
p._r=YAHOO.ULT.YLC_LIBSRC;var ks=[],i=0,k;for(k in p){var v=p[k];if(typeof(v)!=='string'){v=String(v);p[k]=v;}
if(k.length<1){return u;}
if(k.length>8){return u;}
if(k.indexOf(' ')!==-1){return u;}
if(YAHOO.ULT.has_ctrl_char(k)||YAHOO.ULT.has_ctrl_char(v)){return u;}
ks[i++]=k;}
ks=ks.sort();var f=[];for(i=0;i<ks.length;i++){f[i]=ks[i]+YAHOO.ULT.CTRL_C+p[ks[i]];}
f=f.join(YAHOO.ULT.CTRL_D);if(f.length<1||f.length>1024){return u;}
f=';_ylc='+YAHOO.ULT.encode64(f);i=u.indexOf('/*');if(i===-1){i=u.indexOf('/?');}
if(i===-1){i=u.indexOf('?');}
if(i===-1){return u+f;}else{return u.substr(0,i)+f+u.substr(i);}};YAHOO.ULT.beacon_click=function(p,i){if(!i){i=YAHOO.ULT.IMG;}
if(p){var url=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,p);url+='?t='+Math.random();i.src=url;}
return true;};YAHOO.ULT.click_beacon=function(e,d,i){var el=e.target||e.srcElement;if(!i){i=YAHOO.ULT.IMG;}
if(d){var src=YAHOO.ULT.track_click(YAHOO.ULT.BEACON,d);src+='?t='+Math.random();var u=el.getAttribute('href',2);i.onerror=i.onload=function(){location=u;};YAHOO.util.Event.preventDefault(el);i.src=src;}};YAHOO.ULT.has_ctrl_char=function(s){var i=0;for(;i<s.length;i++){if(s.charCodeAt(i)<0x20){return true;}}
return false;};YAHOO.ULT.encode64=function(input){var output="";var chr1,chr2,chr3="";var enc1,enc2,enc3,enc4="";var i=0;do{chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1&3)<<4)|(chr2>>4);enc3=((chr2&15)<<2)|(chr3>>6);enc4=chr3&63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}
output=output+
YAHOO.ULT.BASE64_STR.charAt(enc1)+
YAHOO.ULT.BASE64_STR.charAt(enc2)+
YAHOO.ULT.BASE64_STR.charAt(enc3)+
YAHOO.ULT.BASE64_STR.charAt(enc4);chr1=chr2=chr3="";enc1=enc2=enc3=enc4="";}while(i<input.length);return output;};}());
/* scbase.js 912859; scconf.js 873792; scflist.js 912859; sclogin.js 912859; scpromo.js 888166 */ YUI.add("media-scconf",function(b){function a(d){var c={APP_ID:{value:""},fbuid:{value:""},fbexpires:{value:""},enable_code_exchange:{value:""},yahoo_id:{value:""},signin_url:{value:""},signed_idp:{value:""},csrcpvid:{value:""},ult_beacon:{value:""},ult_redirect:{value:""},sc_crumb:{value:""},optin_status:{value:""},tid:{value:""},reminder:{value:""},noexperience:{value:""},initact:{value:""},rf:{value:""},region:{value:""},page_type:{value:""},enable_ywa:{value:""},project_id:{value:""},lang:{value:""},intl:{value:""},bucket_code:{value:""},is_init_fb:{value:0},enable_play_posting:{value:""},enable_socialchrome:{value:""},consent_max_remind:{value:""},consent_remind_frequency:{value:""},consent_status:{value:""},timestamp:{value:""},general_title_length:{value:""},rating_title_length:{value:""},video_title_length:{value:""},desc_length:{value:""},show_promo:{value:""},WATCH_CONSENT:{value:{}},ALL_CONSENT:{value:{}},CONF:{value:{}},PAGE_META:{value:{}},XHR:{value:{}},SWITCHES:{value:{}},FRIEND_LIST:{value:{}},FBME:{value:{}}};this.addAttrs(c,d)}if(typeof b.Media=="undefined"){b.Media={}}if(typeof b.Media.SocialChrome=="undefined"){b.Media.SocialChrome={}}b.Media.SocialChrome.Conf=a;b.augment(b.Media.SocialChrome.Conf,b.Attribute)},"1.0",{requires:["base","node","event","attribute"]});YUI.add("media-scbase",function(d){var a=d.config.win,c=d.Lang;function b(g){this.l10n=d.Intl.get("media-socialchrome-strings");this._data={};var f={};for(var e in arguments[0]){f[e]={value:arguments[0][e]}}this._data=d.merge(this.constructor.superclass.constructor.ATTRS,this.constructor.ATTRS,f);this._data.contentBox=this._data.srcNode;this.initializer_base();this.initializer()}b.NAME="Base";b.ATTRS={moduleConf:{value:null}};b.prototype={pagedata:"",unames:{},rollup_ids:{},initializer:function(){},initializer_base:function(){this.CONF=this.get("moduleConf")?this.get("moduleConf"):YAHOO.Media.Facebook.ModuleConf;if(this.CONF.get("enable_code_exchange")==1){this.cname="yfbs_"+this.CONF.get("APP_ID")}else{this.cname="fbs_"+this.CONF.get("APP_ID")}this.page_load_time=Math.round(new Date().getTime()/1000);this.mod_login=d.one(".yom-socialchrome-login");this.mod_friends=d.one(".socialchrome-grid");this.activateFB();var e=this.constructor.superclass;if(typeof e._hide_events==="undefined"){e._hide_events={};d.one(document.body).on("click",function(g){for(var f in e._hide_events){e._hide_events[f][0].apply(e._hide_events[f][1],arguments)}},this,true)}this.pagedata=YAHOO.Media.Facebook.ModuleConf.get("PAGE_META")},activateFB:function(){if(!this.CONF.get("is_init_fb")){this.CONF.set("is_init_fb",1)}else{return}var m=this,g=10000,l=false,k=false,h="",e=false;YAHOO.Media.Facebook.Session={};if(!d.one("#fb-root")){var f=d.Node.create('<div id="fb-root"></div>');d.one(document.body).prepend(f)}if(typeof FB==="undefined"){return}if((typeof YAHOO.Media.Facebook.init==="object")&&(typeof YAHOO.Media.Facebook._initialized==="undefined")){FB.init(YAHOO.Media.Facebook.init);YAHOO.Media.Facebook._initialized=true}FB.Event.subscribe("auth.authResponseChange",function(n){if(n.status=="unknown"){YAHOO.Media.Facebook.Session=undefined}else{YAHOO.Media.Facebook.Session=n}});FB.Event.subscribe("auth.login",function(n){YAHOO.Media.Facebook.Session=n;l=true;m.CONF.set("fbuid",n.authResponse.userID);if(m.CONF.get("enable_code_exchange")!=1){m.setFBCookie(n);d.fire("scbase:fb_auth_login",{response:n})}else{m.refreshFBCookie("scbase:fb_auth_login",{response:n})}});FB.Event.subscribe("auth.logout",function(n){m.removeFBCookie();YAHOO.Media.Facebook.Session=undefined;m.CONF.set("fbuid","");d.fire("scbase:fb_auth_logout",{response:n})});if(!l){if(typeof MediaPerfTiming=="object"){MediaPerfTiming.startTimer("FacebookLoginStatus","GetLoginStatus")}FB.getLoginStatus(function(o){if(typeof MediaPerfTiming=="object"){MediaPerfTiming.endTimer("FacebookLoginStatus","GetLoginStatus").done("FacebookLoginStatus")}var n="",p="";a.clearTimeout(h);YAHOO.Media.Facebook.Session=o;if(k){return}else{if(typeof o.authResponse==="object"&&o.status==="connected"){e=true;m.CONF.set("fbuid",o.authResponse.userID);if(m.CONF.get("enable_code_exchange")==1){if(m.isFBCookieExist()){d.fire("scbase:fb_status_login");if(m.isFBCookieExpired()){m.refreshFBCookie()}}else{m.refreshFBCookie("scbase:fb_status_login")}}else{m.setFBCookie(o);d.fire("scbase:fb_status_login")}}else{if(o.status==="not_authorized"){m.CONF.set("fbuid","");d.fire("scbase:fb_status_not_authorized")}else{m.CONF.set("fbuid","");d.fire("scbase:fb_status_logout");m.removeFBCookie()}}}})}h=a.setTimeout(function(){if(e===false){k=true;m.removeFBCookie();YAHOO.Media.Facebook.Session=undefined;m.CONF.set("fbuid","");d.fire("scbase:fb_status_timeout")}},g);d.Global.after("scbase:fb_get_start",function(s){var p=m.CONF.get("yahoo_id")?725:575,w="left="+(a.screen.width-800)/2+",top="+(a.screen.height-p)/2,r=null,u=m.CONF.get("signin_url"),v="so=1&perms=user_birthday,user_likes,email,publish_actions",n=a.location.href,t={},q=null,o=false;FB.getLoginStatus(function(x){YAHOO.Media.Facebook.Session=x;if(x.status=="not_authorized"||x.status=="notConnected"){o=true}});if(o){r=a.open(u+"&"+v,"membershipwindow","toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+p+","+w);q=a.setInterval(function(){try{if(r.location.host==a.location.host){a.clearTimeout(q);r.close();a.location.reload(true)}}catch(x){}},700)}})},removeFBCookie:function(){if(this.CONF.get("enable_code_exchange")==0){d.Cookie.remove(this.cname,{path:"/",domain:"yahoo.com"})}else{d.Cookie.remove(this.cname,{path:"/",domain:a.location.hostname})}d.Cookie.remove("ysc",{path:"/",domain:a.location.hostname})},setFBCookie:function(m){var h=m.authResponse.userID,n="",f="",g=this.CONF.get("timestamp"),l=g+m.authResponse.expiresIn,e="",k=0;d.Cookie.get(this.cname,function(r){var p,q,o=r.split("&");for(p=0;p<o.length;p++){q=o[p].split("=");if("uid"===q[0]){n=q[1]}else{if("expires"===q[0]){f=q[1]}}}});k=f-g;this.log("timestamp : "+g);this.log("expire gap : "+k);this.log("old exp : "+f);this.log("new exp : "+l);this.log("old uid : "+n);this.log("new uid : "+h);if(n!==h||k<=600){e+="access_token="+m.authResponse.accessToken;e+="&uid="+m.authResponse.userID;e+="&expires="+l;this.log("set fbs");d.Cookie.set(this.cname,e,{path:"/",domain:"yahoo.com",expires:new Date((l-90)*1000)})}},isFBCookieExpired:function(){var f=Math.round(new Date().getTime()/1000),e=this.CONF.get("fbexpires");if(e<=(f-this.page_load_time+this.CONF.get("timestamp"))){return true}return false},isFBCookieExist:function(){if(d.Cookie.exists(this.cname)){if(this.CONF.get("enable_code_exchange")==1){var e="fbs_"+this.CONF.get("APP_ID");if(d.Cookie.exists(e)){d.Cookie.remove(e,{path:"/",domain:"yahoo.com"})}}return true}return false},refreshFBCookie:function(f,g){var h=this,e=h.CONF.get("XHR").GET_TOKEN;d.Get.script(e,{onSuccess:function(){if(f!==null){d.fire(f,g)}return true},onFailure:function(){}})},renderer:function(){this.renderUI();this.bindUI();this.syncUI()},renderUI:function(){},bindUI:function(){},syncUI:function(){},destroy:function(){},get:function(e){if(typeof this._data[e]==="undefined"){return null}return this._data[e].value},set:function(e,f){this._data[e].value=f},track_ywa:function(){var e=arguments,h=e[e.length-1],k={},g=0,f=1;if(this.CONF.get("enable_ywa")==1&&typeof d.Media.YWA!="undefined"&&this.CONF.get("project_id")!=""){k.projectId=this.CONF.get("project_id");k.action=e[0];g=e.length;if(g>f){k.customFields={};for(f;f<g;f++){if(!c.isArray(e[f])){continue}k.customFields[e[f][0]]=e[f][1]}}if(h){d.Media.YWA.submit_action(k)}else{d.Media.YWA.submit(k)}}},assign_hide_events:function(e,g,f){this.constructor.superclass._hide_events[e]=[g,f]},hide_other_layers:function(e,h){h=(typeof h==="undefined")?this:h;var g=h.constructor.superclass._hide_events;for(var f in g){if(f!=e){g[f][0].apply(g[f][1],arguments)}}},_patternParse:function(f,g){if(!g){return null}var e=null;switch(f){case"condition":e=g.match(/[#<>=]+/);break;case"parameter":e=g.match(/\{[^\{\}]*\}/g);return e;break}if(e&&e.length>1){return e}else{if(e&&e.length==1){return e[0].replace(/(^[\\s]*)|([\\s]*$)/g,"")}else{return null}}},getParamValue:function(g){g=g.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e="[\\?&]"+g+"=([^&#]*)";var h=new RegExp(e);var f=h.exec(window.location.href);if(f==null){return""}else{return f[1]}},getTranslation:function(r,p,g){if(!r){return""}if(this.getParamValue("ytest-pseudo").toLowerCase()==="on"){return"["+r+"]"}var t,q,h,l,k,o,e,s,f,m=this._patternParse("parameter",r);if(m===null){return r}for(l=0;l<m.length;l++){if(m[l].indexOf("choice",0)>0){t=m[l].split(",");if(t.length==3){n=t[0]?parseInt(t[0].replace(/(^[\\s]*)|([\\s]*$)/g,"").substring(1)):-1;q=t[2]?t[2].split("|"):null;if(n>0&&q!=null){e=r;for(var k=0;k<q.length;k++){q[k]=q[k].replace(/&lt;/g,"<").replace(/&gt;/g,">");o=this._patternParse("condition",q[k]);if(o){h=q[k].split(o);s=m[l];f=h[1].replace("}","");switch(o){case"<":if(parseInt(h[0])<parseInt(g[n])){e=r.replace(s,f)}break;case">":if(parseInt(h[0])>parseInt(g[n])){e=r.replace(s,f)}break;case"#":case"<=":if(parseInt(h[0])<=parseInt(g[n])){e=r.replace(s,f)}break;case">=":if(parseInt(h[0])>=parseInt(g[n])){e=r.replace(s,f)}break}}}r=e}}}else{var n=m[l].match(/^\{(\d+)\}$/);n=n?parseInt(n[1]):"";if(typeof n==="number"&&g){r=r.replace(m[l],g[n])}else{if(g&&g[l]){r=r.replace(m[l],g[l])}else{r=r.replace(m[l],p)}}}}return r},log:function(e){if(window.console&&window.location.href.indexOf("debug")>0){console.log(e)}},getSession:function(){if(typeof YAHOO.Media.Facebook.Session==="object"){d.log("ysc:getSession:",YAHOO.Media.Facebook.Session);return YAHOO.Media.Facebook.Session}else{return false}},get_track_link:function(e,f){f[YAHOO.ULT.SRC_SPACEID_KEY]=this.pagedata.spaceid;e=this.CONF.get("ult_redirect")+"//**"+e;return YAHOO.ULT.track_click(e,f)},get_pageview_beacon_url:function(f){var e=[this.CONF.get("ult_beacon")+"/p?",f,"&test=",this.CONF.get("bucket_code"),"&r=",Math.random()].join("");return e},fire_click_beacon:function(e){if(typeof YAHOO.ULT=="undefined"){return}YAHOO.ULT.BEACON=this.CONF.get("ult_beacon")+"/t";e.test=this.CONF.get("bucket_code");YAHOO.ULT.beacon_click(e)},get_query_variable:function(k){var h=window.location.search.substring(1);h=decodeURIComponent(h);h=h.replace(/&amp;/g,"&");var e=h.split("&");for(var f=0;f<e.length;f++){var g=e[f].split("=");if(g[0]==k){return g[1]}}return""},parse_fbref:function(e){var g=new Array();var k=e.split(",");for(var f=0;f<k.length;f++){var h=k[f].split(":");g[h[0]]=h[1]}return g},getUserData:function(g){var f=g.target.getAttribute("data");f=f.replace(/\\/g,"");return d.JSON.parse(f)},truncate_text:function(f,e){if(f.length>e){f=f.substring(0,e);f=f.replace(/\w+$/,"");f+=" ..."}return f},run_closeLightConn:function(f){if(this.lightConn.id>=0){if(this.lightConn.isInProgress()){this.lightConn.abort()}}},run_lightweight:function(q){if(typeof this.getSession()!=="object"){alert("facebook session expired or changed, please re-login");return}var p=this,f=this.constructor.superclass,s=q.target.getAttribute("data");s=d.JSON.parse(s);var m=s.userid,l=s.username;if(!f.lightweight){var n=d.one(".yog-24u").get("region").left+200,o=this.mod_friends.get("viewportRegion").top+100;f.lightweight=new d.Overlay({bodyContent:'<div id="ysc-lightweight" class="yom-primary lightweight"><div class="yom-mod"><div class="bd menu_loading"></div></div></div><a class="lightweightclose" tabindex="0"></a><div class="wraplightweight"></div>',width:"550px",xy:[n,o],shim:true,zIndex:10000800});f.lightweight.render();var g=d.one("#"+f.lightweight.get("id")+" .lightweightclose");f.lightweightbd=d.one("#ysc-lightweight .bd");var t=function(w){w.halt();var v={csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"btn",ltxt:"close",cuuid:p.pagedata.cid,axid:m};p.fire_click_beacon(v);p.run_closeLightConn();p.lightweight.hide()};g.on("click",function(v){t(v)});g.on("keypress",function(v){if(v.keyCode!="13"){return}t(v)});d.all("#mediasocialchromelogin .func_bar,#mediasocialchromefriends,#yscsingleblock .plusfd").on("click",function(v){p.run_closeLightConn();p.lightweight.hide()});f.lightweightbd.delegate("click",function(C){C.halt();var B=C.currentTarget;if(p.lightConn.isInProgress()){return}if(B.hasClass("selected")){return}var A=p.constructor.superclass,x=A.activity_user,w=B.get("className").match(/(btn\-prev|btn\-next)\s*/)[1],y=d.one("#ysc-lightweight-"+x+" > div.active").get("className").match(/page-(\d+)/)[1],v=B.get("href").split("#")[1],z=A.lightweight_uri+v;if(w==="btn-prev"){y--}else{y++}p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",slk:"btn",ltxt:(w==="btn-prev"?"pr":"ne")});p.fetchHistory2(z,y)},"div.active > div.header > div.paginator > a",p);f.lightweightbd.delegate("click",function(A){A.halt();var z=A.currentTarget,x=z.get("href"),w=p.getUserData({target:z}),y=z.get("className").match(/(user_pic|user_name)/)[1],v={csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"lwprof-actvmnu",itc:"1",cuuid:p.pagedata.cid,axid:m};if(y==="user_pic"){v.slk="thumb"}else{v.slk="user"}p.fire_click_beacon(v);setTimeout(function(){window.location.href=x},400)},".user_pic,.user_name",p)}this.lightweight=f.lightweight;this.lightweightbd=f.lightweightbd;if(f.active_lightweight&&f.activity_user!==m){f.active_lightweight.setStyle("display","none")}f.activity_user=this.activity_user=m;if(!d.one("#ysc-lightweight-"+m)){this.active_lightweight=d.Node.create('<div id="ysc-lightweight-'+m+'"></div>');this.lightweightbd.append(this.active_lightweight).addClass("menu_loading")}else{this.active_lightweight=d.Node.one("#ysc-lightweight-"+m);this.lightweightlist=this.active_lightweight.one(".list");var k=this.active_lightweight.one(".header .user_name"),u=this.unames["uid_"+m];if(k&&!k.hasClass("name-done")&&u!==undefined){k.setContent(u).addClass("name-done")}}f.active_lightweight=this.active_lightweight;var n=d.one(".yog-24u").get("region").left+200,o=this.mod_friends.get("viewportRegion").top+100;this.lightweight.move(n,o);this.active_lightweight.setStyle("display","block");this.lightweight.show();var r=m+"&limit=5&section=lwprof-actvmnu&network_source=fb&itc=0&space_id="+this.pagedata.spaceid+"&content_id="+this.pagedata.cid;var h=this.CONF.get("XHR").GET_ACTIVITY+r;h+="&template=lightweight&render_pagesize=5&render_pageindex={page_index}";f.lightweight_uri=h;p.fetchHistory2(h,0)},fetchHistory2:function(g,n){var m=this,f=m.constructor.superclass,l=f.activity_user,k=(m.unames["uid_"+l]?m.unames["uid_"+l].replace(/'/g,"&#39;"):""),h="#ysc-lightweight-"+l,o=d.one(h+" > .page-"+n),e=d.one(h+" > .active");if(o){o.removeClass("hide_page").addClass("active").show();if(e){if(!e.hasClass("page-"+n)){e.addClass("hide_page").removeClass("active").hide()}}d.one(h+" .img a").focus()}else{m.fetchHistory2_xhr(g,n,{index:n,userid:l,username:k})}},fetchHistory2_xhr:function(g,f,e){var k=this;var h=d.one("#ysc-lightweight-"+e.userid+" > .active > .list");if(h){k.show_loading_frame(h,"")}g=g.replace("{page_index}",f);k.lightConn=d.io(g,{on:{complete:function(p,n,l){n=k.parse_xhr(n);if(n===null){return}var m=n.html.replace(/\{user_name\}/g,l.username);k.lightweightbd.removeClass("menu_loading");var o=d.one("#ysc-lightweight-"+l.userid);o.all("> .active").removeClass("active").addClass("hide_page");o.append(m);k.update_loading_frame(o.all(".transition"),"clear");o.one(".img a").focus()}},arguments:e})},run_plus_others:function(u,h,p,l){u.preventDefault();var t=this;if(typeof this.getSession()!=="object"){return}if(l!==null){t.fire_click_beacon(l)}var g=this.constructor.superclass;if(!g.plusothers){var q=d.one(".yog-24u").get("region").left+275;var r=this.mod_friends.get("viewportRegion").top+100;g.plusothers=new d.Overlay({bodyContent:'<div class="yom-primary plusothers"><div class="yom-mod"><div class="bd"></div></div></div><a class="plusothersclose"></a><div class="wrapplusothers"></div>',width:"400px",xy:[q,r],shim:true,zIndex:10000800});g.plusothers.render();g.plusothersbd=d.one(".plusothers .bd")}this.plusothers=g.plusothers;this.plusothersbd=g.plusothersbd;var q=d.one(".yog-24u").get("region").left+275;var r=this.mod_friends.get("viewportRegion").top+100;this.plusothers.move(q,r);var x=h.length,o=[],n=1;for(n=1;n<x;n++){o.push(h[n].fbid)}FB.api("/fql?q="+encodeURIComponent("SELECT uid, pic_square FROM user WHERE uid in("+o.join(",")+")"),function(A){var E="",D=0,C={};if(A.data.length>0){var y=x-1;for(D=0;D<y;D++){C[A.data[D].uid]=A.data[D].pic_square}}for(D=1;D<x;D++){var F=h[D].fbid;var B=p["uid_"+h[D].fbid]?p["uid_"+h[D].fbid].replace(/'/g,"&#39;"):t.getTranslation(t.l10n.YOUR_FRIEND);var e='{"pos":"'+D+'","username":"'+B+'","userid":"'+F+'"}';var z=['<li class="clearfix">','<a href="#" class="user_pic">','<img src="'+C[F]+'" ','width="32" height="32" alt="',B,'"'," data='",e,"' >","</a>",'<a href="#" class="user_name"'," data='",e,"' >",B,"</a>","</li>"].join("");E=E+z}E="<div><ul>"+E+"</ul></div>";t.plusothersbd.setContent(E);t.plusothers.show();d.once("click",function(H){H.stopPropagation();var G=({csrcpvid:s,_S:v,ltxt:"close",sec:k,itc:"1",slk:"btn",axid:f});t.fire_click_beacon(G);t.plusothers.hide()},[".plusothersclose"]);t.plusothersbd.detachAll();t.plusothersbd.on("click",function(G){if(G.target.get("tagName")!=="A"){G.stopPropagation()}});t.plusothersbd.delegate("click",function(H){H.preventDefault();var G=t.getUserData(H);t.fire_click_beacon({csrcpvid:t.CONF.get("csrcpvid"),_S:t.pagedata.spaceid,sec:k,itc:"1",slk:"thumb",pos:G.pos,axid:G.userid});t.plusothers.hide();t.run_lightweight(H)},"img");t.plusothersbd.delegate("click",function(H){H.preventDefault();var G=t.getUserData(H);t.fire_click_beacon({csrcpvid:t.CONF.get("csrcpvid"),_S:t.pagedata.spaceid,sec:k,itc:"1",slk:"user",pos:G.pos,axid:G.userid});t.plusothers.hide();t.run_lightweight(H)},".user_name")});var k="frndlst",s=t.CONF.get("csrcpvid"),v=t.pagedata.spaceid,f=t.CONF.get("fbuid"),m=(t.CONF.get("optin_status")==="true")?"f":"p";var w="s="+v+"&pstaid="+t.pagedata.cid+"&ue="+m+"&ntw=fb&sec="+k+"&cxid="+f+"&csrcpvid="+s;new Image().src=t.get_pageview_beacon_url(w+"&r="+Math.random());d.once("click",function(){t.plusothers.hide()},["#mediasocialchromelogin"]);d.once("click",function(){t.plusothers.hide()},["#yscsingleblock .ysc-thumb"]);d.once("click",function(){t.plusothers.hide()},["#yscsingleblock a"])},show_loading_frame:function(h,f){var g=f?f:"";var e=h.one(".transition");if(!e){e=d.Node.create('<div class="transition"><p>'+this.getTranslation(this.l10n.MSG_CANT_GET_ACTIVITY)+"</p></div>");e.addClass("loading");h.prepend(e);if(f){e.on("click",function(l){l.halt();var k=l.target;if(k.hasClass("js-retry")){this.update_loading_frame(e,"retry");switch(g){case"self":this.fetchSelfActivity(this.self_data.url_next,"1");break}}if(k.hasClass("js-back")){this.update_loading_frame(e,"clear")}},this,true)}}e.setStyle("width",h.getStyle("width"));e.setStyle("height",h.getStyle("height"));e.setStyle("display","block")},display_invite_panel:function(f,e){FB.ui({method:"apprequests",message:this.l10n.MSG_FB_INVITE});d.all("#fb-root .fb_dialog").setStyle("zIndex","10000801")},hide_invite_panel:function(){var e=this.constructor.superclass;var f=d.one(".invite-wrap");this.invitelayer=e.invitelayer;if(this.invitelayer){this.invitelayer.hide();if(f){f.addClass("invite-wrap-hide")}}},update_loading_frame:function(f,e){switch(e){case"clear":f.setStyle("display","none");f.replaceClass("err","loading");break;case"err":f.replaceClass("loading","err");break;case"retry":f.replaceClass("err","loading");break;default:break}},handle_page_click:function(o,h,r){o.halt();var f=r?r:"",m=null;switch(f){case"self":if(this._readConn&&this._readConn.isInProgress()){return}m=this.self_data;break}var g=m.index_page,k=h,s=m.url_next,q=m.url_prev;var n=o.target,p=n.get("className"),l=(p.indexOf("btn-prev")>0&&p.indexOf("btn-prev-off")<0)?"btn-prev":(p.indexOf("btn-next")>0&&p.indexOf("btn-next-off")<0)?"btn-next":"";switch(l){case"btn-next":k=k+s;switch(f){case"self":if(this.loginlayerboxlist.one(".index-"+(g+1))){k=""}this.fetchSelfActivity(k,"1");break}break;case"btn-prev":k=k+q;switch(f){case"self":if(this.loginlayerboxlist.one(".index-"+(g-1))){k=""}this.fetchSelfActivity(k,"-1");break}break;default:break}},update_active_page:function(g){var h=g.key?g.key:"",l=g.step,e=g.content,k=g.parentnode,n=g.datasource;var f=n.index_page,m=n.active_page;if(e){k.append(e)}m.removeClass("active");f=f+l*1;n.index_page=f;n.active_page=k.one(".index-"+f);if(!e){n.active_page.addClass("active")}},update_page_ui:function(g){var p=g.index_page,t=g.total_page,f=g.total_count,r=g.shown_total,k=g.page_text,s=g.page_prev,e=g.page_next,o=g.icon_prev,q=g.icon_next,m=g.page_size,l=p*m+1,n=(t>p+1)?(p+1)*m:l+r-1,h=(r===1&&t===p+1)?l:(l+" - "+n);if(g.range_all){h=this.getTranslation(this.l10n.PG_RANGE_OF_ALL,"",[h,(f+"")])}k.setContent(h);if(l===1){s.set("className","yom-button btn-prev-off selected");s.setAttribute("disabled","disabled");o.set("className","icon btn-prev-off icon-arrow-prev-2")}else{if(s.hasClass("btn-prev-off")){s.set("className","yom-button btn-prev");s.removeAttribute("disabled");o.set("className","icon btn-prev icon-arrow-prev-1")}}if(p+1===t){e.set("className","yom-button btn-next-off selected");e.setAttribute("disabled","disabled");q.set("className","icon btn-next-off icon-arrow-next-2")}else{if(e.hasClass("btn-next-off")){e.set("className","yom-button btn-next");e.removeAttribute("disabled","disabled");q.set("className","icon btn-next icon-arrow-next-1")}}},parse_xhr:function(f){var f=f.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(f===""){return null}try{f=d.JSON.parse(f);return f.status===false?null:f}catch(g){this.log("invalid json data");return null}},fetch_friends_batch_story:function(g,h){var k=this,e=0;var f=function(l){d.io(h,{method:"GET",on:{success:function(s,q){var r=q.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");try{r=d.JSON.parse(r)}catch(n){k.log("sociachrome: invalid json data:")}if((202===r.info.http_code)&&(e<2)){setTimeout(d.bind(function(){f(l)},this),2000);e++}else{if(r.status===true){if(r.data[l.uuids]){var p=new Array();p[0]=null;for(var m=0;m<r.data[l.uuids].friends.length;m++){p[m+1]=r.data[l.uuids].friends[m]}k.rollup_ids=p}k.process_batch_response(r,l)}else{e=0;return}}},failure:function(n,m){}}})};f(g)},process_batch_response:function(f,m){var l=this,h={},o=false;for(var e in f.data){var k=f.data[e].friends,n=f.data[e].me;m.data_obj[e]=f.data[e];if(n){h[n.fbid]=n.fbid;o=true}this.response_no_me(o,m);if(k&&k.length>0){for(var g=0;g<k.length;g++){h[k[g].fbid]=k[g].fbid}}}this.fetch_names(h);this.register_namefetch(m)},build_activity_block:function(g,m){var s=this,k=g.data_obj[g.uuids[m]],n=k.me?1:0,y=n?k.me.fbid:0,l=n?s.unames["uid_"+y].replace(/'/g,"&#39;"):"",r=(k.friends.length>0)?k.friends[0].fbid:null,w=s.unames["uid_"+r]?s.unames["uid_"+r].replace(/'/g,"&#39;"):"",q=n?k.total-1:k.total,v="",p="",x={},h={},e={},o="",f=[],t=0,u=1000;this.pIds=k.friends;this.pNames=s.unames;if(q>0){for(t=0;t<q;t++){f.push(k.friends[t].fbid)}}if(n){f.push(y)}FB.api("/fql?q="+encodeURIComponent("SELECT uid, pic_square FROM user WHERE uid in("+f.join(",")+")"),function(B){var z=B.data.length,A={};if(z>0){for(t=0;t<z;t++){A[B.data[t].uid]=B.data[t].pic_square}}x=function(E,G,K){var L="",O=[],H=[],J=(K==="bar")?2:3;if(E>=J){L=(K==="bar")?2:3}else{L=E}for(var F=0;F<L;F++){var I=k.friends[F].fbid,N=s.unames["uid_"+I]?s.unames["uid_"+I].replace(/'/g,"&#39;"):"",D='{"username":"'+N+'","userid":"'+I+'"}',M=[];M=['<a href="#" role="button">','<img src="'+A[I]+'"',' width="32" height="32" alt="',N,"\" data='",D,"'>","</a>"];H=H.concat(M)}H=H.join("");if((E<2&&G&&K==="bar")||(E<3&&G&&K!=="bar")){O=['<a href="#" role="button">','<img src="'+A[y]+'" ','width="32" height="32" alt="',l,'" ','data=\'{"username":"',l,'","userid":"',y+"\"}'>","</a>"].join("")}return'<div class="ysc-thumb img">'+H+O+"</div>"};h=function(){var E=r?r:y,D=r?w:l,G='{"username":"'+D+'","userid":"'+E+'"}',F=['<div class="ysc-active ysc-thumb img">','<img src="'+A[E]+'"',' width="50" height="50" alt="',D,"\" data='",G,"'>","</div>"].join("");return F};e=function(){var I=s.l10n.READ_ACTIVITY_YOU,K=s.l10n.READ_ACTIVITY_YOU_FRIEND,H=s.l10n.READ_ACTIVITY_YOU_FRIEND_OTHER,E=s.l10n.READ_ACTIVITY_FRIEND,G=s.l10n.READ_ACTIVITY_FRIEND_OTHER,F="";if(g.fn==="video"){I=s.l10n.WATCH_ACTIVITY_YOU;K=s.l10n.WATCH_ACTIVITY_YOU_FRIEND;H=s.l10n.WATCH_ACTIVITY_YOU_FRIEND_OTHER;E=s.l10n.WATCH_ACTIVITY_FRIEND;G=s.l10n.WATCH_ACTIVITY_FRIEND_OTHER}var J=n?'<a href="#" role="button" data=\'{"username":"'+l+'","userid":"'+y+"\"}'>"+s.getTranslation(s.l10n.YOU)+"</a>":"";var D=r?'<a href="#" role="button" data=\'{"username":"'+w+'","userid":"'+r+"\"}'>"+w+"</a>":"";F=J+D;if(n){if(q===0){F=s.getTranslation(I,"",[J])}else{if(q===1){F=s.getTranslation(K,"",[J,D])}else{if(q>1){F=s.getTranslation(H,"",[J,D,(q-1)])}}}}else{if(r){if(q===1){F=s.getTranslation(E,"",[D])}else{if(q>1){F=s.getTranslation(G,"",[D,(q-1)])}}}}return F};v=e();if(g.fn=="toplist"){p=['<div class="ysc-active ysc-content">','<p class="read-by">',v,"</p>","</div>"].join("");o=[h(),p]}else{if(v){s.notifyContent=[x(q,n),'<div class="ysc-name">',"<p>",v,"</p>","</div>"].join("");p=['<div class="ysc-name">',x(q,n,"bar"),"<p>",v,"</p>","</div>"].join("")}var C=d.Node.create('<div id="yscsingleblock" class="sc-art-summary ysc-active ysc-single-block"></div>');C.setContent(p);o=C}d.fire("scActivityBlock:ready",{node:o})})},fetch_names:function(e){var h=this,g=[];if(typeof this.unames==="undefined"){this.unames={}}for(var f in e){g[g.length]=f}if(0===g.length){h.log("ysc:base: no fids for names");return}FB.api({method:"fql.query",query:"SELECT uid, name FROM user WHERE uid IN ("+g.join(",")+")"},function(n){for(var m=0,l=n.length;m<l;m++){var k=n[m];h.unames["uid_"+k.uid]=k.name}d.fire("ysc_activity:names_ready")})},register_namefetch:function(e){this.namefetchevents=(typeof this.namefetchevents==="undefined")?{}:this.namefetchevents;if(typeof this.namefetchevents[e.fn]==="undefined"||e.fn==="video"||e.fn==="game"){this.namefetchevents[e.fn]=d.after("ysc_activity:names_ready",d.bind(e.callback,this,e),this);d.after("scbase:fb_auth_logout",function(f){if(this.namefetchevents[e.fn]){this.namefetchevents[e.fn].detach();delete this.namefetchevents[e.fn]}},this,true)}},validate_fetch:function(q){var n=this,g=d.Cookie.get(this.cname),p=d.Cookie.get("ysc"),e=parseInt(new Date().getTime()/1000,10),r=false;var k=function(){var t,s=[n.CONF.get("XHR").GET_USER,"&network_source=fb","&space_id=",n.pagedata.spaceid,"&content_id=",n.pagedata.cid].join();t=d.io(s,{method:"GET",on:{complete:function(v,u){d.log("ysc: ysc updated","info");q()}}})};var o=function(){if(p){d.log("ysc: valid ysc","info");q()}else{d.log("ysc: refresh ysc","info");k()}};d.log("ysc:fbs cookie:"+d.Cookie.get(this.cname),"info");if(g){var f="",m=g.split("&");for(var l=0,h=m.length;l<h;l++){if(m[l].indexOf("expires=")>-1){f=m[l].split("expires=")[1];break}}if(parseInt(f,10)>e+(20*60)){r=true}}if(r){d.log("ysc: valid AT","info");o()}else{d.log("ysc: renew AT","info");FB.getLoginStatus(function(s){var t,u;if(!s||!s.authResponse){console.log("ysc: no auth from getLoginStatus");return}d.log(s);t=e+s.authResponse.expiresIn;u=["access_token=",s.authResponse.accessToken,"&uid=",s.authResponse.userID,"&expires=",t].join("");d.Cookie.set(n.cname,u,{path:"/",domain:"yahoo.com",expires:new Date(t*1000)});YAHOO.Media.Facebook.Session=s;n.CONF.set("fbexpires",t);o()})}},checkCookieCue:function(){return(d.Cookie.get("ysc_cue"))?true:false},renderCue:function(h,e){var g="",f="";if("cue-l"===h){g='<span class="close" role="button">x</span>'}f=['<div class="ysc-cue ',h,'">',e,g,"</div>"].join("");return f},response_no_me:function(f,e){}};d.namespace("Media.SocialChrome").Base=b},"1.0",{requires:["base","node","event","event-custom","io-base","io-xdr","cookie","intl","media-scconf"]});YUI.add("media-sclogin",function(d){var b=d.Lang,a=d.config.win;function c(e){c.superclass.constructor.apply(this,arguments)}c.NAME="Login";c.ATTRS={isPreLoad:{value:0},modId:{value:""},property:{value:""},learnMorePath:{value:""},helpPath:{value:""},truncateLength:{value:""},generalLength:{value:""},ratingLength:{value:""},videoLength:{value:""}};c.MYNODE_TEMPLATE="";c.HTML_PARSER={};d.extend(c,d.Media.SocialChrome.Base,{initializer:function(){var f=this,e=0;this.isInitFBSession=false;this._enable_fb_proxy=this.CONF.get("SWITCHES")._enable_fb_proxy;this._enable_cred_validate=this.CONF.get("SWITCHES")._enable_cred_validate;this.register_nodes();d.after("ysc_friends:start_sharing",function(g){this.start_sharing()},this);d.after("scbase:fb_auth_login",d.bind(this.fb_auth_login,this),this);d.after("scbase:fb_status_login",function(g){if(f.isInitFBSession){return}if("1"===f.CONF.get("SWITCHES")._enable_acct_merge){f.get_fbme(f.sync_module_state)}else{f.sync_module_state()}},this);d.after("scbase:fb_auth_logout",d.bind(this.fb_auth_logout,this),this);d.after("scbase:fb_status_logout",function(g){this.render_logout()},this);d.after("scbase:fb_status_not_authorized",function(g){this.render_logout()},this);d.after("scbase:fb_status_timeout",function(g){if(f.get("isPreLoad")==1){this.render_login()}else{this.render_logout()}},this)},show_status:function(l,g){var m=this,k,e=g||"pageload",h,f;if(l=="on"){this.status_now.setContent(this.getTranslation(this.l10n.READ_ON));this.status_next.setContent(this.getTranslation(this.l10n.READ_OFF));this.activity_reading.setAttribute("value","true");this.share_light.removeClass("rlight");this.share_light.addClass("glight");this.CONF.set("optin_status","true")}else{this.status_now.setContent(this.getTranslation(this.l10n.READ_OFF));this.status_next.setContent(this.getTranslation(this.l10n.READ_ON));this.activity_reading.setAttribute("value","false");this.share_light.removeClass("glight");this.share_light.addClass("rlight");this.CONF.set("optin_status","false")}k=d.Cookie.get("ysc_nt");if(e==="pageload"&&k){return}this.activity_reading.set("className","activity_reading");h=(l==="on")?"sharing-on":"sharing-off";this.activity_reading.addClass(h);setTimeout(function(){m.activity_reading.addClass("status-transition")},100);if(e==="pageload"){f=new Date();d.Cookie.set("ysc_nt","1",{path:"/",domain:window.location.hostname,expires:new Date(f.getTime()+1000*60*60*3)})}},render_login:function(){var e=this;if(!this.mod_login){this.log("social chrome login doesnt exist");return}this.isInitFBSession=true;if(this.CONF.get("optin_status")==="false"){this.show_status("off")}else{this.show_status("on")}if(this.mod_login.hasClass("loggedout")){this.mod_login.removeClass("loggedout")}e.fire_sc_beacon();if(this.get("isPreLoad")!=1){FB.api("/me?fields=name,id,third_party_id,picture",function(f){var g="",h=f.name.replace(/'/g,"&#39;");g=(typeof f.picture=="object")?f.picture.data.url:f.picture;e.user_name.setContent(h.substring(0,27));e.unames["uid_"+e.CONF.get("fbuid")]=h;e.CONF.set("tid",f.third_party_id);e.user_img.setContent('<img height="50" width="50" src="'+g+'" data=\'{"username":"'+h+'","userid":"'+f.id+'"}\'><div class="fb_icon" data=\'{"username":"'+h+'","userid":"'+f.id+"\"}'></div>");e.log_desc.setContent(e.getTranslation(e.l10n.STATUS_DESC))})}else{this.unames["uid_"+this.CONF.get("fbuid")]=this.user_name.getContent()}this.user_img.removeClass("img_logout");this.user_img.delegate("click",function(h){var g=e.getUserData(h),f=({csrcpvid:e.CONF.get("csrcpvid"),_S:e.pagedata.spaceid,sec:"idi",itc:"1",slk:"thumb",axid:g.userid});e.fire_click_beacon(f)},"img");this.func_bar.detachAll();this.bind_loginbarevents();if(this.CONF.get("initact")=="on"||this.CONF.get("initact")=="off"){if(this.CONF.get("signed_idp")&&this.CONF.get("initact")!=this.CONF.get("optin_status")){this.start_sharing()}}if(this.mod_login.hasClass("loading")){this.mod_login.removeClass("loading")}if("1"===this.CONF.get("SWITCHES")._enable_acct_merge&&"false"===this.CONF.get("optin_status")&&this.checkCookieCue()){d.fire("scbase:cue_exist");console.log("cue_exist")}if(typeof MediaPerfTiming=="object"){MediaPerfTiming.endTimer("MediaSocialChromeLogin","Login").done("MediaSocialChromeLogin")}},render_logout:function(){if(this.mod_login.hasClass("loading")){this.mod_login.removeClass("loading")}this.mod_login.addClass("loggedout");if(typeof MediaPerfTiming=="object"){MediaPerfTiming.endTimer("MediaSocialChromeLogin","Logout").done("MediaSocialChromeLogin")}},idp_check:function(h){var m=this,k,f,g,l,e;if(h=="optin"){k="";if(this.activity_reading.getAttribute("value")=="true"){k="sc_optin=off"}else{k="sc_optin=on"}f=this.CONF.get("signin_url").split("&");for(g in f){if(f[g].substr(0,5)==".done"&&f[g].indexOf("sc_optin")<0){if(f[g].indexOf("%3F")>0){f[g]+=encodeURIComponent("&"+k)}else{f[g]+=encodeURIComponent("?"+k)}}}this.CONF.set("signin_url",f.join("&"))}l=this.CONF.get("yahoo_id")==""?575:725;e="left="+(window.screen.width-800)/2+",top="+(window.screen.height-l)/2;window.open(this.CONF.get("signin_url")+"&so=0&perms=user_birthday,user_likes,email,publish_actions","membershipwindow","toolban=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+l+", "+e)},start_sharing:function(){if(!this.CONF.get("signed_idp")){this.idp_check("optin")}else{this.status_click()}},status_click:function(){var h=this,g,f,e;if(this.activity_reading.getAttribute("value")=="true"){g={optin_status:"false"}}else{g={optin_status:"true"}}if(!this.CONF.get("signed_idp")){this.idp_check("optin");return}f=this.CONF.get("fbuid");if("1"===this.CONF.get("SWITCHES")._enable_acct_merge){this.verify_permission(g.optin_status)}else{e=d.io(this.CONF.get("XHR").SET_USER,{on:{success:function(n,m){var l=m.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(l!==""){var k=d.JSON.parse(l);if(k.status===false&&!d.Lang.isUndefined(k.info)&&d.Lang.isValue(k.info.status)){if(k.info.status=="406"){h.idp_check("optin")}}else{if(k.status===true){if(h.activity_reading.getAttribute("value")=="true"){h.show_status("off","click")}else{h.show_status("on","click")}}}h.status_changed()}},failure:function(l,k){}},method:"POST",data:d.JSON.stringify(g)})}},run_removeexp:function(){if(typeof this.getSession()!=="object"){return}var f=this,e=this.getSession().authResponse.userID;if(!this.removeexp){this.removeexp=new d.Overlay({bodyContent:'<div id="removeexp" class="removeexp"><div class="yom-mod"><div class="bd"><p class="exptitle">'+this.getTranslation(this.l10n.REMOVE_EXPERIENCE)+'</p><p class="expdesc">'+this.getTranslation(this.l10n.MSG_SURE_TO_REMOVE,"",[this.get("property")])+'</p><div class="btn"><div class="btnremove"><a href="#" role="button">'+this.getTranslation(this.l10n.REMOVE)+'</a></div><div class="btncancel"><a href="#" role="button">'+this.getTranslation(this.l10n.CANCEL)+'</a></div></div></div></div></div><div class="wrapremoveexp"></div>',width:"550px",centered:true,shim:true,zIndex:10000800});this.removeexp.render();this.removeexpbd=this.body_node.one("#removeexp .bd")}this.removeexp.set("centered",true);this.removeexp.show();this.removeexpbd.one(".btncancel a").on("click",function(g){g.preventDefault();f.removeexp.hide()});this.removeexpbd.one(".btnremove a").on("click",function(g){g.preventDefault();f.fire_click_beacon({csrcpvid:f.CONF.get("csrcpvid"),_S:f.pagedata.spaceid,sec:"optout",itc:"1",slk:"btn",ltxt:"optout",cxid:f.CONF.get("fbuid")});FB.api("/"+e+"/permissions","delete",function(k){var l,h=f.CONF.get("sc_crumb");if(!k){return}f.removeFBCookie();f.removeexp.hide();window.location.reload()})})},run_mgtacc:function(){if(typeof this.getSession()!=="object"){return}var e=this.user_img.one("img").get("src"),g=this;if(!this.mgtacc){var f='<div class="logo"><div id="ylg" class="lgbx"><div class="ybdrtp"></div><div class="lghdtxt"><p>'+this.getTranslation(this.l10n.SIGN_YAHOO_AS)+':</p></div><div class="lgtxt" id="yct"><p><span class="unm shft" id="yid">'+this.CONF.get("yahoo_id")+'</span></p></div></div><div id="flg" class="lgbx"><div class="fbdrtp"></div><div class="lghdtxt"><p>'+this.getTranslation(this.l10n.SIGN_FB_AS)+':</p></div><div class="lgtxt" id="fct"><img src="'+e+'"><p><span class="unm">'+this.user_name.getContent()+'</span></p></div></div><div><div class="pimg"></div></div></div>';this.mgtacc=new d.Overlay({bodyContent:'<div id="mgtacc" class="mgtacc"><div class="yom-mod"><div class="bd"><p class="mgttitle">'+this.getTranslation(this.l10n.MANAGE_MY_ACCOUNT)+'</p><p class="mgtdesc">'+this.getTranslation(this.l10n.MSG_WE_CONNECT_ACCOUNT)+"</p>"+f+'<p class="mgtdesc">'+this.getTranslation(this.l10n.MSG_YOU_CAN_UNDO)+'.</p><div class="btn"><div class="btnundo"><a href="#" role="button">'+this.getTranslation(this.l10n.UNDO_CONNECTION)+'</a></div><div class="btncancel"><a href="#" role="button">'+this.getTranslation(this.l10n.CANCEL)+'</a></div></div></div></div></div><div class="wrapmgtacc"></div>',width:"580px",centered:true,shim:true,zIndex:10000800});this.mgtacc.render();this.mgtaccbd=this.body_node.one("#mgtacc .bd")}this.mgtacc.show();this.mgtaccbd.one(".btncancel a").on("click",function(h){h.preventDefault();g.mgtacc.hide()});this.mgtaccbd.one(".btnundo a").on("click",function(l){l.preventDefault();var m,h=g.CONF.get("sc_crumb"),k=g.CONF.get("XHR").SET_UNLINK;m=d.io(k,{on:{success:function(r,p){var o=p.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(o!==""){var n=d.JSON.parse(o);if(n.status===true&&n.info.http_code=="200"){g.mgtacc.hide()}else{var q=window.location.href;window.location.href="https://login.yahoo.com/config/login?.intl="+g.CONF.get("intl")+"&.done="+q}}}}})})},fb_auth_login:function(f){this.CONF.set("conv",0);if(f.response.authResponse&&!this.isInitFBSession){if("1"===this.CONF.get("SWITCHES")._enable_acct_merge){this.get_fbme(this.sync_user_setting,f)}else{this.sync_user_setting(f)}}else{this.render_logout()}},fb_auth_logout:function(f){if(f.response){this.CONF.set("consent_status",null);this.render_logout();d.fire("ysc_login:logout_facebook");this.restore_all()}},bind_loginbarevents:function(){var f=this;this.func_bar.delegate("click",this.on_loginbar_click,"li",this);this.mod_login.delegate("click",this.on_loginbar_click,".img",this);var e=function(h){if(!f.loginlayerbox){return}if(h.target){if(h.target.ancestor(".yom-socialchrome-login")||h.target.ancestor(".js-sub-act")||h.target.ancestor(".remind")){return}}if(f._readConn.id>=0&&f._readConn.isInProgress()){f._readConn.abort()}if(f._optConn.id>=0&&f._optConn.isInProgress()){f._optConn.abort()}f.removeActiveClass();f.loginlayerbox.removeClass("activity");f.loginlayerbox.removeClass("activity_reading");f.loginlayerbox.removeClass("options");var g=f.mod_login.one(".arrow-up");if(g!==null){g.replaceClass("arrow-up","arrow-down")}f.loginlayer.hide()};this.assign_hide_events("login_layer",e,this);d.after("scbase:cue_exist",function(g){this.renderLoginCue()},this);d.after("scbase:cue_remove",function(g){this.hideCueBars()},this)},removeActiveClass:function(){this.func_bar.one(".activity").removeClass("active");this.func_bar.one(".activity_reading").removeClass("active");this.func_bar.one(".options").removeClass("active")},on_loginbar_click:function(o){o.preventDefault();if(o.target.get("parentNode").hasClass("socialchrome-logout")){return}this.removeActiveClass();var n=this;var f=o.target.get("parentNode").getAttribute("class");var m=false;if(f=="func_bar"){f=o.target.getAttribute("class")}if(o.currentTarget.hasClass("activity_reading")){f="activity_reading"}if(o.target.getAttribute("width")!==""||o.target.hasClass("fb_icon")){f="activity";m=true}if(o.currentTarget.hasClass("img")){f="activity"}var p=this.mod_login.one("."+f);var h=p.getXY();var l=d.Node.create('<div class="layer-sc-login yom-dialog yom-tooltip"></div>');var k=d.Node.create('<div class="header-wrap layer-wrap"><div></div></div>');var r=d.Node.create('<div class="login-layer-wrap wrap"></div>');if(!this.loginlayer){this.body_node.appendChild(l);this.loginlayer=new d.Overlay({headerContent:k,bodyContent:r,width:"150px",x:h[0],y:h[1]+15,zIndex:10000650});this.loginlayer.hide();this.loginlayer.render(l);this.loginlayerbox=r;this.loginlayerheader=l.one(".yui3-widget-hd")}if(this.loginlayerbox.hasClass(f)||f=="seperate"){this.loginlayerbox.removeClass(f);this.loginlayer.hide();var q=this.mod_login.one(".arrow-up");if(q!==null){q.replaceClass("arrow-up","arrow-down")}}else{this.loginlayerbox.removeClass("activity");this.loginlayerbox.removeClass("activity_reading");this.loginlayerbox.removeClass("options");this.loginlayerbox.addClass(f);switch(f){case"activity":if(!m){var g={csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"idi",itc:"1",slk:"tab",ltxt:"activity"};this.fire_click_beacon(g)}this.show_activity(o,f,h[0],h[1]+2);break;case"activity_reading":this.show_reading(o,f,h[0],h[1]+2);break;case"options":this.show_options(o,f,h[0],h[1]+2);break;default:break}}},show_activity:function(s,g,t,r){var q=this,h=this.constructor.superclass,f=YUI.namespace("Media").LANGDIR;this.stop_xhr();this.loginlayer.hide();this.loginlayerheader.removeClass("read").removeClass("opt").addClass("act");this.loginlayer.set("width",537);this.loginlayer.set("xy",[t-(f=="rtl"?200:290),r+13]);this.loginlayerbox.all(".yom-mod").setStyle("display","none");var k=this.loginlayerheader.one(".layer-wrap");var x=this.func_bar.one("li.activity");if(k&&x){this.loginlayerheader.setStyle("left",(x.get("region").left)-Math.round(t-(f=="rtl"?205:290))-15);k.setStyle("width",x.get("clientWidth")+16);x.addClass("active")}if(h.activity_changed){this.loginlayerbox.all(".js-sub-act").remove();h.activity_changed=false}var v=this.loginlayerbox.one(".js-sub-act");if(v){v.show();var o=v.one("> .bd")}else{var l=d.Node.create('<div class="yom-mod js-sub-act"><div class="bd menu_loading"></div></div>');var p=[];var o=this.loginlayerbox.append(l).one("> .js-sub-act > .bd");o.on("click",function(y){y.stopPropagation()});o.delegate("click",function(A){A.preventDefault();var z=A.currentTarget,y=z.hasClass("user_name")?"user":"thumb";q.fire_click_beacon({csrcpvid:q.CONF.get("csrcpvid"),_S:q.pagedata.spaceid,itc:"0",sec:"idi-actvmnu",slk:y,axid:q.CONF.get("fbuid")});setTimeout(function(){window.location.href=z.get("href")},500)},".header .user_pic,.header .user_name",this);o.delegate("click",function(y){y.halt()},".paginator a.selected",q);o.delegate("click",function(E){var F=this;E.halt();if(true===F.in_progress(F._readConn)){return}var D=E.currentTarget,z=D.get("className").match(/(btn\-prev|btn\-next)\s*/)[1],B=parseInt(F.loginlayerboxbd.one("> .active").get("className").match(/index-(\d+)/)[1]),y=D.get("href").split("#")[1],C=F.self_base_uri+y,A={csrcpvid:F.CONF.get("csrcpvid"),_S:F.pagedata.spaceid,sec:"idi-actvmnu",itc:"1",slk:"btn"};if("btn-prev"===z){B--;A.ltxt="pr"}else{if("btn-next"===z){B++;A.ltxt="ne"}}F.fire_click_beacon(A);if(F.loginlayerboxbd.one("> .index-"+B)){F.loginlayerboxbd.one("> .active").removeClass("active").hide();F.loginlayerboxbd.one("> .index-"+B).addClass("active").show()}else{F.show_loading_frame(F.loginlayerboxbd.one(".active .list"),"");F.show_activity_xhr(C,B)}},".paginator a.pager",q);o.delegate("click",function(D){var E=this,C=D.target,y=C.getAttribute("value"),B=C.ancestor("li"),z=E.CONF.get("fbuid");var A="&user_id="+z+"&content_id="+y+"&space_id="+E.pagedata.spaceid+"&action=sc-rmread&network_source=fb";d.io(E.CONF.get("XHR").DELETE_ACTIVITY+A,{on:{complete:function(H,F){var G=this,e=G.parse_xhr(F);B.addClass("deleted").all(".ts,.rmlist").remove();if(e===null||e.info.http_code!="200"&&e.info.http_code!="204"){B.all(".failure").setStyle("display","block")}else{B.all(".success").setStyle("display","block")}}},context:E})},".rmlist",q)}this.loginlayerboxbd=o;this.loginlayer.show();this.showArrow(g);var n=this.CONF.get("fbuid"),m=this.unames["uid_"+n],u=5;this.self_username=m;var w=[this.CONF.get("XHR").GET_ACTIVITY,n,"&section=idi-actvmnu&itc=0&network_source=fb&del_btn=true&template=my_activity","&space_id=",this.pagedata.spaceid,"&content_id=",this.pagedata.cid,"&general_title_length=",this.get("generalLength"),"&rating_title_length=",this.get("ratingLength"),"&video_title_length=",this.get("videoLength"),"&limit=",u,"&render_pagesize=",u,"&render_pageindex={page_index}"].join("");this.self_base_uri=w;if(!this.loginlayerbox.one(".index-0")){this.show_activity_xhr(this.self_base_uri,0)}},show_activity_process:function(f,g){var h=this;var e=d.Node.create(f.html);e.one("#user_name").setContent(h.self_username);if(g>0){e.one(".desc").setContent(h.loginlayerboxbd.one(".index-0").one(".desc").getContent())}h.loginlayerboxbd.all("> .active").setStyle("display","none").removeClass("active");h.loginlayerboxbd.append(e).removeClass("menu_loading");h.update_loading_frame(h.loginlayerboxbd.all(".transition"),"clear")},show_activity_xhr:function(f,e){var h=this;f=f.replace("{page_index}",e);var g=function(){h._readConn=d.io(f,{on:{success:function(m,l){var k=h.parse_xhr(l);if(k===null||k.status!==true){return h.log("self_activity failed")}h.show_activity_process(k,e)}}})};this.fetch_self_activity=g;this.validate_fetch(this.fetch_self_activity)},show_reading:function(s,f,t,q){var p=this;if(this.checkCookieCue()){d.fire("scbase:cue_remove")}this.stop_xhr();this.removeActiveClass();this.func_bar.one("li."+f).addClass("active");var k={csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"idi",itc:"1",slk:"tab",ltxt:"sharing"};this.fire_click_beacon(k);this.loginlayer.hide();this.loginlayerheader.removeClass("act").removeClass("opt").addClass("read");this.loginlayerbox.all(".yom-mod").setStyle("display","none");var o="",r=this.getTranslation(this.l10n.TURN_SOCIAL_OFF),u="turnoff",n='<a href="#" role="button">'+r+"</a>",m="",h=null;if(this.activity_reading.getAttribute("value")=="false"){o="<p>"+this.getTranslation(this.l10n.MSG_OPT_DISCLOSURE)+"</p>";r=this.getTranslation(this.l10n.TURN_SOCIAL_ON);u="turnon"}n='<a href="#" role="button">'+r+"</a>"+o;if(this.loginlayerbox.one(".js-sub-read")){this.loginlayerbox.one(".js-sub-read .change_status").setContent(n);this.loginlayerbox.one(".js-sub-read").setStyle("display","block")}else{m=['<div class="yom-mod js-sub-read">','<div class="bd">','<li class="change_status">',n,"</li>",'<li class="remind">','<input type="checkbox" id="remind_share" class="remind_share" value="1">','<a href="#" role ="button" class="remind_me shownlast">',this.getTranslation(this.l10n.REMIND_ME),"</a></li>","</div></div>"].join("");h=d.Node.create(m);this.loginlayerbox.append(h);l()}d.once("click",function(w){w.preventDefault();var v={csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"toggle",ltxt:u};p.fire_click_beacon(v)},this.loginlayerbox.one(".change_status"));this.loginlayer.set("width",177);this.loginlayer.set("xy",[t-15,q+13]);var g=this.loginlayerheader.one(".layer-wrap");if(g){this.loginlayerheader.setStyle("left",0);g.setStyle("width",s.currentTarget.get("clientWidth")+16)}this.CONF.get("reminder")=="true"?document.getElementById("remind_share").checked=true:document.getElementById("remind_share").checked=false;function l(){d.delegate("click",function(w){w.preventDefault();p.start_sharing()},".change_status","a",this,true);p.loginlayerbox.one(".remind_share").on("click",function(z){var y;var x=String(document.getElementById("remind_share").checked);if(x=="true"){y={reminder:"true"};p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdron"})}else{y={reminder:"false"};p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdroff"})}var w=d.io(p.CONF.get("XHR.SET_USER"),{method:"POST",data:d.JSON.stringify(y),on:{success:function(D,C){p.CONF.set("reminder",x);var B=C.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(B!==""){var A=d.JSON.parse(B);if(A.status===false&&!d.Lang.isUndefined(A.info)&&d.Lang.isValue(A.info.status)){if(A.info.status=="406"){p.idp_check("optin")}}}p.log("post to CPG done")},failure:function(B,A){p.log("post to CPG failed")}},context:p})});p.loginlayerbox.one(".remind_share").on("keydown",function(z){if(z.keyCode==13){z.preventDefault();var y;var x=String(document.getElementById("remind_share").checked);if(x=="true"){y={reminder:"false"};document.getElementById("remind_share").checked=false;x="false"}else{y={reminder:"true"};document.getElementById("remind_share").checked=true;x="true"}if(x=="true"){p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rm     dron"})}else{p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rm     droff"})}var w=d.io(p.CONF.get("XHR.SET_USER"),{method:"POST",data:d.JSON.stringify(y),on:{success:function(D,C){p.CONF.set("reminder",x);var B=C.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(B!==""){var A=d.JSON.parse(B);if(A.status===false&&!d.Lang.isUndefined(A.info)&&d.Lang.isValue(A.info.status)){if(A.info.status=="406"){p.idp_check("optin")}}}p.log("post to CPG done")},failure:function(B,A){p.log("post to CPG failed")}},context:p})}});p.loginlayerbox.one(".remind_me").on("click",function(z){z.preventDefault();var y;var x=String(document.getElementById("remind_share").checked);if(x=="true"){y={reminder:"false"};document.getElementById("remind_share").checked=false;x="false"}else{y={reminder:"true"};document.getElementById("remind_share").checked=true;x="true"}if(x=="true"){p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdron"})}else{p.fire_click_beacon({csrcpvid:p.CONF.get("csrcpvid"),_S:p.pagedata.spaceid,sec:"idi-sh",itc:"1",slk:"chkbox",ltxt:"rmdroff"})}var w=d.io(p.CONF.get("XHR.SET_USER"),{method:"POST",data:d.JSON.stringify(y),on:{success:function(D,C){p.CONF.set("reminder",x);var B=C.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(B!==""){var A=d.JSON.parse(B);if(A.status===false&&!d.Lang.isUndefined(A.info)&&d.Lang.isValue(A.info.status)){if(A.info.status=="406"){p.idp_check("optin")}}}p.log("post to CPG done")},failure:function(B,A){p.log("post to CPG failed")}},context:p})});var v=function(w){if(w.keyCode=="13"&&p.loginlayer.get("visible")){if(!p.loginlayerheader.hasClass("read")){p.on_loginbar_click(w)}else{w.preventDefault();d.one(".change_status > a").focus()}}else{if(w.keyCode=="27"&&p.loginlayer.get("visible")){p.loginlayer.hide();p.loginlayerbox.removeClass(f);p.login_reading.one("> a").focus();p.showArrow(f);p.removeActiveClass()}}};var e=function(w){if(w.keyCode=="27"){p.loginlayer.hide();p.loginlayerbox.removeClass(f);p.login_reading.one("> a").focus();p.showArrow(f);p.removeActiveClass()}else{if(w.target.hasClass("shownlast")&&w.keyCode=="9"){w.preventDefault();d.one(".change_status > a").focus()}}};p.login_reading.delegate("keydown",v,".activity_reading");p.loginlayerbox.one(".js-sub-read").delegate("keydown",e,".yom-mod")}this.loginlayer.show();this.showArrow(f)},show_options:function(q,f,s,p){var o=this,h,r,k={csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"idi",itc:"1",slk:"tab",ltxt:"options"};this.stop_xhr();this.removeActiveClass();this.func_bar.one("li."+f).addClass("active");this.fire_click_beacon(k);this.loginlayer.hide();this.loginlayerheader.removeClass("act");this.loginlayerheader.removeClass("read");this.loginlayerheader.addClass("opt");this.loginlayerbox.all(".yom-mod").setStyle("display","none");function t(){var x=o.loginlayerbox.one(".yom-mod .bd .user_guide a");var e=o.loginlayerbox.one(".yom-mod .bd .report_guide a");var w=o.loginlayerbox.one(".yom-mod .bd .remove_guide a");var u=o.loginlayerbox.one(".yom-mod .bd .invite_guide a");var v=o.loginlayerbox.one(".yom-mod .bd .fb_logout");o.remove_guide_link=w;x.on("click",function(z){z.preventDefault();var y={csrcpvid:o.CONF.get("csrcpvid"),_S:o.pagedata.spaceid,sec:"idi-optn",itc:"0",slk:"more",ltxt:encodeURIComponent(x.getContent())};window.location.href=o.get_track_link(x.get("href"),y)});e.on("click",function(z){z.preventDefault();var y={csrcpvid:o.CONF.get("csrcpvid"),_S:o.pagedata.spaceid,sec:"idi-optn",itc:"0",slk:"problem",ltxt:encodeURIComponent(e.getContent())};window.location.href=o.get_track_link(e.get("href"),y)});w.on("click",function(y){y.preventDefault();o.fire_click_beacon({csrcpvid:o.CONF.get("csrcpvid"),_S:o.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"optout",ltxt:encodeURIComponent(o.getTranslation(o.l10n.REMOVE_EXPERIENCE))});o.run_removeexp(y)});u.on("click",function(y){y.halt();o.hide_other_layers("invite_panel",o);o.showArrow(f);o.fire_click_beacon({csrcpvid:o.CONF.get("csrcpvid"),_S:o.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"invite",ltxt:encodeURIComponent(o.getTranslation(o.l10n.INVITE_FRIENDS))});o.display_invite_panel(o.get("property"),o.get("learnMorePath"))});v.on("click",function(z){z.preventDefault();var y={csrcpvid:o.CONF.get("csrcpvid"),_S:o.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"signout",ltxt:encodeURIComponent(o.getTranslation(o.l10n.NOT_YOU_LOGOUT))};o.fire_click_beacon(y);o.loginlayerbox.setContent("");o.showArrow(f);FB.logout();if(o.loginlayer){o.loginlayer.hide()}});o.loginlayerbox.one(".js-sub-opt a").on("click",function(y){o.loginlayer.hide();o.showArrow(f);o.removeActiveClass()})}if(this.loginlayerbox.one(".js-sub-opt")){this.loginlayerbox.one(".js-sub-opt").setStyle("display","block")}else{h=d.Node.create('<div class="yom-mod js-sub-opt"></div>');this.loginlayerbox.append(h);r='<div class="yom-mod js-sub-opt"><div class="bd">';r+='<li class="user_guide"><a href="'+this.get("learnMorePath")+'">'+this.getTranslation(this.l10n.LEARN_MORE)+"</a></li>";r+='<li class="invite_guide"><a href="#" role="button">'+this.getTranslation(this.l10n.INVITE_FRIENDS)+"</a></li>";r+='<li class="report_guide"><a href="'+this.get("helpPath")+'">'+this.getTranslation(this.l10n.REPORT_PROBLEM)+"</a></li>";r+='<li id="fb_logout" class="fb_logout"><a href="#" role="button">'+this.getTranslation(this.l10n.NOT_YOU_LOGOUT)+"</a></li>";r+='<li class="remove_guide"><a href="#" class="shownlast" role="button">'+this.getTranslation(this.l10n.REMOVE_EXPERIENCE)+"</a></li>";r+='<li class="manage_guide menu_loading">&nbsp;</li></div></div>';o.loginlayerbox.one(".js-sub-opt").replace(r);this.loginlayerbox.one(".js-sub-opt").delegate("keydown",n,".yom-mod");t();this._optConn=d.io(o.CONF.get("XHR").GET_USERLINK,{on:{success:function(y,x){var e,u,w,v=x.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(v!==""){w=d.JSON.parse(v);u=d.one(".js-sub-opt .bd").get("children");e=u.slice(-1).item(0);if(!d.Lang.isUndefined(w.info)&&d.Lang.isValue(w.info.http_code)&&w.info.http_code=="200"){e.setContent('<a href="#" role="button">'+this.getTranslation(this.l10n.MANAGE_MY_ACCOUNT)+"</a>");e.removeClass("menu_loading");e.one("a").on("click",function(z){z.preventDefault();o.fire_click_beacon({csrcpvid:o.CONF.get("csrcpvid"),_S:o.pagedata.spaceid,sec:"idi-optn",itc:"1",slk:"manage",ltxt:encodeURIComponent(o.getTranslation(o.l10n.MANAGE_MY_ACCOUNT))});o.run_mgtacc(z)})}else{o.loginlayerbox.one(".js-sub-opt .bd").removeChild(e)}}},failure:function(v,u){var e=this.loginlayerbox.one(".js-sub-opt");if(e){this.loginlayerbox.removeChild(e)}}},context:o})}this.loginlayer.set("width",207);var m=207-(q.currentTarget.get("clientWidth")+29);if(YUI.namespace("Media").LANGDIR=="rtl"){this.loginlayer.set("xy",[s-15,p+13]);m=0}else{this.loginlayer.set("xy",[s-207+q.currentTarget.get("clientWidth")+16,p+13])}var g=this.loginlayerheader.one(".layer-wrap");if(g){this.loginlayerheader.setStyle("left",m);g.setStyle("width",q.currentTarget.get("clientWidth")+16)}this.loginlayer.show();this.showArrow(f);var l=function(u){if(u.keyCode=="13"&&o.loginlayer.get("visible")){if(!o.loginlayerheader.hasClass("opt")){o.on_loginbar_click(u)}else{u.preventDefault();d.one(".user_guide > a").focus()}}else{if(u.keyCode=="27"&&o.loginlayer.get("visible")){o.loginlayer.hide();o.loginlayerbox.removeClass(f);o.login_options.one("> a").focus();o.showArrow(f);o.removeActiveClass()}}};var n=function(u){if(u.keyCode=="27"){o.loginlayer.hide();o.loginlayerbox.removeClass(f);o.login_options.one("> a").focus();o.showArrow(f);o.removeActiveClass()}else{if(u.target.hasClass("shownlast")&&u.keyCode=="9"){u.preventDefault();d.one(".user_guide > a").focus()}}};this.login_options.delegate("keydown",l,".options")},showArrow:function(f){var g=this.mod_login.one("."+f+" .arrow-down");var e=this.mod_login.all(".func_bar .arrow-up");if(e!==null){e.replaceClass("arrow-up","arrow-down")}if(g!==null){g.replaceClass("arrow-down","arrow-up")}},stop_xhr:function(){if(this._readConn.id>=0){if(this._readConn.isInProgress()){this._readConn.abort()}}if(this._optConn.id>=0){if(this._optConn.isInProgress()){this._optConn.abort()}}},fire_sc_beacon:function(){var o=this;var l=o.CONF,s=o.pagedata;var v=(l.get("optin_status")==="false")?"p":"f",t=0;if(l.get("conv")==1){t=1;v="f"}if(v=="p"||!l.get("signed_idp")){o.track_ywa("06",[18,"Activity Bar"],[10,"Partial"],0)}else{o.track_ywa("06",[18,"Activity Bar"],[10,"Full"],0)}var u="-1",k=0,g="",h=o.get_query_variable("fb_ref"),n=o.get_query_variable("action_ref_map"),f=l.get("numFriends");if(h!==""||n){k=1;if(!h){try{fb_action_ref_map_json=d.JSON.parse(n);if(fb_action_ref_map_json){d.some(fb_action_ref_map_json,function(w,e){if(w){h=w;return true}})}}catch(q){}}h=o.parse_fbref(h);if("type" in h){if(h.type=="invite"){g="inv"}else{g=h.type}}else{g=h}if("user" in h&&h.user!==""){u=h.user}}else{var p=o.get_query_variable("fb_action_types"),r=o.get_query_variable("fb_action_ids");if(p!==""&&r!==""){u=r;g=p;k=1}}if(typeof f==="undefined"){f=null}var m=["s=",s.spaceid,"&conv=",t,"&ref=",k,"&frC=",f,"&pstaid=",s.cid+"&ue=",v,"&ntw=fb&intl=",l.get("intl"),"&cxid=",l.get("fbuid"),"&axid=",u,"&csrcpvid=",l.get("csrcpvid"),"&act=sc-pv&srcact=",g].join("");new Image().src=o.get_pageview_beacon_url(m)},status_changed:function(){var e=(this.CONF.get("optin_status")==="true")?true:false;d.fire("ysc_sharing:status_changed",{sharing:e})},register_nodes:function(){this.mod_login=d.one("#"+this.get("modId"));this.user_name=this.mod_login.one(".user_name");this.user_img=this.mod_login.one(".img");this.log_desc=this.mod_login.one(".log_desc");this._readConn="";this._optConn="";this.fb_logout=d.one(".layer-sc-login .fb_logout");this.activity_reading=this.mod_login.one(".activity_reading");this.share_light=this.mod_login.one("#light");this.func_bar=this.mod_login.one(".func_bar");this.status_now=this.mod_login.one(".status_now");this.status_next=this.mod_login.one(".status_next");this.status_switch=this.mod_login.one(".status_switch");this.login_li=this.mod_login.one(".activity");this.login_reading=this.mod_login.one(".activity_reading");this.login_options=this.mod_login.one(".options");this.body_node=d.one(document.body)},restore_all:function(){this.set("isPreLoad",0);this.isInitFBSession=false;this.show_status("off");this.body_node.all(".ysc-show").removeClass("ysc-show");this.body_node.all(".ysc-hide").removeClass("ysc-hide");this.body_node.all(".ysc-active").remove();this.CONF.set("numFriends",null)},in_progress:function(e){if(typeof e==="undefined"){return false}if(e&&e.isInProgress()){return true}return false},sync_module_state:function(){if(this.get("isPreLoad")=="0"){this.fb_auth_login({response:this.getSession()})}else{this.status_changed();this.render_login()}},sync_user_setting:function(o){var l=this,q,p,h,k=false;this.isInitFBSession=true;this.CONF.set("initact","");h={authResponse:o.response.authResponse};p=["&network_source=fb","&space_id=",l.pagedata.spaceid,"&content_id=",l.pagedata.cid].join();var m=function(w,v){var u=l.parse_xhr(v);if(!u){return}if(d.Lang.isValue(u.info.http_code)){switch(u.info.http_code){case 421:l.CONF.set("conv",1);if("1"===l.CONF.get("SWITCHES")._enable_acct_merge){var t="false",e=decodeURIComponent(location.href);if(l.CONF.get("FBME").perm===1&&(e.indexOf(".af=sb")>0||e.indexOf("af:sb")>0)){t="true"}if("1"===l.CONF.get("SWITCHES")._enable_acct_merge){if((e.indexOf(".af=sb")<0&&e.indexOf("af:sb")<0)){k=true}}n(t)}else{n("true")}break;case 406:l.CONF.set("signed_idp",0);r(u);break;default:l.CONF.set("signed_idp",1);l.CONF.set("noexperience","false");if("1"===l.CONF.get("SWITCHES")._enable_acct_merge){if(1!==l.CONF.get("FBME").perm){s("false",u)}else{r(u)}}else{r(u)}break}}};var g=function(t,e){l.show_status("off");l.render_login()};var n=function(t){if("1"===l.CONF.get("SWITCHES")._enable_acct_merge){if("false"===t&&k){l.createCookieCue()}}var e=d.io(l.CONF.get("XHR").SET_USER,{on:{success:function(w,v){var u=l.parse_xhr(v);if(u.status){if("true"===t){l.show_status("on")}else{l.show_status("off")}}l.CONF.set("noexperience","true");l.CONF.set("consent_status",{all:{status:"true",count:0,posted:""}});l.status_changed();l.render_login()}},method:"POST",data:d.JSON.stringify({optin_status:t})})};var r=function(e){if(e.data&&e.data.settings){if("true"===e.data.settings.optin_status){l.show_status("on")}l.CONF.set("reminder",e.data.settings.reminder);if(e.data.settings.consent){l.CONF.set("consent_status",e.data.settings.consent)}else{l.CONF.set("consent_status",null)}}else{l.show_status("off")}l.status_changed();l.render_login()};var s=function(u,t){if(t.data&&t.data.settings){l.CONF.set("reminder",t.data.settings.reminder);if(t.data.settings.consent){l.CONF.set("consent_status",t.data.settings.consent)}else{l.CONF.set("consent_status",null)}}var e=d.io(l.CONF.get("XHR").SET_USER,{on:{success:function(x,w){var v=l.parse_xhr(w);if(v.status){if("true"===u){l.show_status("on")}else{l.show_status("off")}}l.status_changed();l.render_login()}},method:"POST",data:d.JSON.stringify({optin_status:u})})};var q=d.io(l.CONF.get("XHR").GET_USER+p,{method:"GET",on:{success:m,failure:g}});if("1"===this._enable_cred_validate){var f=d.io(l.CONF.get("XHR").CREDVALIDATE+p,{method:"POST",data:d.JSON.stringify(h),timeout:2000})}},get_fbme:function(m,f){var l=this,e,h,g,k=0;FB.api("/me?fields=name,id,third_party_id,picture,permissions",function(n){e=n.name;h=n.id;g=n.permissions.data[0];if(g.publish_actions){k=1}if(location.href.indexOf("debug=fbp")>0){k=parseInt(location.href.split("debug=fbp")[1],10)}l.CONF.set("FBME",{perm:k,fbid:h,name:e,tpid:n.third_party_id,fpic:(typeof n.picture=="object")?n.picture.data.url:n.picture});l.unames["uid_"+h]=e;m.apply(l,[f])})},verify_permission:function(f){var g=this,e=g.CONF.get("FBME");if("true"===f&&!e.perm){FB.login(function(h){FB.api("/me/permissions",function(k){if(1===k.data[0].publish_actions){e.perm=1;g.CONF.set("FBME",e);g.update_social_setting(f)}})},{scope:"publish_actions"})}else{this.update_social_setting(f)}},update_social_setting:function(f){var k=this,e,h,g;e=d.io(this.CONF.get("XHR").SET_USER,{on:{success:function(m,l){h=l.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");if(h!==""){g=d.JSON.parse(h);if(g.status){if("true"===f){k.show_status("on","click")}else{k.show_status("off","click")}k.status_changed()}}}},method:"POST",data:d.JSON.stringify({optin_status:f})})},createCookieCue:function(){d.Cookie.set("ysc_cue","1",{path:"/",domain:"yahoo.com",expires:new Date(new Date().getTime()+1000*60*60*24*90)})},removeCookieCue:function(){d.Cookie.remove("ysc_cue",{path:"/",domain:"yahoo.com"})},renderLoginCue:function(){var f,g,e;g=this.getTranslation(this.l10n.MSG_CUE_LOGIN);f=d.one("#"+this.get("modId"));e=this.renderCue("cue-l",g);f.append(d.Node.create(e));this.activity_reading.replaceClass("status_transition","cue");this.bindLoginCueEvent()},bindLoginCueEvent:function(){},hideCueBars:function(){if(this.checkCookieCue()){d.all(".ysc-cue").remove();this.activity_reading.removeClass("cue");this.removeCookieCue()}}});d.namespace("Media.SocialChrome").Login=c},"0.1",{requires:["node","event","event-custom","io-base","io-xdr","overlay","json","media-ylc","media-scbase","cookie"]});YUI.add("media-scflist",function(c){var a=c.config.win,b=c.Lang;function d(e){d.superclass.constructor.apply(this,arguments)}d.NAME="scfriendlist";d.ATTRS={srcNode:{value:c.one(".socialchrome-grid")},modId:{value:null},pageSize:{value:12},isPreLoad:{value:0},numFriends:{value:null},property:{value:null},friendIdList:{value:null},learnMorePath:{value:null},listType:{value:""},friendbarRollup:{value:"0"}};d.HTML_PARSER={};d.MYNODE_TEMPLATE="";c.extend(d,c.Media.SocialChrome.Base,{CLASSNAMES:{pagemark:c.ClassNameManager.getClassName("scfriendlist","pagemark")},initializer:function(){this.renderUI();this.bindUI()},renderUI:function(){var g=c.one("#"+this.get("modId"));if(!g){this.log("socialchrome: friendlist modId not present");return}var f=g.one(".paginator"),e=g.one(".paginator .page"),n=g.one(".paginator .btn-prev-off"),q=g.one(".paginator .btn-next"),m=g.one(".paginator .icon-arrow-prev-2"),o=g.one(".paginator .icon-arrow-next-1"),p=g.one(".bd"),s=g.one(".yui3-scrollview-loading"),k=g.one(".yui3-scrollview-loading ul"),r=g.one(".msg-prompt"),h=this.get("pageSize");this._hd_pg=f;this._hd_pg_text=e;this._hd_pg_prev=n;this._hd_pg_next=q;this._hd_ic_prev=m;this._hd_ic_next=o;this._bd=p;this._bd_sv=s;this._bd_sv_ul=k;this._bd_msg=r;this.active_hover=true;this.hover_pause=500;this.page_index=0;if(this.get("numFriends")!==null&&this.get("isPreLoad")===1){this.CONF.set("numFriends",this.get("numFriends"))}this.updateFriendPageUI();var l=c.one("#"+this.get("modId")).ancestor(".socialchrome-grid",true,"yog-16u");this.set("srcNode",l)},bindUI:function(){c.after("scbase:fb_status_login",c.bind(this.syncUI,this),this);c.after("scbase:fb_status_logout",c.bind(this._renderLoggedOut,this),this);c.after("scbase:fb_auth_login",c.bind(this.syncUI,this),this);c.after("scbase:fb_auth_logout",c.bind(this._renderLoggedOut,this),this);c.after("scbase:fb_status_not_authorized",c.bind(this._renderLoggedOut,this),this);c.after("ysc_friends:names_ready",c.bind(this.replace_names,this));c.after("scbase:fb_status_timeout",function(f){if(this.get("isPreLoad")===1){this.syncUI()}else{c.fire("ysc_friends:show_promobar_by_fb_timeout");this._renderLoggedOut()}},this);this.CONF.after("optin_statusChange",function(g){var h=g.prevVal,f=c.one("#"+this.get("modId"));if("true"===h){f.one("ul").replaceClass("waken","sleep")}else{f.one("ul").replaceClass("sleep","waken")}},this);this.bind_friendevents()},syncUI:function(){var h=null,e=(this.get("numFriends")===null)?0:this.get("numFriends"),f=this.get("pageSize"),g=c.one("#"+this.get("modId"));if(this._loading){this._renderLoading();return}if(this.get("isPreLoad")===0){this.loadFriends()}else{if(this.CONF.get("optin_status")=="true"){g.one("ul").replaceClass("sleep","waken")}else{g.one("ul").replaceClass("waken","sleep")}if(this.get("friendbarRollup")=="0"||(this.get("friendbarRollup")!=="0"&&e<5)){h=e>f-1?f*52:(e>0?(e+1)*52:5*52)}else{if(this.get("friendbarRollup")!=="0"&&e>4){h=e>f-2?f*52:(e>0?(e+2)*52:5*52)}}this._bd_sv.setStyle("width",h+"px");this.loadProfileFace()}if(this.get("srcNode").hasClass("loggedout")){this.get("srcNode").removeClass("loggedout")}if(typeof MediaPerfTiming=="object"){MediaPerfTiming.endTimer("MediaSocialChromeFriends","FriendsBar_Preload").done("MediaSocialChromeFriends")}},loadProfileFace:function(){var h=this,f=this.get("friendIdList"),g=this.page_index*this.get("pageSize"),e=g+this.get("pageSize");if(typeof this._bd_sv_ul.getData("done")==="undefined"){this._bd_sv_ul.setData("done",0)}FB.api("/fql?q="+encodeURIComponent("SELECT uid, pic_square FROM user WHERE uid in("+f.join(",")+")"),function(q){var k=0,o={},n=f.length;if(q.data.length>0){for(k=0;k<n;k++){o[q.data[k].uid]=q.data[k].pic_square}}for(k=g;k<n;k++){if(k>=e||h._bd_sv_ul.getData("done")>=h.page_index){break}var l=f[k],m=h._bd_sv_ul.one(".face-"+l),p=o[l]?o[l]:"";if(typeof m==="object"&&m.get("src")!==p){m.set("src",p)}}if(h._bd_sv_ul.getData("done")<h.page_index){h._bd_sv_ul.setData("done",h.page_index)}})},_renderLoggedOut:function(){this.set("isPreLoad",0);this.get("srcNode").removeClass("loading");this.get("srcNode").addClass("loggedout");this._bd_sv_ul.setContent("").setStyle("left","0");this._bd_sv_ul.setData("done",-1);this._hd_pg.setStyle("display","none");this.page_index=0;this.updateFriendPageUI();var f=this._bd_sv||false;if(f){f.setStyle("width","auto")}var e=this.get("srcNode").one(".yom-socialchrome-mostshared");if(e){e.setContent("");e.setStyle("display","none")}if(this.node_historylayer){this.node_historylayer.get("parentNode").removeChild(this.node_historylayer);this.node_historylayer=null;this.friendlayer.destroy(true);this.friendlayer=null}},_renderLoading:function(){this.updateFriendPageUI()},_clearState:function(){this._loading=false},loadFriends:function(){var f=null,h="",e=0,k=this;if(this._loading){return}f=this.getSession();if(!f){this._clearState();return}this._loading=true;this._renderLoading();h="&user_id="+this.CONF.get("fbuid")+"&limit=250";h=this.CONF.get("XHR").GET_FRIENDS+h;var g=function(o,n,l){if(1<l.retry){k._renderFriends({data:{friends:[]}});k._clearState();return}if(typeof n=="object"&&n.responseText!==""){try{oRes=c.JSON.parse(n.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,""));if(oRes.info.http_code=="202"){c.io(h,{on:{success:g,failure:k._loadFriends_ioHandler_fail},arguments:{retry:e++}})}else{k._loadFriends_ioHandler_success(o,n)}}catch(m){k._renderFriends({data:{friends:[]}});k._clearState()}}};c.io(h,{on:{success:g,failure:this._loadFriends_ioHandler_fail},arguments:{retry:e++}})},_loadFriends_ioHandler_success:function(m,l){var h="",g={},f=null;if(!this._loading){this._loadFriends_ioHandler_fail(null,null)}this._loading=false;try{h=l.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");h=c.JSON.parse(h);if(h&&h.status&&h.data&&h.data.friends){this._renderFriends(h)}else{this._loadFriends_ioHandler_fail(null,null)}return}catch(k){this._loadFriends_ioHandler_fail(null,null)}this._clearState()},_loadFriends_ioHandler_fail:function(f,e){this._renderFriends({data:{friends:[]}});this._clearState()},_renderFriends:function(x){if(this._bd.hasClass("loggedout")){return}var p=this,r=x.data.friends,q=r.length,m=this.get("pageSize");if(typeof this.page_index==="undefined"){this.page_index=0}if(location.href.indexOf("scf=")>-1){var g=parseInt(location.href.split("scf=")[1].split("&")[0]);q=(q>g)?g*1:q*1}var t=[],n="",f="",h="";var w=function(z){h=['<li class="js-thumb">','<span class="invite">','<a href="#" class="js-invite-thumb" title="',p.getTranslation(p.l10n.INVITE_FRIENDS),'" ','role="button" data=\'{"pos":"',z,'"}\' tabindex="0">','<span class="action" role="button" tabindex="0">',p.getTranslation(p.l10n.INVITE_FRIENDS),"</span>","</a>","</span>","</li>"].join("");return h};var e=function(z){f=['<li class="js-thumb js-rollup-thumb">','<span class="rollup">','<a href="#" class="js-rollup-thumb" ','role="button" data=\'{"pos":"',z,'"}\' tabindex="0">',"</a>","</span>","</li>"].join("");return f};if(q>0){if(q>m){this._hd_pg.setStyle("display","block")}var l=[];for(i=0,j=q;i<j;i++){var k=r[i].fbid;var y=(this.page_index==0&&i<m)?r[i].pic_square:"http://l.yimg.com/os/mit/media/m/base/images/transparent-95031.png";var v="js-thumb "+((i%m===0)?this.CLASSNAMES.pagemark:"");t[t.length]='<li class="'+v+'"><span><a class="fb-'+k+'" href="#" tabindex="0"><img width="50" height="50" src="'+y+'" class="face-'+k+'" alt="'+this.getTranslation(this.l10n.ALT_TEXT_ON_FRIEND_PROFILE_IMAGE,r[i].name,[r[i].name])+'"/></a></span></li>';l[i]=k}this.set("friendIdList",l);this.set("numFriends",q);this.CONF.set("numFriends",q)}else{n='<li class="js-thumb btn-invite js-button"><div class="plate"><a href="#" class="ysc-btn-cta js-invite shownlast" role="button" tabindex="0">'+this.getTranslation(this.l10n.INVITE_FRIENDS)+"</a></div></li>"}if(p.get("friendbarRollup")!=="0"&&q>4){this._bd_sv_ul.setContent(e(1)+t.join("")+w(q+2)+n);this.loadProfileFace();var o=q>m-2?m*52:(q>0?(q+2)*52:5*52);this._bd_sv.setStyle("width",o+"px")}else{this._bd_sv_ul.setContent(t.join("")+w(q+1)+n);this.loadProfileFace();var o=q>m-1?m*52:(q>0?(q+1)*52:5*52);this._bd_sv.setStyle("width",o+"px")}var u="wide",s=false;if(this.get("listType")==="videos"||this.get("listType")==="games"){if(q<5){u="wide";s=true}}else{if(q<7&&this.get("friendbarRollup")==="0"){u=(q>4)?"narrow":"wide";s=true}else{if(q<6&&this.get("friendbarRollup")!=="0"){u=(q>4)?"narrow":"wide";s=true}}}if(s){new c.Media.SocialChrome.MostShared({moduleConf:YAHOO.Media.Facebook.ModuleConf,layout:u,listType:this.get("listType"),cid:this.pagedata.cid,spaceid:this.pagedata.spaceid,csrcpvid:this.CONF.get("csrcpvid")})}else{this.get("srcNode").all(".yom-socialchrome-mostshared").setStyle("display","none")}this.page_index=0;this.get("srcNode").removeClass("loading");this.updateFriendPageUI();if(typeof MediaPerfTiming=="object"){MediaPerfTiming.endTimer("MediaSocialChromeFriends","FriendsBar_Postload").done("MediaSocialChromeFriends")}},bind_friendevents:function(){var g=this;var f=function(k){var h=k.currentTarget;if(!h.hasClass("js-thumb")){return}k.halt();if(this.hovertimer){a.clearTimeout(this.hovertimer)}if(this.active_hover&&h.hasClass("active")){this.active_hover=false;return}this.active_hover=false;this.execute_list_click(h)};if(!this.is_friendevents){if("1"!==this.CONF.get("SWITCHES")._enable_odl_dropdown){this._bd_sv_ul.delegate("click",f,"li.js-thumb",this,true);if(navigator.appVersion.search("Chrome")>0){this._bd_sv_ul.delegate("keypress",f,"li.js-thumb",this)}if(this.hover_pause>0){this._bd_sv_ul.on("mouseover",this.handle_hover,this,{type:"thumb",state:true});this._bd_sv_ul.on("mouseout",this.handle_hover,this,{type:"thumb",state:false})}}this.assign_hide_events("history",this.hideHistory,this);this.assign_hide_events("invite_panel",this.hide_invite_panel,this);var e=new c.Anim({node:this._bd_sv_ul,duration:0.5,easing:c.Easing.easeOut});this._hd_pg.on("click",c.bind(this.scrollPage,this));e.on("end",c.bind(this.updateFriendPageUI,this));this.page_anim=e;c.after("scbase:cue_exist",function(h){this.renderFriendCue()},this);this.is_friendevents=true}},hideHistory:function(){if(this.xhr_activity&&this.xhr_activity.isInProgress()){this.xhr_activity.abort()}if(typeof this.selectedfid==="undefined"||!this.selectedfid){return}this.selectedfriend.removeClass("active");c.one("#ysc-history-"+this.selectedfid).removeClass("active");this.selectedfid=null;this.selectedfriend=null;this.friendlayer.hide();if(this.hover_pause>0){this.active_hover=true}},prepare_contentbox:function(e){var H=c.one("#ysc-history-"+this.selectedfid);var u=c.one("#ysc-history-"+this.newlyselectedfid);var l=this,G=0,F=0,X=1,D,P=5,f,B,U,v,Z,J,o,S,k,E=e,W,aa,z,y=0,Q=[],L,K;if(typeof this.caches==="undefined"){this.caches={}}var V=this.newlyselectedfid+"&limit=5&show_deleted=0";var M="&space_id="+this.pagedata.spaceid+"&content_id="+this.pagedata.cid+"&network_source=fb&itc=0&section=fbar-actvmnu";if(!u){u=c.Node.create('<div id="ysc-history-'+this.newlyselectedfid+'" class="history-content" role="dialog" aria-label="friend activity"></div>');this.friendhistorybox.appendChild(u)}if(H){H.removeClass("active")}var p=(this.CONF.get("optin_status")==="true")?"on":"off";if(!u.hasClass("isloaded-"+p)){u.setContent("")}else{this.replace_names({fid:this.newlyselectedfid})}u.addClass("active");var Y=false;var w=false;var O=function(){u.one(".btn-invite a.js-invite")?Y=true:"";u.one("p.title")?w=true:"";if(l.friendlayer.get("visible")){if(Y){u.one(".btn-invite a").focus()}else{if(!w){u.one(".thumb img").focus()}}}};var g=function(ab){if(ab.keyCode=="27"){q()}else{if((ab.keyCode=="13")&&(ab.target.hasClass("shownlast"))&&(!ab.target.hasClass("js-invite"))){a.setTimeout(function(ac){q()},500)}else{if((ab.target.hasClass("shownlast"))&&ab.keyCode=="9"){if(Y){ab.preventDefault();u.one(".btn-invite a").focus()}else{ab.preventDefault();u.one(".thumb img").focus()}}}}};var q=function(){l.hideHistory();if(Y){E.one(".js-invite-thumb").focus()}else{E.one("a").setAttribute("tabindex","0");E.one("a").focus()}};u.detachAll();u.delegate("keydown",g,".yom-mod",l);var R=function(af){var ae=af.currentTarget,ad,ag=c.one("#ysc-history--2");if(ag.one(".rollup-tab-wrap span.active")){var ac=c.JSON.parse(ag.one(".rollup-tab-wrap span.active").getAttribute("data"));if(ac.context==="*"){ad="all"}else{ad=ac.context.split(".")[1]}}else{ad="all"}af.preventDefault();var ab={ltxt:null,_S:l.pagedata.spaceid,ltc:"1",sec:"fbar-actvru",slk:"btn",scat:ad,csrcpvid:l.CONF.get("csrcpvid")};if(ae.hasClass("btn-next")&&c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ad+".index-"+(y+1))){ab.ltxt="ne";y+=1;c.all("#ysc-history--2 div.yom-mod .rollup-list").removeClass("active");c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ad+".index-"+y).addClass("active");W.set("innerHTML",(y*5+1)+" - "+(y*5+5));aa.removeClass("selected").removeClass("btn-prev-off").addClass("pager").addClass("btn-prev");aa.one("> span").removeClass("icon-arrow-prev-2").addClass("icon-arrow-prev-1");if(!c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ad+".index-"+(y+1))){z.removeClass("pager").removeClass("btn-next").addClass("selected").addClass("btn-next-off");z.one("> span").removeClass("icon-arrow-next-1").addClass("icon-arrow-next-2")}}else{if(ae.hasClass("btn-prev")&&c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ad+".index-"+(y-1))){ab.ltxt="pr";y-=1;c.all("#ysc-history--2 div.yom-mod .rollup-list").removeClass("active");c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ad+".index-"+y).addClass("active");W.set("innerHTML",(y*5+1)+" - "+(y*5+5));z.removeClass("selected").removeClass("btn-next-off").addClass("pager").addClass("btn-next");z.one("> span").removeClass("icon-arrow-next-2").addClass("icon-arrow-next-1");if(!c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ad+".index-"+(y-1))){aa.removeClass("pager").removeClass("btn-prev").addClass("selected").addClass("btn-prev-off");aa.one("> span").removeClass("icon-arrow-prev-1").addClass("icon-arrow-prev-2")}}}l.fire_click_beacon(ab)};var I=function(ae){ae.preventDefault();var ag,ab;var af=ae.currentTarget;var aj=af.one(".rollup-more-inner");var ai=function(){var ak={csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"most_popular",itc:"1",slk:"othrsrd"};if(l.rollup_ids&&l.rollup_ids.length>1){l.run_plus_others(ae,l.rollup_ids,l.unames,ak)}};var ah=af.ancestor("li",false,"ul");if(ah){var ad="readactivity";if(ah.hasClass("video_list_item")){ad="watch"}else{if(ah.hasClass("poll")){ad="poll"}}contentdata=c.JSON.parse(ah.getAttribute("data"));ag={fn:l.CONF.get("page_type"),callback:ai,publish:true,user_id:l.CONF.get("fbuid"),uuids:contentdata.pkg,data_obj:{}};var ac=[l.CONF.get("XHR").GET_FRIENDS_STORY,"&user_id=",ag.user_id,"&type=",ad,"&content_id=",contentdata.pkg].join("");l.fetch_friends_batch_story(ag,ac)}};var x=function(ag,ac){var af,ab;if(ag.error_html){if(c.one(".rollup-list.active")){ab=c.one(".rollup-list.active");ab.removeClass("active")}K.replaceClass("loading","err");if(!L){L=c.Node.create(ag.error_html);K.prepend(L);K.on("click",function(ai){ai.halt();var ah=ai.target;if(ah.hasClass("js-retry")){K.replaceClass("err","loading");m(ac)}if(ah.hasClass("js-back")){if(ab){ab.addClass("active");K.removeClass("err")}else{K.replaceClass("err","loading");m(ac)}}})}}if(ag.html){K.removeClass("loading");y=0;W.set("innerHTML",(y*5+1)+" - "+(y*5+5));if(ac.context==="*"){af="all"}else{af=ac.context.split(".")[1]}for(var ae=0;ae<=ag.html.length;ae++){rollup_bd.appendChild(ag.html[ae]);var ad=rollup_bd.get("lastChild");ad.addClass("js-rollup-content-list-"+af);if(!ad.hasClass("rollup-list")){ad.addClass("rollup-list")}if(ad.hasClass("index-0")||ad.hasClass("ft")){Q[Q.length]=af;Q[Q.length]=ad;if(rollup_menu.one(".rollup-list.active")){rollup_menu.one(".rollup-list.active").removeClass("active")}ad.addClass("active");rollup_bd.removeClass("loading")}}if(aa&&z){if(ag.html.length>1){aa.removeClass("pager").removeClass("btn-prev").addClass("selected").addClass("btn-prev-off");aa.one("> span").removeClass("icon-arrow-prev-1").addClass("icon-arrow-prev-2");z.removeClass("selected").removeClass("btn-next-off").addClass("pager").addClass("btn-next");z.one("> span").removeClass("icon-arrow-next-2").addClass("icon-arrow-next-1")}else{aa.removeClass("pager").removeClass("btn-prev").addClass("selected").addClass("btn-prev-off");aa.one("> span").removeClass("icon-arrow-prev-1").addClass("icon-arrow-prev-2");z.removeClass("pager").removeClass("btn-next").addClass("selected").addClass("btn-next-off");z.one("> span").removeClass("icon-arrow-next-1").addClass("icon-arrow-next-2")}}rollup_menu.delegate("click",function(ak){var ai=c.JSON.parse(ak.target.getAttribute("data"));var aj=ak.currentTarget.ancestor("li",false,"ul"),ah={axid:ai.userid,_S:l.pagedata.spaceid,ltc:"1",sec:"fbar-actvru",slk:"thumb",csrcpvid:l.CONF.get("csrcpvid"),pkg:null,ct:null,pos:null};if(aj){contentdata=c.JSON.parse(aj.getAttribute("data"));ah.pos=contentdata.pos;ah.ct=contentdata.ct;ah.pkg=contentdata.pkg}l.fire_click_beacon(ah);n(ak)},"span.rollup-thumb img");rollup_menu.delegate("click",function(an,al,aj){an.preventDefault();var am=an.currentTarget;var ah=am.one(".rollup-more-inner");var ai={csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actvru",slk:"plus",itc:"1",ltxt:ah.getContent(),ct:null,pkg:null,pos:null};var ak=am.ancestor("li",false,"ul");if(ak){contentdata=c.JSON.parse(ak.getAttribute("data"));ai.pos=contentdata.pos;ai.ct=contentdata.ct;ai.pkg=contentdata.pkg}l.fire_click_beacon(ai);if(l.lightweight){l.lightweight.hide()}I(an)},"div.rollup-more")}if(rollup_menu.one(".hd").getStyle("display")==="none"){rollup_menu.one(".hd").show()}};var n=function(ad){if(ad.type!="click"&&!(ad.type=="keydown"&&ad.keyCode=="13")){return}if(ad.currentTarget.get("parentNode").hasClass("rollup-thumb")){var ae=c.JSON.parse(ad.currentTarget.getAttribute("data"));l.unames["uid_"+ae.userid]=ae.username}ad.preventDefault();if(l.CONF.get("optin_status")==="true"){l.hideHistory();if(l.plusothers){l.plusothers.hide()}l.run_lightweight(ad)}else{return false}var ac=l.getUserData(ad);if(ad.currentTarget.get("parentNode").hasClass("name")){var ab={csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actvmnu",slk:"user",itc:"1",axid:ac.userid};l.fire_click_beacon(ab)}else{if(ad.currentTarget.hasClass("thumb")){l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actvmnu",slk:"thumb",itc:"1",axid:ac.userid})}}};var t=function(ac,ai){u.all(".bd .err").remove(true);if(ac.error_html){var ab=u.one(".bd"),ag=ab.prepend(ac.error_html).one(".err");G--;ag.setStyles({width:ab.getStyle("width"),height:ab.getStyle("height")});ag.on("click",function(am){am.halt();var al=am.target;if(al.hasClass("js-retry")){ag.addClass("err-loading");r(ai)}if(al.hasClass("js-back")){ag.remove(true)}});return}u.setContent(ac.html);O();FB.api("/"+ai.fid+"?fields=id,name",function(al){var am=al.name.replace(/'/g,"&#39;");l.unames["uid_"+ai.fid]=am;c.fire("ysc_friends:names_ready",{fid:ai.fid})});var ah=ai.page,af=ai.fid;var ae=function(ar){ar.halt();l.active_hover=false;if(l.xhr_activity.id>=0&&l.xhr_activity.isInProgress()){return}var aq=ar.currentTarget,al=aq.get("href").split("#")[1],am=aq.get("className").match(/(btn\-prev|btn\-next)\s*/)[1],an="";var ap=c.one("#ysc-history-"+af+" .bd");switch(am){case"btn-prev":G--;l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",itc:"1",ltxt:"pr"});var ao=[V,al,M,"&template=friend_activity","&render_optin_status=",l.CONF.get("optin_status"),"&general_title_length=",l.CONF.get("general_title_length"),"&rating_title_length=",l.CONF.get("rating_title_length"),"&video_title_length=",l.CONF.get("video_title_length"),"&render_pagesize=",P,"&render_pageindex=",G].join("");r({fid:l.newlyselectedfid,step:"-1",uri:ao,index:G});break;case"btn-next":G++;l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",itc:"1",ltxt:"ne"});var ao=[V,al,M,"&template=friend_activity","&render_optin_status=",l.CONF.get("optin_status"),"&general_title_length=",l.CONF.get("general_title_length"),"&rating_title_length=",l.CONF.get("rating_title_length"),"&video_title_length=",l.CONF.get("video_title_length"),"&render_pagesize=",P,"&render_pageindex=",G].join("");r({fid:l.newlyselectedfid,step:"1",uri:ao,index:G});break;default:break}};var aj=c.one("#ysc-history-"+af+" .paginator");if(aj){aj.all("a.pager").on("click",ae);aj.all("a.selected").on("click",function(al){al.halt()})}if(!l.islayerevents){l.node_historylayer.delegate("click",n,".thumb img,.name a");l.node_historylayer.delegate("keydown",n,".thumb img");l.islayerevents=true}var ak=(l.CONF.get("optin_status")==="true")?"off":"on";var ad=(ak==="off")?"on":"off";u.replaceClass("isloaded-"+ak,"isloaded-"+ad)};var A=function(ai){var ae="",ag="",ac,ab,af,al,ak=c.one("#ysc-history--2");ac=c.one(".rollup-tab-wrap").one("span.active");ab=ak.one(".rollup-list.active");af=c.JSON.parse(ac.getAttribute("data"));if(af.context==="*"){ag="all"}else{ag=af.context.split(".")[1]}ac.removeClass("active");ai.currentTarget.addClass("active");if(K.hasClass("err")){K.removeClass("err")}al=c.JSON.parse(ai.currentTarget.getAttribute("data"));if(al.context==="*"){ae="all"}else{ae=al.context.split(".")[1]}var ad={csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actvru",slk:"filter",itc:"1",tcat:ae};l.fire_click_beacon(ad);if(!c.one(".js-rollup-content-list-"+ae)){var aj=(l.CONF.get("optin_status")==="true")?20:1;K.addClass("loading");m({limit:aj,template:"popular_content",render_friendsize:2,render_pagesize:5,context:al.context,retry:0})}for(var ah=0;ah<Q.length;ah++){if(Q[ah]===ae){if(ak.one(".rollup-list.active")){ak.one(".rollup-list.active").removeClass("active")}if(K.hasClass("err")){K.removeClass("err")}Q[ah+1].addClass("active");if(Q.length===0){y=0}else{y=parseInt(Q[ah+1].getAttribute("className").split(" ")[0].split("-")[1])}W.set("innerHTML",(y*5+1)+" - "+(y*5+5));if(c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ae+".index-"+(y+1))){z.removeClass("selected").removeClass("btn-next-off").addClass("pager").addClass("btn-next");z.one("> span").removeClass("icon-arrow-next-2").addClass("icon-arrow-next-1")}else{z.removeClass("pager").removeClass("btn-next").addClass("selected").addClass("btn-next-off");z.one("> span").removeClass("icon-arrow-next-1").addClass("icon-arrow-next-2")}if(c.one("#ysc-history--2 div.yom-mod .js-rollup-content-list-"+ae+".index-"+(y-1))){aa.removeClass("selected").removeClass("btn-prev-off").addClass("pager").addClass("btn-prev");aa.one("> span").removeClass("icon-arrow-prev-2").addClass("icon-arrow-prev-1")}else{aa.removeClass("pager").removeClass("btn-prev").addClass("selected").addClass("btn-prev-off");aa.one("> span").removeClass("icon-arrow-prev-1").addClass("icon-arrow-prev-2")}}if(Q[ah]===ag){Q[ah+1]=ab}}};var h=function(ac){var ab=ac.limit,ad="";if(l.xhr_rollup_source&&l.xhr_rollup_source.isInProgress()){l.xhr_rollup_source.abort()}ad=[l.CONF.get("XHR").GET_POPULAR_SOURCE,"&user_id=",l.CONF.get("fbuid"),"&limit=",ab,"&template=popular_sources"].join("");l.xhr_rollup_source=c.io(ad,{on:{success:function(ai,ah){var ae=ah.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");try{ae=c.JSON.parse(ae)}catch(ag){l.log("invalid json data")}if(typeof ae.error_html==="undefined"){l.caches["history_"+ac.fid+"_"+ac.index]=ae}if(ae.info.http_code===202&&ac.retry===0){ac.retry=1;setTimeout(function(){h(ac)},1000);return}if(ae.html){var af=c.one(".rollup-tab-wrap");af.append(ae.html);af.show();af.delegate("click",A,"span.js-source-tabs",this,true)}},failure:function(af,ae){l.log("failure in fetching rollup list source. Please try again")}},context:l})};var m=function(ac){var ab=ac.limit,ag=ac.template,af=ac.render_friendsize,ai=ac.render_pagesize,ae=ac.context,ah="";ah=[l.CONF.get("XHR").GET_POPULAR,"&template=",ag,"&limit=",ab,"&render_optin_status=",l.CONF.get("optin_status"),"&user_id=",l.CONF.get("fbuid"),"&network_source=fb&section=fbar-actvru&itc=0","&content_id=",l.pagedata.cid,"&source=",ae,"&space_id=",l.pagedata.spaceid,"&render_pagesize=",ai,"&render_friendsize=",af].join("");if(l.xhr_rollup&&l.xhr_rollup.isInProgress()){l.xhr_rollup.abort()}var ad=function(){l.xhr_rollup=c.io(ah,{on:{success:function(am,al){var aj=al.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");try{aj=c.JSON.parse(aj)}catch(ak){l.log("invalid json data")}if(typeof aj.error_html==="undefined"){l.caches["history_"+ac.fid+"_"+ac.index]=aj}if(aj.info.http_code===202&&ac.retry===0){ac.retry=1;setTimeout(function(){m(ac)},1000);return}x(aj,ac)},failure:function(ak,aj){l.log("failure in fetching rollup list. Please try again")}},context:l})};l.fetch_popular_content=ad;l.validate_fetch(l.fetch_popular_content)};var r=function(ah){var ae=ah.step,af=ah.fid,ab=ah.uri,ac=ah.step,aj=ah.invitethumb;if((ae===null)&&l.xhr_activity&&l.xhr_activity.isInProgress()){l.xhr_activity.abort()}var ad="history_"+ah.fid+"_"+ah.index;var ag=l.caches[ad];if(typeof ag!=="undefined"&&aj){t(ag,ah);return}var ai=function(){l.xhr_activity=c.io(l.CONF.get("XHR").GET_ACTIVITY+ab,{on:{success:function(an,am){var ak=am.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");try{ak=c.JSON.parse(ak)}catch(al){l.log("invalid json data")}if(typeof ak.error_html==="undefined"){l.caches["history_"+ah.fid+"_"+ah.index]=ak}t(ak,ah)},failure:function(al,ak){l.log("failure in fetching friend history. Please try again")}},context:l})};l.fetch_activity=ai;l.validate_fetch(l.fetch_activity)};var N=function(ae){var ac=l.getTranslation(l.l10n.HEADER_SEE_FRIENDS_READING);var af='<div class="yom-mod cold-invite"><div class="hd"><h4>'+ac+"</h4><p>"+l.getTranslation(l.l10n.MSG_INVITE_TO_JOIN,"",[l.get("property")])+'</p></div><div class="bd"><iframe src="http://www.facebook.com/plugins/facepile.php?app_id='+l.CONF.get("APP_ID")+'&max_rows=1" scrolling="no" frameborder="0" style="border:none; height:70px;overflow:hidden; width:500px;" allowTransparency="true"></iframe></div><div class="ft"><span class="btn-invite"><a href="#" class="js-invite ysc-btn-cta shownlast" role="button" tabindex="0">'+l.getTranslation(l.l10n.INVITE_FRIENDS)+"</a></span></div>";u.setContent(af);O();FB.XFBML.parse(c.Node.getDOMNode(c.one("#ysc-history--1")));var ag=(l.CONF.get("optin_status")==="true")?"off":"on";var ab=(ag==="off")?"on":"off";u.replaceClass("isloaded-"+ag,"isloaded-"+ab);var ad=l.newlyselectedfriend.one(".js-invite-thumb").getAttribute("data");ad=c.JSON.parse(ad);l.fire_click_beacon({csrcpvid:l.CONF.get("csrcpvid"),_S:l.pagedata.spaceid,sec:"fbar-actv",slk:"sil",pos:ad.pos,itc:"1"})};var s=function(ad){var ac=l.getTranslation(l.l10n.MOST_SHARED_YOUR_FRIENDS),ai=l.getTranslation(l.l10n.BTN_PREV),ag=l.getTranslation(l.l10n.BTN_NEXT);var ae=['<div class="yom-mod">','<div class="hd clearfix" style="display:none;">','<div class="brief">','<p class="title">',ac,"</p>","</div>",'<div class="paginator rollup-paginator">','<span class="page">1 - 5</span>','<a href="#" class="yom-button btn-prev-off selected" role="button" disabled="disabled">','<span class="icon btn-prev-off icon-arrow-prev-2">',ai,"</span>","</a>",'<a href="#" class="yom-button btn-next-off selected" role="button">','<span class="icon btn-next icon-arrow-next-2">',ag,"</span>","</a>","</div>",'<div class="rollup-tab-wrap" style="display: none;"></div>',"</div>",'<div class="bd list"><div class="transition loading"></div></div>',"</div>"].join("");u.setContent(ae);O();rollup_menu=c.one("#ysc-history--2 div.yom-mod"),y=rollup_menu.one(".paginator");W=rollup_menu.one(".paginator .page"),aa=rollup_menu.one(".paginator :first-child + a"),z=rollup_menu.one(".paginator :first-child + a + a"),rollup_bd=rollup_menu.one(".bd.list"),K=rollup_bd.one(".transition");y.delegate("click",R,"> a",this,true);var ah=(l.CONF.get("optin_status")==="true")?20:1;m({limit:ah,template:"popular_content",render_friendsize:2,render_pagesize:5,context:"*",retry:0});if(l.get("friendbarRollup")==="2"&&l.CONF.get("optin_status")=="true"){h({limit:3,retry:0})}var af=(l.CONF.get("optin_status")==="true")?"off":"on";var ab=(af==="off")?"on":"off";u.replaceClass("isloaded-"+af,"isloaded-"+ab)};var C=(this.CONF.get("optin_status")==="true")?"on":"off";if(!u.hasClass("isloaded-"+C)&&this.newlyselectedfid){if(this.newlyselectedfriend.one(".js-invite-thumb")){N()}else{if(this.newlyselectedfriend.one(".js-rollup-thumb")){s()}else{var T={fid:this.newlyselectedfid,step:null,uri:[V,M,"&template=friend_activity","&render_optin_status=",l.CONF.get("optin_status"),"&general_title_length=",l.CONF.get("general_title_length"),"&rating_title_length=",l.CONF.get("rating_title_length"),"&video_title_length=",l.CONF.get("video_title_length"),"&render_pagesize=",P,"&render_pageindex=",G].join(""),index:G,invitethumb:(this.newlyselectedfriend.one(".js-invite-thumb"))};r(T)}}}else{O()}},prepare_overlay:function(e){if(!this.node_historylayer){this.node_historylayer=c.Node.create('<div class="yom-primary layer-sc-activity"></div>');c.one(document.body).appendChild(this.node_historylayer);if(this.hover_pause>0){this.node_historylayer.on("mouseover",this.handle_hover,this,{type:"overlay",state:true});this.node_historylayer.on("mouseout",this.handle_hover,this,{type:"overlay",state:false})}}if(!this.friendlayer){this.friendlayer=new c.Overlay({headerContent:'<div class="header-wrap"><div class="history-head"></div></div>',bodyContent:'<div class="content-wrap loading"></div>',width:"550px",shim:true,zIndex:10000650});this.friendlayer.hide();this.friendlayer.render(this.node_historylayer);this.friendhistorybox=this.node_historylayer.one(".content-wrap");this.node_historylayer.on("click",function(h){h.stopPropagation();var f=h.target;if(f.get("id")==="ysc-btn-startsharing"){h.preventDefault();var g="fbar-actvmnu";if(f.hasClass("js-rollup")){g="fbar-actvru"}this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:g,slk:"btn",ltxt:"startsharing",itc:"1"});c.fire("ysc_friends:start_sharing");this.friendlayer.hide()}if(f.hasClass("js-invite")){h.preventDefault();this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actvmnu",slk:"btn",ltxt:"invite",itc:"1"});this.display_invite_panel(this.get("property"),this.get("learnMorePath"));this.friendlayer.hide()}},this,true)}},handle_hover:function(n,p){var k=this,q=p.type,f=p.state,o=null,g=null,l=null,h=this.hover_pause;if(!this.active_hover){return}if(this.hovertimer){a.clearTimeout(this.hovertimer)}var m=function(){if(o){if(o.get("tagName")==="IMG"){l=(o.one("a").get("className")).match(/fb-(.+)/)[1].split(" ")[0];if(k.selectedfid&&k.selectedfid===l){return}}else{if(o.hasClass("js-thumb")&&o.hasClass("active")){return}}k.execute_list_click(o)}else{k.hideHistory()}};if(q==="thumb"){o=f?n.target:null;if(f&&(o.get("tagName")==="IMG"||o.get("className")==="js-rollup-thumb")&&o.ancestor("li.js-thumb")){o=o.ancestor("li.js-thumb")}else{o=null}}else{if(this.selectedfid){g=this.selectedfriend}o=f&&g?g:null}this.hovertimer=a.setTimeout(m,h,o)},execute_list_click:function(h){var l=h,p="-1";this.hide_other_layers("history");if(this.checkCookieCue()){c.fire("scbase:cue_remove")}if(this.invitelayer){this.invitelayer.hide()}if(l.one(".js-invite")){this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"btn",ltxt:"invite",itc:"1"});this.display_invite_panel(this.get("property"),this.get("learnMorePath"));return}if(!l.one("a").hasClass("js-invite-thumb")){if(l.one("a").hasClass("js-rollup-thumb")){p="-2"}else{p=(l.one("a").get("className")).match(/fb-(.+)/)[1].split(" ")[0]}}this.prepare_overlay();var f,g,r=l.get("parentNode").get("children"),e=r.size();if(l.one("span.invite")){f={pos:e,_S:this.pagedata.spaceid,ltc:"1",sec:"fbar-actv",slk:"sil",csrcpvid:this.CONF.get("csrcpvid")}}else{if(l.one("span.rollup")){f={pos:"1",_S:this.pagedata.spaceid,ltc:"1",sec:"fbar-actv",slk:"rollup",csrcpvid:this.CONF.get("csrcpvid")}}else{for(g=0;g<e;g++){if(r.item(g)===l){break}}var o=l.one("a");f={pos:g+1,_S:this.pagedata.spaceid,ltc:"1",sec:"fbar-actv",slk:"thumb",axid:o.get("className").substring(3),csrcpvid:this.CONF.get("csrcpvid")}}}if(this.selecedfriend===null||this.selectedfid!==p){this.fire_click_beacon(f)}if(this.selectedfid){this.selectedfriend.removeClass("active");if(this.selectedfid&&this.selectedfid===p){this.hideHistory();return}}this.newlyselectedfid=p;this.newlyselectedfriend=l;this.newlyselectedfriend.addClass("active");var s=[l.getX()-25,(l.getY())+52],m=this._bd.get("region"),k="",q=this.node_historylayer.one(".header-wrap");if(YUI.namespace("Media").LANGDIR=="rtl"){if(s[0]+550>m.right+25){k=m.right-525}else{k=s[0]}this.friendlayer.move([k,(l.getY())+50]);q.setXY([(l.getX())-20,(l.getY())-10])}else{if(s[0]+550>m.right+25){k=m.right-525;if(k<m.left-25){k=m.left-25}}else{k=s[0]}this.friendlayer.move([k,(l.getY())+50]);q.setXY([(l.getX())-20,(l.getY())-20])}this.friendlayer.show();if(this.newlyselectedfid){this.prepare_contentbox(h);this.selectedfid=this.newlyselectedfid;this.selectedfriend=this.newlyselectedfriend}else{this.selectedfid=null;this.selectedfriend=null}},scrollPage:function(l){if(this.in_scroll){return}var k=l.target,f=this.page_index,g=this.get("pageSize"),h=this.page_anim,m=0;if(k.hasClass("btn-next")){this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"btn",itc:"1",ltxt:"ne"});f=f+1}else{if(k.hasClass("btn-prev")){this.fire_click_beacon({csrcpvid:this.CONF.get("csrcpvid"),_S:this.pagedata.spaceid,sec:"fbar-actv",slk:"btn",itc:"1",ltxt:"pr"});f=f-1}else{return}}m=0-(f*52*g);this.page_index=f;if(YUI.namespace("Media").LANGDIR=="rtl"){m=m*-1}if(c.UA.ie>0){this._bd_sv_ul.setStyle("left",m+"px")}else{this.page_anim.set("to",{left:m+"px"})}this.loadProfileFace();this.in_scroll=true;this.page_anim.run()},updateFriendPageUI:function(){var f=this.get("pageSize"),e=this.get("numFriends"),g=Math.ceil(e/f);shown_total=(this.total_page>this.page_index+1)?f:e%f;data={index_page:this.page_index,total_page:g,total_count:e,shown_total:shown_total,page_text:this._hd_pg_text,page_prev:this._hd_pg_prev,page_next:this._hd_pg_next,icon_prev:this._hd_ic_prev,icon_next:this._hd_ic_next,page_size:f,range_all:true};this.update_page_ui(data);this.in_scroll=false},replace_names:function(m){var n=m.fid;if(n==="-1"||n==="-2"){return}var l=c.one("#ysc-history-"+n),h=l.one(".hd .name a"),g=l.one(".hd img"),k=c.JSON.parse(h.getAttribute("data")),f=this.unames["uid_"+n];if(f!==undefined){h.setContent(f);g.setAttribute("title",f);k.username=f;h.setAttribute("data",c.JSON.stringify(k));g.setAttribute("data",c.JSON.stringify(k));h.setContent(f);l.all(".call-name").setContent(f)}},renderFriendCue:function(){var f,g,e;g=this.getTranslation(this.l10n.MSG_CUE_FRIENDS);f=c.one("#"+this.get("modId")).ancestor(".socialchrome-grid",false,"yog-16u");e=this.renderCue("cue-f",g);f.append(c.Node.create(e))}});c.namespace("Media.SocialChrome").Friendlist=d},"0.1",{requires:["node","event","event-custom","io-base","io-xdr","json","anim-base","anim-easing","overlay","media-ylc","media-scbase"]});YUI.add("media-scpromo",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}b.Media.SocialChrome.PromoBar=a;a.NAME="PromoBar";a.ATTRS={srcNode:{value:null},property:{value:null}};b.extend(a,b.Media.SocialChrome.Base,{initializer:function(){this.set("contentBox",b.one("#"+this.get("mod_id")));if(!this.get("contentBox")||this.CONF.get("show_promo")==="0"){return}this.is_facepile=this.get("facepile")?true:false;this.facepile=this.get("contentBox").one(".facepile");if(typeof FB==="undefined"){return}FB.XFBML.parse(b.Node.getDOMNode(this.get("contentBox")));this.renderer()},renderUI:function(){},fire_promo_pg_beacon:function(){var c=this;setTimeout(function(){if(c.get("contentBox").getStyle("display")==="block"){var d=["s=",c.pagedata.spaceid,"&pstaid=",c.pagedata.cid,"&ntw=fb","&cxid=",c.CONF.get("fbuid"),"&csrcpvid=",c.CONF.get("csrcpvid"),"&sec=promo"].join("");new Image().src=c.get_pageview_beacon_url(d)}},500)},fire_login_btn_click_beacon:function(){var c=this;c.fire_click_beacon({csrcpvid:c.CONF.get("csrcpvid"),_S:c.pagedata.spaceid,sec:"promo",itc:"1",slk:"btn",ltxt:"connect"})},bindUI:function(){var f=this.get("contentBox").one(".fb_login"),e=this.get("contentBox").one(".close"),c=this.is_facepile?this.getTranslation(this.l10n.LOGIN):this.getTranslation(this.l10n.MSG_LOGIN_FACEBOOK),d=this.is_facepile?"fb_button_large":"fb_button_medium";if(f){b.after("scbase:fb_status_not_authorized",function(g){f.replace('<a href="#" role="button" class="fb_login fb-btn '+d+'"><span>'+c+"</span></a>");f=this.get("contentBox").one(".fb_login");b.on("click",function(l){l.preventDefault();this.fire_login_btn_click_beacon();var n=this.CONF.get("yahoo_id")==""?575:725;var k="left="+(window.screen.width-800)/2+",top="+(window.screen.height-n)/2;var m=null;m=window.open(this.CONF.get("signin_url")+"&so=0&perms=user_birthday,user_likes,email,publish_actions","membershipwindow","toolbar=no,statusbar=no,location=no,scrollbars=yes,resizable=yes,width=800,height="+n+","+k);var h=function(){var o="error",q="";try{o=m.location.host;if(o==window.location.host){m.close();if(window.location.href.indexOf("?")>0){q="&.af=sb"}else{q="?.af=sb"}window.location.href=window.location.href+q}else{setTimeout(h,500)}}catch(p){setTimeout(h,500)}return o};setTimeout(h,2000)},f,this);f.on("mousedown",function(h){h.preventDefault();this.addClass("fb-btn-click")});f.on("mouseup",function(h){h.preventDefault();this.removeClass("fb-btn-click")})},this);f.on("click",function(g){this.fire_login_btn_click_beacon()},this)}if(e){e.on("click",function(k){var g=this.CONF.get("sc_crumb"),h=this.get("contentBox");k.preventDefault();b.io("/_xhr/socialchrome/set_cookie/",{method:"post",data:"method=promo_off&crumb="+encodeURIComponent(g),on:{success:function(m,l){h.hide()}}})},this)}b.after("scbase:fb_status_login",function(g){this.get("contentBox").hide()},this,true);b.after("scbase:fb_auth_login",function(g){this.get("contentBox").hide()},this,true);b.after("scbase:fb_status_logout",function(g){this.setVisible()},this,true);b.after("scbase:fb_auth_logout",function(g){this.setVisible()},this,true);b.after("scbase:fb_status_not_authorized",function(g){this.setVisible()},this,true);b.after("ysc_friends:show_promobar_by_fb_timeout",function(g){this.setVisible()},this,true)},setVisible:function(){var d=this,c=d.get("contentBox").getStyle("display");if(c!=="block"){d.get("contentBox").setStyle("display","block");d.fire_promo_pg_beacon()}},syncUI:function(){}})},"0.1",{requires:["node","event","event-custom","media-ylc","media-scbase","cookie"]});YUI.add("media-scall",function(){},"1.0.0",{use:["media-scconf","media-scbase","media-sclogin","media-scflist","media-scpromo"]});
/* socialchrome-strings_en-US.js 912587 */ YUI.add("media-socialchrome-strings_en-US",function(a){a.Intl.add("media-socialchrome-strings","en-US",{MSG_YOU_ARE_FIRST_READ:"You are the first of your friends to read this article",MSG_YOUR_FRIENDS_CAN_SEE:"Your Facebook and Yahoo! friends can now see that you've viewed this article",MSG_SURE_TO_REMOVE:"Are you sure you no longer want to see your friends\u2019 activities on Yahoo! {0}? You cannot undo this action.",MSG_WE_CONNECT_ACCOUNT:"We previously connected your Yahoo! and Facebook accounts",MSG_YOU_CAN_UNDO:"If you wish, you can undo this connection",MSG_LOGIN_FACEBOOK:"Login with Facebook",LOGIN:"Login",NEWS:"News",ACTIVITY:"ACTIVITY",STATUS_DESC:"You are logged in to Facebook",READ_ON:"ON",READ_OFF:"OFF",SHARING:"Social",SHARE_SUCCESS_TITLE:"Added to Your Activity",REMIND_ME:"Remind me every time I add to my activity",YOUR_FRIEND:"Your friend",YOUR_FRIENDS:"Your friends",TURN_SOCIAL_ON:"Turn Social ON",TURN_SOCIAL_OFF:"Turn Social OFF",INVITE_FRIENDS:"Invite Friends",MSG_OPT_DISCLOSURE:"Explore Yahoo! with friends. When you watch, read, or generate other activity, your friends will see it on Facebook and Yahoo!",ALT_TEXT_ON_FRIEND_PROFILE_IMAGE:"View {0}'s activity",YOU:"You",READ_ACTIVITY_YOU:"{0} read this",READ_ACTIVITY_YOU_FRIEND:"{0} and {1} read this",READ_ACTIVITY_YOU_FRIEND_OTHER:'{0}, {1} and <a href="#" class="plusfd" role="button">{2} {2, choice, 0#others|1#other|2#others}</a> read this',READ_ACTIVITY_FRIEND:"{0} read this",READ_ACTIVITY_FRIEND_OTHER:'{0} and <a href="#" class="plusfd" role="button">{1} {1, choice, 0#others|1#other|2#others}</a> read this',ACCOUNT_CONNECT:"Accounts Connected",DONT_WANT:"don't want this?",OK:"Okay",DELETE_THIS_ACTIVITY:"Delete this activity",MSG_ACTIVITY_DELETED:"Activity deleted",REMOVE_EXPERIENCE:"Remove this experience",REMOVE:"Remove",CANCEL:"Cancel",SIGN_YAHOO_AS:"You are signed into Yahoo! as",SIGN_FB_AS:"You are signed into Facebook as",MANAGE_MY_ACCOUNT:"Manage my account",UNDO_CONNECTION:"Undo Connection",LEARN_MORE:"Learn more",REPORT_PROBLEM:"Report a problem",NOT_YOU_LOGOUT:"Not you? Log out of Facebook",MSG_FB_INVITE:"Come discover Yahoo! with me",HEADER_INVITE:"Invite friends to share what they discover on Yahoo! {0}",MSG_CANT_GET_ACTIVITY:'We couldn\'t get any activity. <a href="#" class="js-retry" role="button">Retry </a> or <a href="#" class="js-back" role="button">Go Back</a>',HEADER_SEE_FRIENDS_READING:"See what your friends are discovering",MSG_INVITE_TO_JOIN:"Invite them to the more social Yahoo! {0}.",PG_RANGE_OF_ALL:"{0} of {1}",GET_STARTED:"Get Started",JOIN:"Join",MOST_SHARED_YOUR_FRIENDS:"Most Shared From Your Friends",MSG_CUE_FRIENDS:"<b>Introducing Yahoo! Social Bar:</b> <span>check out what your friends are reading</span>",MSG_CUE_LOGIN:"<span>Turn social ON to start sharing</span>",WATCH_ACTIVITY_YOU:"{0} watched this video",WATCH_ACTIVITY_YOU_FRIEND:"{0} and {1} watched this video",WATCH_ACTIVITY_YOU_FRIEND_OTHER:'{0}, {1} and <a href="#" class="plusfd" role="button">{2} {2, choice, 0#others|1#other|2#others}</a> watched this video',WATCH_ACTIVITY_FRIEND:"{0} watched this video",WATCH_ACTIVITY_FRIEND_OTHER:'{0} and <a href="#" class="plusfd" role="button">{1} {1, choice, 0#others|1#other|2#others}</a> watched this video',MSG_YOU_ARE_FIRST_WATCH:"You are the first of your friends to watch this video",MSG_YOUR_FRIENDS_CAN_SEE_WATCH:"Your Facebook and Yahoo! friends can now see that you've watched this video",ALL_CONSENT_TITLE:"Yahoo! Social Bar &#8211; Now With Video &amp; More!",ALL_CONSENT_FULL_TEXT:'<p>Thank you for making Social Bar a success with over 650 million articles shared!</p><p>Now, with the continually improving Social Bar, you will be sharing more with your friends &#8211; videos you watch, games you play and other activity and content you discover on Yahoo!</p><p>There&#39;s nothing new to learn &#8211; with Social set to &#39;ON&#39;, your activity on Yahoo! will be posted to Facebook and Yahoo!, and as always, you retain full control.</p><a class="sc_consent_learn_more" href="http://info.yahoo.com/privacy/us/yahoo/news/activityfaq/details.html" target="_blank">Learn More</a>',ALL_CONSENT_OKAY:"Okay",ALL_CONSENT_LEARN_NOT_SHARE:"Learn How to Watch Video without Sharing",ALL_CONSENT_LEARN_NOT_SHARE_LINK:"http://info.yahoo.com/privacy/us/yahoo/news/activityfaq/details.html#videowithoutsharing",BTN_PREV:"previous page",BTN_NEXT:"next page",PLAY_ACTIVITY_YOU:"You played this game",PLAY_ACTIVITY_YOU_FRIEND:"{0} and {1} played this game",PLAY_ACTIVITY_YOU_FRIEND_OTHER:'{0}, {1} and <a href="#" class="plusfd" role="button">{2} {2, choice, 0#others|1#other|2#others}</a> played this game',PLAY_ACTIVITY_FRIEND:"{0} played this game",PLAY_ACTIVITY_FRIEND_OTHER:'{0} and <a href="#" class="plusfd" role="button">{1} {1, choice, 0#others|1#other|2#others}</a> played this game',MSG_YOU_ARE_FIRST_PLAY:"You are the first of your friends to play this game",MSG_YOUR_FRIENDS_CAN_SEE_PLAY:"Your Facebook and Yahoo! friends can now see that you've played this game"})},"1.0.0",{requires:["intl"]});
/* scmstshrd.js 838297 */ YUI.add("media-scmstshrd",function(c){var a=c.config.win;function b(d){b.superclass.constructor.apply(this,arguments)}b.NAME="MostShared";b.ATTRS={srcNode:{value:c.one(".yom-socialchrome-mostshared")},isPreLoad:{value:null},layout:{value:""},csrcpvid:{value:""},spaceid:{value:""},cid:{value:""},listType:{value:"articles"}};b.HTML_PARSER={};b.MYNODE_TEMPLATE="";c.extend(b,c.Media.SocialChrome.Base,{initializer:function(){if(this.get("isPreLoad")){c.after("scbase:fb_status_login",c.bind(this.fetchContent,this),this)}else{this.fetchContent()}},fetchContent:function(){var d=this.get("srcNode").getAttribute("data")+"&list_type="+this.get("listType")+"&layout="+this.get("layout")+"&cid="+this.get("cid")+"&spaceid="+this.get("spaceid")+"&csrcpvid="+this.get("csrcpvid");c.io("/_xhr/most-shared/",{method:"POST",data:d,on:{success:function(g,e){if(this.get("srcNode").get("parentNode").one(".loggedout")){return}var f=e.responseText.replace(/^[\t\n]+/,"").replace(/<!--.+-->\n*$/,"");this.set("srcNode",c.one(".yom-socialchrome-mostshared"));this.get("srcNode").setContent(f);this.updateUI()},failure:function(f,e){c.log("error in fetching Most Shared")}},context:this})},updateUI:function(){var d=this.get("srcNode"),f=0,e=d.all("li").size();this.list=d.one("ul");f=(this.get("layout")==="wide")?350:245;if(this.list){this.list.addClass(this.get("layout"));this.list.setStyle("width",f*e)}d.setStyle("width",f);d.setStyle("display","block");this.module_width=f;this.bind_events()},on_page_click:function(i){if(this.in_scroll){return}var h=i.target,d=this.page_index,g=this.page_anim,k=this.module_width-13,j=0;if(!h.hasClass("btn-prev")&&!h.hasClass("btn-next")){return}var f={csrcpvid:this.get("csrcpvid"),_S:this.get("spaceid"),sec:"fbar-fea",slk:"btn",ltxt:null,itc:1};if(h.hasClass("btn-prev")){d--;f.ltxt="pr"}else{if(h.hasClass("btn-next")){d++;f.ltxt="ne"}}j=0-d*k;if(YUI.namespace("Media").LANGDIR=="rtl"){j=j*-1}if(c.UA.ie>0){j=0-d*(k+3);if(YUI.namespace("Media").LANGDIR=="rtl"){j=j*-1}this.list.setStyle("left",j+"px")}else{g.set("to",{left:j+"px"})}this.page_index=d;this.in_scroll=true;g.run();this.fire_click_beacon(f)},update_page:function(){var e=this.page_index,d=this.total,g=e>0,f=e<d-1;if(g){this.pg_prev.removeClass("selected").replaceClass("btn-prev-off","btn-prev");this.icon_p.replaceClass("btn-prev-off","btn-prev").replaceClass("icon-arrow-prev-2","icon-arrow-prev-1")}else{this.pg_prev.addClass("selected").replaceClass("btn-prev","btn-prev-off");this.icon_p.replaceClass("btn-prev","btn-prev-off").replaceClass("icon-arrow-prev-1","icon-arrow-prev-2")}if(f){this.pg_next.removeClass("selected").replaceClass("btn-next-off","btn-next");this.icon_n.replaceClass("btn-next-off","btn-next").replaceClass("icon-arrow-next-2","icon-arrow-next-1")}else{this.pg_next.addClass("selected").replaceClass("btn-next","btn-next-off");this.icon_n.replaceClass("btn-next","btn-next-off").replaceClass("icon-arrow-next-1","icon-arrow-next-2")}this.page.setContent((e+1)+" / "+d);this.in_scroll=false},bind_events:function(){var d=this.get("srcNode");this.pg_next=d.one(".btn-next");this.pg_prev=d.one(".btn-prev");this.page=d.one(".page");this.total=(d.all("li")).size();this.icon_p=d.one(".icon-arrow-prev-2");this.icon_n=d.one(".icon-arrow-next-1");if(this.total>1){var f=d.one(".paginator");f.setStyle("display","block");var e=new c.Anim({node:this.list,duration:0.5,easing:c.Easing.easeOut});this.page_index=0;this.page_anim=e;f.on("click",c.bind(this.on_page_click,this));e.on("end",c.bind(this.update_page,this));this.update_page()}}});c.namespace("Media.SocialChrome").MostShared=b},"0.1",{requires:["node","event","event-custom","io-base","io-xdr","json","media-ylc","media-scbase"]});
/* bcarousel-scrollview-base.js 855860 */ YUI.add("media-bcarousel-scrollview-base",function(a,y){var b=a.config.doc,i=a.config.win,j=a.UA.ie,M=a.Transition.useNative,g="scrollview",o={vertical:"yui3-scrollview-vert",horizontal:"yui3-scrollview-horiz"},F="scrollEnd",L="flick",l="drag",r="mousewheel",n="ui",z="top",K="right",u="bottom",m="left",N="px",D="axis",E="scrollY",G="scrollX",B="bounce",w="disabled",d="deceleration",q="x",p="y",J="boundingBox",s="contentBox",t="gesturemove",v="start",H="end",c="",h="0s",e="snapDuration",I="snapEasing",f="easing",k="frameDuration",A="bounceRange",x=function(Q,P,O){return Math.min(Math.max(Q,P),O)};function C(){C.superclass.constructor.apply(this,arguments)}a.BCarouselScrollView=a.extend(C,a.Widget,{_forceHWTransforms:a.UA.webkit?true:false,_prevent:{start:false,move:true,end:false},lastScrolledAmt:0,initializer:function(P){var O=this;O._bb=O.get(J);O._cb=O.get(s);O._cAxis=O.get(D);O._cBounce=O.get(B);O._cBounceRange=O.get(A);O._cDeceleration=O.get(d);O._cFrameDuration=O.get(k)},_fixIESelect:function(P,O){this._cbDoc=O.get("ownerDocument");this._nativeBody=a.Node.getDOMNode(a.one("body",this._cbDoc));O.on("mousedown",function(){this._selectstart=this._nativeBody.onselectstart;this._nativeBody.onselectstart=this._iePreventSelect;this._cbDoc.once("mouseup",this._ieRestoreSelect,this)},this)},_iePreventSelect:function(){return false},_ieRestoreSelect:function(){this._nativeBody.onselectstart=this._selectstart},bindUI:function(){var O=this;O._bindFlick(O.get(L));O._bindDrag(O.get(l));O._bindMousewheel(true);O._bindAttrs();if(j){O._fixIESelect(O._bb,O._cb)}if(C.SNAP_DURATION){O.set(e,C.SNAP_DURATION)}if(C.SNAP_EASING){O.set(I,C.SNAP_EASING)}if(C.EASING){O.set(f,C.EASING)}if(C.FRAME_STEP){O.set(k,C.FRAME_STEP)}if(C.BOUNCE_RANGE){O.set(A,C.BOUNCE_RANGE)}},_bindAttrs:function(){var O=this,Q=O._afterScrollChange,P=O._afterDimChange;O.after({scrollEnd:O._afterScrollEnd,disabledChange:O._afterDisabledChange,flickChange:O._afterFlickChange,dragChange:O._afterDragChange,axisChange:O._afterAxisChange,scrollYChange:Q,scrollXChange:Q,heightChange:P,widthChange:P})},_bindDrag:function(P){var O=this,Q=O._bb;Q.detach(l+"|*");if(P){Q.on(l+"|"+t+v,a.bind(O._onGestureMoveStart,O))}},_bindFlick:function(P){var O=this,Q=O._bb;Q.detach(L+"|*");if(P){Q.on(L+"|"+L,a.bind(O._flick,O),P);O._bindDrag(O.get(l))}},_bindMousewheel:function(O){var P=this,Q=P._bb;Q.detach(r+"|*");if(O){a.one(b).on(r,a.bind(P._mousewheel,P))}},syncUI:function(){var P=this,T=P._getScrollDims(),S=T.offsetWidth,O=T.offsetHeight,Q=T.scrollWidth,R=T.scrollHeight;if(P._cAxis===undefined){P._cAxis={x:(Q>S),y:(R>O)};P._set(D,P._cAxis)}P.rtl=(P._cb.getComputedStyle("direction")==="rtl");P._cDisabled=P.get(w);P._uiDimensionsChange();if(P._isOutOfBounds()){P._snapBack()}},_getScrollDims:function(){var P=this,O=P._cb,U=P._bb,R=C._TRANSITION,V=P.get(G),T=P.get(E),Q,S;if(M){O.setStyle(R.DURATION,h);O.setStyle(R.PROPERTY,c)}Q=P._forceHWTransforms;P._forceHWTransforms=false;P._moveTo(O,0,0);S={offsetWidth:U.get("offsetWidth"),offsetHeight:U.get("offsetHeight"),scrollWidth:U.get("scrollWidth"),scrollHeight:U.get("scrollHeight")};P._moveTo(O,-(V),-(T));P._forceHWTransforms=Q;return S},_uiDimensionsChange:function(){var U=this,R=U._bb,T=U._getScrollDims(),O=T.offsetWidth,V=T.offsetHeight,P=T.scrollWidth,W=T.scrollHeight,S=U.rtl,Q=U._cAxis;if(Q&&Q.x){R.addClass(o.horizontal)}if(Q&&Q.y){R.addClass(o.vertical)}U._minScrollX=(S)?Math.min(0,-(P-O)):0;U._maxScrollX=(S)?0:Math.max(0,P-O);U._minScrollY=0;U._maxScrollY=Math.max(0,W-V)},scrollTo:function(X,W,S,U,Q){if(this._cDisabled){return}var Y=this,R=Y._cb,V=C._TRANSITION,Z=a.bind(Y._onTransEnd,Y),O=0,aa=0,T={},P;S=S||0;U=U||Y.get(f);Q=Q||R;if(X!==null){Y.set(G,X,{src:n});O=-(X)}if(W!==null){Y.set(E,W,{src:n});aa=-(W)}P=Y._transform(O,aa);if(M){Q.setStyle(V.DURATION,h).setStyle(V.PROPERTY,c)}if(S===0){if(M){Q.setStyle("transform",P)}else{if(X!==null){Q.setStyle(m,O+N)}if(W!==null){Q.setStyle(z,aa+N)}}}else{T.easing=U;T.duration=S/1000;if(M){T.transform=P}else{T.left=O+N;T.top=aa+N}Q.transition(T,Z)}},_transform:function(O,Q){var P="translate("+O+"px, "+Q+"px)";if(this._forceHWTransforms){P+=" translateZ(0)"}return P},_moveTo:function(P,O,Q){if(M){P.setStyle("transform",this._transform(O,Q))}else{P.setStyle(m,O+N);P.setStyle(z,Q+N)}},_onTransEnd:function(P){var O=this;O.fire(F)},_onGestureMoveStart:function(T){if(this._cDisabled){return false}var P=this,U=P._bb,Q=P.get(G),O=P.get(E),S=T.clientX,R=T.clientY;if(P._prevent.start){T.preventDefault()}if(P._flickAnim){P._flickAnim.cancel();delete P._flickAnim;P._onTransEnd()}T.stopPropagation();P.lastScrolledAmt=0;P._gesture={axis:null,startX:Q,startY:O,startClientX:S,startClientY:R,endClientX:null,endClientY:null,deltaX:null,deltaY:null,flick:null,onGestureMove:U.on(l+"|"+t,a.bind(P._onGestureMove,P)),onGestureMoveEnd:U.on(l+"|"+t+H,a.bind(P._onGestureMoveEnd,P))}},_onGestureMove:function(U){var Z=this,Y=Z._gesture,V=Z._cAxis,X=V.x,W=V.y,R=Y.startX,Q=Y.startY,T=Y.startClientX,S=Y.startClientY,P=U.clientX,O=U.clientY;if(Z._prevent.move){U.preventDefault()}Y.deltaX=T-P;Y.deltaY=S-O;if(Y.axis===null){Y.axis=(Math.abs(Y.deltaX)>Math.abs(Y.deltaY))?q:p}if(Y.axis===q&&X){Z.set(G,R+Y.deltaX)}else{if(Y.axis===p&&W){Z.set(E,Q+Y.deltaY)}}},_onGestureMoveEnd:function(T){var O=this,Q=O._gesture,P=Q.flick,S=T.clientX,R=T.clientY;if(O._prevent.end){T.preventDefault()}Q.endClientX=S;Q.endClientY=R;Q.onGestureMove.detach();Q.onGestureMoveEnd.detach();if(!P){if(Q.deltaX!==null&&Q.deltaY!==null){if(O._isOutOfBounds()){O._snapBack()}else{if(O.pages&&!O.pages.get(D)[Q.axis]){O._onTransEnd()}}}}},_flick:function(V){if(this._cDisabled){return false}var P=this,R=P._cAxis,Q=V.flick,U=Q.axis,O=Q.velocity,T=U===q?G:E,S=P.get(T);if(P._gesture){P._gesture.flick=Q}if(R[U]){P._flickFrame(O,U,S)}},_flickFrame:function(W,R,X){var ad=this,ak=R===q?G:E,T=ad._cBounce,U=ad._cBounceRange,ah=ad._cDeceleration,P=ad._cFrameDuration,O=W*ah,S=X-(P*O),af=R===q?ad._minScrollX:ad._minScrollY,ag=R===q?ad._maxScrollX:ad._maxScrollY,V=(S<af),Y=(S<ag),ab=(S>af),ae=(S>ag),ac=(S<(af-U)),aj=(S<(ag+U)),aa=(V&&(S>(af-U))),ai=(ae&&(S<(ag+U))),Q=(S>(af-U)),Z=(S>(ag+U)),al;if(aa||ai){O*=T}al=(Math.abs(O).toFixed(4)<0.015);if(al||ac||Z){if(ad._flickAnim){ad._flickAnim.cancel();delete ad._flickAnim}if(ab&&Y){ad._onTransEnd()}else{ad._snapBack()}}else{ad._flickAnim=a.later(P,ad,"_flickFrame",[O,R,S]);ad.set(ak,S)}},_mousewheel:function(S){var O=this,R=O.get(E),U=O._bb,P=10,Q=(S.wheelDelta>0),T=R-((Q?1:-1)*P);T=x(T,O._minScrollY,O._maxScrollY);if(U.contains(S.target)&&O._cAxis[p]){O.lastScrolledAmt=0;O.set(E,T);if(O.scrollbars){O.scrollbars._update();O.scrollbars.flash()}O._onTransEnd();S.preventDefault()}},_isOutOfBounds:function(Y,W){var Z=this,U=Z._cAxis,X=U.x,V=U.y,R=Y||Z.get(G),Q=W||Z.get(E),T=Z._minScrollX,S=Z._minScrollY,P=Z._maxScrollX,O=Z._maxScrollY;return(X&&(R<T||R>P))||(V&&(Q<S||Q>O))},_snapBack:function(){var X=this,S=X.get(G),R=X.get(E),U=X._minScrollX,T=X._minScrollY,Q=X._maxScrollX,P=X._maxScrollY,Y=x(R,T,P),O=x(S,U,Q),V=X.get(e),W=X.get(I);if(O!==S){X.set(G,O,{duration:V,easing:W})}else{if(Y!==R){X.set(E,Y,{duration:V,easing:W})}else{X._onTransEnd()}}},_afterScrollChange:function(R){if(R.src===C.UI_SRC){return false}var O=this,Q=R.duration,T=R.easing,S=R.newVal,P=[];O.lastScrolledAmt=O.lastScrolledAmt+(R.newVal-R.prevVal);if(R.attrName===G){P.push(S);P.push(O.get(E))}else{P.push(O.get(G));P.push(S)}P.push(Q);P.push(T);O.scrollTo.apply(O,P)},_afterFlickChange:function(O){this._bindFlick(O.newVal)},_afterDisabledChange:function(O){this._cDisabled=O.newVal},_afterAxisChange:function(O){this._cAxis=O.newVal},_afterDragChange:function(O){this._bindDrag(O.newVal)},_afterDimChange:function(){this._uiDimensionsChange()},_afterScrollEnd:function(P){var O=this;if(O._flickAnim){O._flickAnim.cancel();delete O._flickAnim}if(O._isOutOfBounds()){O._snapBack()}},_axisSetter:function(P,O){if(a.Lang.isString(P)){return{x:P.match(/x/i)?true:false,y:P.match(/y/i)?true:false}}},_setScroll:function(P,O){if(this._cDisabled){P=a.Attribute.INVALID_VALUE}return P},_setScrollX:function(O){return this._setScroll(O,q)},_setScrollY:function(O){return this._setScroll(O,p)}},{NAME:"scrollview",ATTRS:{axis:{setter:"_axisSetter",writeOnce:"initOnly"},scrollX:{value:0,setter:"_setScrollX"},scrollY:{value:0,setter:"_setScrollY"},deceleration:{value:0.93},bounce:{value:0.1},flick:{value:{minDistance:10,minVelocity:0.3}},drag:{value:true},snapDuration:{value:400},snapEasing:{value:"ease-out"},easing:{value:"cubic-bezier(0, 0.1, 0, 1.0)"},frameDuration:{value:15},bounceRange:{value:150}},CLASS_NAMES:o,UI_SRC:n,_TRANSITION:{DURATION:a.Transition._VENDOR_PREFIX+"TransitionDuration",PROPERTY:a.Transition._VENDOR_PREFIX+"TransitionProperty"},BOUNCE_RANGE:false,FRAME_STEP:false,EASING:false,SNAP_EASING:false,SNAP_DURATION:false})},"3.7.0pr1",{requires:["widget","event-gestures","event-mousewheel","transition"],skinnable:true});
/* bcarousel-scrollview-paginator.js 839881 */ YUI.add("media-bcarousel-scrollview-paginator",function(c){var f=c.ClassNameManager.getClassName,s="scrollview",n=f(s,"hidden"),d=f(s,"paged"),g=(c.ScrollView)?c.ScrollView.UI_SRC:"ui",r="index",m="scrollX",l="scrollY",k="total",q="host",t="boundingBox",j="contentBox",e="selector",a="flick",b="drag",i="axis",p="x",o="y";function h(){h.superclass.constructor.apply(this,arguments)}c.extend(h,c.Plugin.Base,{initializer:function(u){var w=this,v=w.get(q);w._pageDims=[];w._pageBuffer=1;w._optimizeMemory=false;w._host=v;w._bb=v._bb;w._cb=v._cb;w._cIndex=w.get(r);w._cAxis=w.get(i);if(u._optimizeMemory){w._optimizeMemory=u._optimizeMemory}if(u._pageBuffer){w._pageBuffer=u._pageBuffer}w._bindAttrs()},_bindAttrs:function(){var u=this;u.after({indexChange:u._afterIndexChange,axisChange:u._afterAxisChange});u.beforeHostMethod("scrollTo",u._beforeHostScrollTo);u.beforeHostMethod("_mousewheel",u._beforeHostMousewheel);u.beforeHostMethod("_flick",u._beforeHostFlick);u.afterHostMethod("_onGestureMoveEnd",u._afterHostGestureMoveEnd);u.afterHostMethod("_uiDimensionsChange",u._afterHostUIDimensionsChange);u.afterHostMethod("syncUI",u._afterHostSyncUI);u.afterHostEvent("render",u._afterHostRender);u.afterHostEvent("scrollEnd",u._afterHostScrollEnded)},_afterHostRender:function(w){var B=this,x=B._bb,C=B._host,v=B._cIndex,u=B._cAxis,z=B._getPageNodes(),D=z.size(),A=B._pageDims[v].maxScrollX,y=B._pageDims[v].maxScrollY;if(u[o]){C._maxScrollX=A}else{if(u[p]){C._maxScrollY=y}}B.set(k,D);if(v!==0){B.scrollToIndex(v,0)}x.addClass(d);B._optimize()},_afterHostSyncUI:function(x){var A=this,v=A._host,w=v.get(a),z=A._getPageNodes(),u=z.size(),y;A.set(k,u);if(A._cAxis===undefined){A._set(i,v.get(i))}},_afterHostUIDimensionsChange:function(x){var A=this,v=A._host,y=v._getScrollDims(),w=y.offsetWidth,u=y.offsetHeight,z=A._getPageNodes();z.each(function(F,C){var B=F.get("scrollWidth"),D=F.get("scrollHeight"),G=Math.max(0,B-w),E=Math.max(0,D-u);if(!A._pageDims[C]){A._pageDims[C]={scrollX:0,scrollY:0,_minScrollX:0,_minScrollY:0,maxScrollX:G,maxScrollY:E}}else{A._pageDims[C].maxScrollX=G;A._pageDims[C].maxScrollY=E}})},_beforeHostScrollTo:function(E,C,v,B,u){var G=this,H=G._host,F=H._gesture,z=G._cIndex,w=G._cAxis,D=this._getPageNodes(),A;if(F){A=F.axis;if(A===o){E=null}else{C=null}if(w[A]===false){u=D.item(z)}}return new c.Do.AlterArgs("new args",[E,C,v,B,u])},_afterHostGestureMoveEnd:function(x){var z=this,v=z._host,u=v._gesture,y=z._cAxis,w=u&&u.axis;if(y[w]){if(u[(w===p?"deltaX":"deltaY")]>0){z[v.rtl?"prev":"next"]()}else{z[v.rtl?"next":"prev"]()}}},_beforeHostMousewheel:function(w){var z=this,u=z._host,x=u._bb,v=w.wheelDelta<0,y=z._cAxis;if(x.contains(w.target)&&y[o]){if(v){z.next()}else{z.prev()}w.preventDefault();return new c.Do.Prevent()}},_beforeHostFlick:function(v){var x=this,w=x.get(i),u=v.flick.axis||false;if(w[u]){return new c.Do.Prevent()}},_afterHostScrollEnded:function(x){var A=this,v=A._host,u=A._cIndex,y=v.get(m),w=v.get(l),z=A._cAxis;if(z[o]){A._pageDims[u].scrollX=y}else{A._pageDims[u].scrollY=w}A._optimize()},_afterIndexChange:function(A){var B=this,x=this._host,u=A.newVal,z=B._pageDims[u].maxScrollX,w=B._pageDims[u].maxScrollY,v=x._gesture,y=v&&v.axis;B._cIndex=u;if(y===o){x._maxScrollX=z;x.set(m,B._pageDims[u].scrollX,{src:g})}else{if(y===p){x._maxScrollY=w;x.set(l,B._pageDims[u].scrollY,{src:g})}}if(A.src!==g){B.scrollToIndex(u)}},_optimize:function(){if(!this._optimizeMemory){return false}var w=this,u=w._cIndex,v=w._getStage(u);w._showNodes(v.visible);w._hideNodes(v.hidden)},_getStage:function(x){var w=this._pageBuffer,v=this.get(k),z=this._getPageNodes(),y=Math.max(0,x-w),u=Math.min(v,x+1+w);return{visible:z.splice(y,u-y),hidden:z}},_showNodes:function(u){if(u){u.removeClass(n).setStyle("visibility","")}},_hideNodes:function(u){if(u){u.addClass(n).setStyle("visibility","hidden")}},_getPageNodes:function(){var y=this,v=y._host,u=v._cb,w=y.get(e),x=w?u.all(w):u.get("children");return x},next:function(){var x=this,u=x._cIndex,w=u+1,v=this.get(k);if(w>=v){return}x.set(r,w)},prev:function(){var w=this,u=w._cIndex,v=u-1;if(v<0){return}w.set(r,v)},scrollTo:function(){return this.scrollToIndex.apply(this,arguments)},scrollToIndex:function(w,z,B){var A=this,y=A._host,v=A._getPageNodes().item(w),x=(A._cAxis[p]?m:l),u=v.get(x===m?"offsetLeft":"offsetTop");z=(z!==undefined)?z:h.TRANSITION.duration;B=(B!==undefined)?z:h.TRANSITION.easing;A.set(r,w);A._showNodes(v);y.set(x,u,{duration:z,easing:B})},_axisSetter:function(v,u){if(c.Lang.isString(v)){return{x:v.match(/x/i)?true:false,y:v.match(/y/i)?true:false}}},_afterAxisChange:function(u){this._cAxis=u.newVal}},{NAME:"pluginScrollViewPaginator",NS:"pages",ATTRS:{axis:{setter:"_axisSetter",writeOnce:"initOnly"},selector:{value:null},index:{value:0,validator:function(u){return true}},total:{value:0}},TRANSITION:{duration:300,easing:"ease-out"}});c.namespace("Plugin").BCarouselScrollViewPaginator=h},"@VERSION@",{requires:["plugin"]});
/* bcarousel.js 906104 */ YUI.add("media-bcarousel",function(g){var c="NotLoaded",d="Loading",b="Loaded",f="Failed";var a=10;function e(i,h){this._modId=i.modId;this._isDebug=i.isDebug;this._mod=g.one("#"+i.modId);if(this._mod===null){return}this._pages=this._mod.one(".bcarousel-pages");this._pagination=this._mod.one(".pagination");this._desktopNav=this._mod.one(".ymg-carousel-nav-wrap");this._nextButton=this._mod.one(".next-page");this._prevButton=this._mod.one(".prev-page");this._mobileNav=this._mod.one(".yom-scrollview-paginator-control");if(!this._desktopNav&&!this._mobileNav){return}this.pageTemplate=this._pages.get("children").item(0).cloneNode(true);this.pageTemplate.one(".bcarousel-items").empty();this.strings=i.strings||{};this.chrome=(typeof h!="undefined")?h:null;i.boundingBox=this._mod.one(".yui3-bcarousel");i.srcNode=this._mod.one(".yui3-bcarousel-content");i.axis="x";i.flick={axis:"x"};e.superclass.constructor.apply(this,arguments)}e.NAME="bcarousel";e.ATTRS={startInitial:{value:0},numRows:{},numCols:{},pagesPerBatch:{},totalItems:{},numItems:{getter:function(i,h){return(this.get("totalItems")-this.get("startInitial"))}},xhrUrl:{},paginationTemplate:{},placeholderTemplate:{},ywaActions:{value:{swipe:"38"}},placeholderClass:{value:"bcarousel-placeholder bcarousel-item"},pageClass:{value:"bcarousel-page"},batchSize:{getter:function(i,h){return this.get("numRows")*this.get("numCols")*this.get("pagesPerBatch")}},numPerPage:{getter:function(i,h){return this.get("numRows")*this.get("numCols")}},numPages:{getter:function(i,h){return Math.ceil((this.get("numItems"))/this.get("numPerPage"))}},items:{validator:function(k){var m,l,h=["status"];if(!g.Lang.isArray(k)){this.log("BCarousel items validation failed: value is not an array.");return false}for(m=0;m<k.length;m++){for(l=0;l<h.length;l++){if(k[m]&&!(k[m].hasOwnProperty(h[l]))){this.log('BCarousel item validation failed: missing required property, "',h[l],'". Item = ',k[m]);return false}}}return true}}};e.HTML_PARSER={items:function(j){var i=this,h=[];j.all(".bcarousel-item").each(function(){h.push({status:b})});return h}};g.extend(e,g.BCarouselScrollView,{initializer:function(h){this.plug(g.Plugin.BCarouselScrollViewPaginator,{axis:"x",index:0,total:this.get("numPages"),selector:"."+this.get("pageClass")});this.fetchQueue=new g.AsyncQueue();this.pageTime=new Date().getTime()},renderUI:function(){e.superclass.renderUI.apply(this,arguments);if(this.get("numPages")>1){this._addPlaceholders(this.get("numPerPage"),false)}},bindUI:function(){e.superclass.bindUI.apply(this,arguments);if(this.get("numPages")<=1){return}var i=this.get("boundingBox");var h=this;this.preventClickWhileDragging();this.disableDragDrop();this.applyWiggleFix();this.pages.on("indexChange",this._onPageIndexChange,this);if(this._desktopNav){this._nextButton.on("click",function(j){this.logDebug("next clicked");j.preventDefault();this.pages.next()},this);this._prevButton.on("click",function(j){this.logDebug("prev clicked");j.preventDefault();this.pages.prev()},this);this._desktopNav.removeClass("hidden")}else{this._prevent.move=false;this.syncUIOnOrientationChange(a);this._mobileNav.on("click",function(l){var j=this.pages.get("index");var k=this._mobileNav.all("li").item(j).get("offsetLeft");if(l.clientX<k){this.pages.prev()}else{if(l.clientX>(k+10)){this.pages.next()}}},this)}this.get("boundingBox").after("scrollWidthChange",function(j){h.logDebug("srollWidthChanged")})},syncUIOnOrientationChange:function(i){var h=this;g.on("ymedia:orientationchange",function(l){var k=h._pages.ancestor(".yui3-scrollview").setStyle("width","100%");var j=parseInt(h._pages.getComputedStyle("width"));h.set("width",j+i/2);h.pages.scrollToIndex(h.pages.get("index"))})},preventClickWhileDragging:function(){var i=this.get("boundingBox");var h=this;i.delegate("click",function(j){if(Math.abs(h.lastScrolledAmt)>2){}},"a")},disableDragDrop:function(){this.get("boundingBox").delegate("mousedown",function(h){h.preventDefault()},"a",this);this.get("boundingBox").delegate("mousedown",function(h){h.preventDefault()},"img",this)},applyWiggleFix:function(){this._prevent.move=false;var h=this.get("boundingBox");h.on("gesturemovestart",function(j){var i=[j.pageX,j.pageY];h.once("gesturemove",function(o){var m=[o.pageX,o.pageY],l=m[0]-i[0],k=m[1]-i[1],n=Math.abs(k)>Math.abs(l)?"y":"x";if(n==="x"){o.preventDefault()}})})},_onPageIndexChange:function(k){var h=h=k.newVal,j=new Date().getTime(),i=this.get("numPerPage"),l=h*i;this.logDebug("_onPageIndexChange:: about to transition to page ",h,", start: ",l,"after",((j-this.pageTime)/1000)," sec.");this.pageTime=j;this._updatePagination(l);if(this.chrome){this.chrome.ywaTrack(this.get("ywaActions")["swipe"])}this._queueRequest(l,true);if(l+i<this.get("numItems")){this._addPlaceholders(l+i);this._queueRequest(l+i,false)}},_addPlaceholders:function(j,r){var o=this.get("items"),q=this.get("numPerPage"),p=Math.min(this.get("numItems"),j+this.get("batchSize")),s,n,m,k,r=typeof r!=="undefined"?r:true;if(!g.Lang.isUndefined(o[j])){return}this.logDebug("inside of _addPlaceholders for items ",j," to ",p,". old scrollWidth: ",this.get("boundingBox").get("scrollWidth"));var l=false;for(m=j;m<p;m++){l=true;if(m%q===0){s=this.pageTemplate.cloneNode(true);this._pages.appendChild(s);n=s.one(".bcarousel-items")}k=this._renderPlaceholder(c);n.append(k);o[m]={status:c}}this.set("items",o);if(l&&r){this.logDebug("Added place holders for items ",j," to ",p,". new scrollWidth: ",this.get("boundingBox").get("scrollWidth"));var h=this._maxScrollX;this.syncUI();this._maxScrollX=(this.rtl&&!isNaN(h))?0:Math.max(0,h+this.get("boundingBox").get("offsetWidth"))}},_renderPlaceholder:function(h){var k=this.get("placeholderTemplate"),m=this.get("placeholderClass"),l="",j="",i;if(h==c){l=this.strings.loading;j="ratio-content loading"}if(h==f){l=this.strings.error;j="icon icon-small icon-alert-small"}i=g.substitute(k,{"class":m,message:l,icon:j});return i},_queueRequest:function(p,o){var m,h=this.fetchQueue,n=this._getRequestId(p),j=this.get("items"),l=this.get("batchSize"),k=Math.min(this.get("numItems"),p-(p%l)+l);if(!j[p]){this._addPlaceholders(p)}if(h.indexOf(n)!==-1){if(o){h.promote(n).run();this.logDebug("Promoted queued request for pages ",this._getPageNumber(p)," to ",this._getPageNumber(k-1))}return}if(j[p].status!=c){return}h.add({id:n,fn:function(){this._fetchItems(p)},context:this,timeout:500});if(o){h.promote(n)}h.run();for(m=p;m<k;m++){j[m].status=d}},_fetchItems:function(m){var j,k,i,h,l;h=this.get("xhrUrl")+"&start="+encodeURIComponent(m+this.get("startInitial"));j=function(p,q,v){var w=this.get("items"),u=this.get("batchSize"),z=this.get("numPerPage"),x=this.get("numItems"),s=g.Node.create(q.responseText).all(".bcarousel-page"),o=v.start,y=Math.min(x,o+u),t=Math.floor(o/z),n=s?s.size():0,A=Math.ceil((y-o)/z),r,B;this.logDebug("XHR success: pages ",(t+1)," to ",(t+n),", items ",(o+1)," to ",y,", batch ",Math.floor(o/u));for(r=0;r<n;r++){this._pages.get("children").item(t+r).replace(s.item(r))}for(r=A;r>n;r--){B=this._renderPlaceholder(f);this._pages.get("children").item(t+r-1).one(".bcarousel-items").get("children").each(function(C){C.replace(B)})}for(r=o;r<y;r++){w[r]={status:b}}this.set("items",w);this.logDebug("Loaded pages ",(t+1)," to ",(t+n))};k=function(n,p,t){var u=this.get("items"),s=this.get("batchSize"),x=this.get("numPerPage"),v=this.get("numItems"),o=t.start,w=Math.min(v,o+s),r=Math.floor(o/x),y=Math.ceil((w-o)/x),q;this.log("XHR failure: pages ",this._getPageNumber(o)," to ",this._getPageNumber(w-1),", items ",(o+1)," to ",w,", batch ",Math.floor(o/s));for(q=y;q>=1;q--){var z=this._renderPlaceholder(f);this._pages.get("children").item(r+q-1).one(".bcarousel-items").get("children").each(function(A){A.replace(z)})}for(q=o;q<w;q++){u[q]={status:"Failed"}}this.set("items",u)};i={on:{success:j,failure:k},"arguments":{start:m},context:this};l=g.io(h,i)},_updatePagination:function(k){var i=this.get("paginationTemplate"),h=this.get("numItems"),j=Math.min(h,k+this.get("numPerPage"));if(this._desktopNav){if(!this._pagination||!i){return}this._pagination.set("innerHTML",g.substitute(i,{first:k+1,last:j,total:h}));if(k==0){this._prevButton.addClass("yui-carousel-first-button-disabled")}else{this._prevButton.removeClass("yui-carousel-first-button-disabled")}if(j==h){this._nextButton.addClass("yui-carousel-button-disabled")}else{this._nextButton.removeClass("yui-carousel-button-disabled")}}if(this._mobileNav){this.once("scrollEnd",function(){this._mobileNav.all(".selected").removeClass("selected");var l=this.pages.get("index");this._mobileNav.all("li").item(l).addClass("selected")},this)}},_getRequestId:function(h){return"request-"+h},_getPageNumber:function(h){return Math.floor(h/this.get("numPerPage"))+1},log:function(){if(typeof console=="object"&&typeof console.log=="function"){var h=Array.prototype.slice.call(arguments);h.unshift(this._modId+": ");console.log.apply(console,h)}},logDebug:function(){if(this._isDebug){this.log.apply(this,arguments)}},getOuterHTML:function(i){var h=g.Node.create("<ul>");h.appendChild(i.cloneNode(true));return h.get("innerHTML")}});g.namespace("Media").BCarousel=e},"1.0",{requires:["media-bcarousel-scrollview-base","media-bcarousel-scrollview-paginator","io-base","async-queue","substitute","media-orientation"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("async-queue",function(g){g.AsyncQueue=function(){this._init();this.add.apply(this,arguments);};var e=g.AsyncQueue,c="execute",b="shift",d="promote",h="remove",a=g.Lang.isObject,f=g.Lang.isFunction;e.defaults=g.mix({autoContinue:true,iterations:1,timeout:10,until:function(){this.iterations|=0;return this.iterations<=0;}},g.config.queueDefaults||{});g.extend(e,g.EventTarget,{_running:false,_init:function(){g.EventTarget.call(this,{prefix:"queue",emitFacade:true});this._q=[];this.defaults={};this._initEvents();},_initEvents:function(){this.publish({"execute":{defaultFn:this._defExecFn,emitFacade:true},"shift":{defaultFn:this._defShiftFn,emitFacade:true},"add":{defaultFn:this._defAddFn,emitFacade:true},"promote":{defaultFn:this._defPromoteFn,emitFacade:true},"remove":{defaultFn:this._defRemoveFn,emitFacade:true}});},next:function(){var i;while(this._q.length){i=this._q[0]=this._prepare(this._q[0]);if(i&&i.until()){this.fire(b,{callback:i});i=null;}else{break;}}return i||null;},_defShiftFn:function(i){if(this.indexOf(i.callback)===0){this._q.shift();}},_prepare:function(k){if(f(k)&&k._prepared){return k;}var i=g.merge(e.defaults,{context:this,args:[],_prepared:true},this.defaults,(f(k)?{fn:k}:k)),j=g.bind(function(){if(!j._running){j.iterations--;}if(f(j.fn)){j.fn.apply(j.context||g,g.Array(j.args));}},this);return g.mix(j,i);},run:function(){var j,i=true;for(j=this.next();i&&j&&!this.isRunning();j=this.next()){i=(j.timeout<0)?this._execute(j):this._schedule(j);}if(!j){this.fire("complete");}return this;},_execute:function(j){this._running=j._running=true;j.iterations--;this.fire(c,{callback:j});var i=this._running&&j.autoContinue;this._running=j._running=false;return i;},_schedule:function(i){this._running=g.later(i.timeout,this,function(){if(this._execute(i)){this.run();}});return false;},isRunning:function(){return !!this._running;},_defExecFn:function(i){i.callback();},add:function(){this.fire("add",{callbacks:g.Array(arguments,0,true)});return this;},_defAddFn:function(j){var k=this._q,i=[];g.Array.each(j.callbacks,function(l){if(a(l)){k.push(l);i.push(l);}});j.added=i;},pause:function(){if(a(this._running)){this._running.cancel();}this._running=false;return this;},stop:function(){this._q=[];return this.pause();},indexOf:function(m){var k=0,j=this._q.length,l;for(;k<j;++k){l=this._q[k];if(l===m||l.id===m){return k;}}return -1;},getCallback:function(k){var j=this.indexOf(k);return(j>-1)?this._q[j]:null;},promote:function(k){var j={callback:k},i;if(this.isRunning()){i=this.after(b,function(){this.fire(d,j);i.detach();},this);}else{this.fire(d,j);}return this;},_defPromoteFn:function(l){var j=this.indexOf(l.callback),k=(j>-1)?this._q.splice(j,1)[0]:null;l.promoted=k;if(k){this._q.unshift(k);}},remove:function(k){var j={callback:k},i;if(this.isRunning()){i=this.after(b,function(){this.fire(h,j);i.detach();},this);}else{this.fire(h,j);}return this;},_defRemoveFn:function(k){var j=this.indexOf(k.callback);k.removed=(j>-1)?this._q.splice(j,1)[0]:null;},size:function(){if(!this.isRunning()){this.next();}return this._q.length;}});},"3.5.1",{requires:["event-custom"]});