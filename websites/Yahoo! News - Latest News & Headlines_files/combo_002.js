YUI.add("ucs-skip-to-search",function(a){a.namespace("ucs");a.ucs.SkipToSearch=function(b){this.skipLink=b;this.init();};a.ucs.SkipToSearch.prototype={init:function(){this.skipLink.on("click",this._focusSearch,this);this.skipLink.removeClass("yucs-activate");},_focusSearch:function(b){b.halt();a.one("#yUnivHead").one(".yucs-search input").focus();}};},"1.0",{requires:["node","event"]});(function(){var b=document.getElementById("yUnivHead"),a=(b&&b.getAttribute("data-property")==="srp")?Y:YUI();a.use("node","ucs-skip-to-search",function(e){var d=e.one("#yUnivHead").one(".yucs-skipto-search.yucs-activate"),c=e.one("#yUnivHead").one(".yucs-search input");if(d&&c){c=new e.ucs.SkipToSearch(d);}});})();YUI.add("ucs-timestamp-library",function(A){A.namespace("ucs.Timestamp");A.ucs.Timestamp={getTimeStamp:function(D){var M,Q,S,N,F="AM",I,B=A.one("#yUnivHead"),K=D.dateRef||new Date(),L=D.date,P=D.locale?D.locale:B.getAttribute("data-lang"),G=L.getTime(),R=L.getDate(),J=K.getDate(),T=K.getTime(),H=T-G,O=J-R,E=true,C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];P=A.Lang.isString(P)?P:"en-us";E=/^en-us$/i.test(P);H=parseInt(H/1000,10);Q=L.getMonth();S=L.getHours();N=L.getMinutes();I=T-((K.getHours()*60*60*1000)+(K.getMinutes()*60*1000)+(K.getSeconds()*1000)+K.getMilliseconds());if(N<10){N="0"+N;}if(S>=12){F="PM";}if(S>12){S-=12;}if(!E){M=C[Q]+" "+R+"&nbsp;&nbsp;"+S+":"+N+" "+F;}else{if(O===0){if(H<60){if(H>1){M=H+" secs ago";}else{M=H+" sec ago";}}else{if(H<3600){H=Math.ceil(H/60,10);if(H<2){M=H+" min ago";}else{M=H+" mins ago";}}else{if(H<86400){H=Math.ceil(H/3600);if(H>1){M=H+" hours ago";}else{M=H+" hour ago";}}}}}else{if(((I-G)<86400000)&&O!==0){M="Yesterday "+S+":"+N+" "+F;}else{M=C[Q]+" "+R+"&nbsp;&nbsp;"+S+":"+N+" "+F;}}}return M;}};},"1.0",{requires:["node"]});YUI.add("ucs-menu-utils",function(A){A.namespace("ucs");var C="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a target="{target}" {actionData} href="{url}" {disabledAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",I="{separatorTop}"+'<li class="{isDisabled} {isActive} {menuClass}">'+'<a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria}>'+"{icon}"+"{menuText}"+"</a></li>"+"{separatorBottom}",J='<span class="separator" role="presentation"></span>',G="click",H="a",O="role",K="tabIndex",B="hide",D="iframe",L="ul",M="li",E="parentNode",N="http://l.yimg.com/a/lib/ush/icon.gif",F="https://s.yimg.com/lq/lib/ush/icon.gif";A.ucs.MenuUtils=function(Q,P){var R=P&&P.panelSelector||L;this.menu=Q;this.panel=this.menu.one(R);this.init();};A.ucs.MenuUtils.prototype={init:function(){this.keyedup=false;this.menu.delegate(G,this._handleMenuClick,">a",this);this.menu.delegate(G,this._handleMenuItemClick,"li a",this);this.menu.on("keyup",this._handleKeyup,this);this.menu.on("keydown",this._handleKeydown,this);this.menu.removeClass("yucs-activate");this._initAria();},_initAria:function(){this.menu.one(H).set(O,"button");this.panel.all(H).set(O,"menuitemradio");this.panel.set(O,"menu");this.panel.all("div,ul,li").set(O,"presentation");if(!A.UA.ipad&&!A.UA.mobile){this.panel.set(K,-1);}this.focusmanager=this.panel.plug(A.Plugin.NodeFocusManager,{descendants:H,keys:{next:"down:40",previous:"down:38"},focusClass:{className:"li-selected",fn:function(P){return P.get(E);}},circular:true});},_destructAria:function(){this.panel.unplug(A.Plugin.NodeFocusManager);this.panel.one(H).set(K,0);},_handleMenuClick:function(P){P.halt();if(this.panel.hasClass(B)){this._accessShowMenu(P);}else{this._hideMenu();}},_handleKeyup:function(P){if(27===P.keyCode){this.menu.one(H).focus();this._hideMenu();}else{if(40===P.keyCode&&!this.keyedup){this.panel.one(H).focus();this.keyedup=true;}}},_handleKeydown:function(P){if(!this.panel.hasClass(B)){P.stopPropagation();}if(40===P.keyCode){P.preventDefault();}},_handleDocumentClick:function(P){if(this.panel.contains(P.target)||P.target._node===this.panel._node||this.panel.hasClass(B)||P.target===this.menu.one(">a")||P.target.get("parentNode")===this.menu.one(">a")){this.skipBlur=true;return;}this._hideMenu();},_accessShowMenu:function(Q){var P=this;this._hideAllMenus();this._showMenu(Q);this.panel.focus();A.Node.DOM_EVENTS.touchend=true;this.documentBlurHandle=A.on("blur",function(S){var R=this;if(!this.skipBlur){this.timeout=setTimeout(function(){R._hideMenu();},50);}this.skipBlur=false;},this.panel,this);this.documentFocusHandle=A.on("focus",function(R){if(this.timeout&&this.panel.hasChildNodes(R.target)){clearTimeout(this.timeout);this.timeout=null;}},this.panel,this);this.documentClickHandle=A.on(G,this._handleDocumentClick,document.body,this);this.documentMouseDownHandle=A.on("mousedown",this._handleDocumentClick,document.body,this);this.documentWheelHandle=A.on("mousewheel",this._hideAllMenus,this);this.documentScrollHandle=A.one(window).on("scroll",this._hideAllMenus,this);},_showMenu:function(Q){this.panel.removeClass(B);this._addIframeShim();var P=this.menu.one(D);if(P){P.removeClass(B);}},_position:function(){var P=this.menu.get("region");if(!this.panel.hasClass("yucs-menu-right")&&!this.panel.hasClass("yucs-menu-left")){this.panel.setStyle("left",P[0]);}this.panel.setStyle("top",P[1]+13);},_hideMenu:function(){this.panel.addClass(B);var P=this.menu.one(D);if(P){P.addClass(B);}if(this.documentBlurHandle){this.documentBlurHandle.detach();}if(this.documentFocusHandle){this.documentFocusHandle.detach();}if(this.documentClickHandle){this.documentClickHandle.detach();}if(this.documentMouseDownHandle){this.documentMouseDownHandle.detach();}if(this.documentTouchEndHandle){this.documentTouchEndHandle.detach();}this.keyedup=false;},_hideAllMenus:function(){var R=A.all(".yucs-menu ul"),P=A.all("yucs-menu iframe"),Q=A.all(".yucs-notifications ul.ynotif-yahoo-panel");v2Notifications=A.all(".yucs-notifications div.yucs-notif-panel");this._hideMenu();R.addClass(B);P.addClass(B);Q.addClass(B);v2Notifications.addClass(B);},_addIframeShim:function(){var P=A.all("select"),R=(A.UA.ie<=6),Q;if(!R||(!P.size()>0)){return;}Q=this.menu.one(D);if(!Q){Q=document.createElement(D);Q=this.panel.get(E).insertBefore(Q,this.panel);}Q.className="yucs-shim";Q.setStyle("position","absolute");Q.setStyle("width",this.panel.getComputedStyle("width"));Q.setStyle("height",this.panel.getComputedStyle("height"));Q.setStyle("top",this.panel.getY()+"px");Q.setStyle("border","0px none");},_addMenuGroups:function(S,X,W){var U=this.menu.one(L),P="",Q=(U.get("children")._nodes.length)?true:false;for(var R=0,T=S.length;R<T;R++){var V=S[R].length;if(X==="bottom"){S[R][0].separatorTop=true;}else{if(R<(T-1)||Q){S[R][V-1].separatorBottom=true;}}P+=this._addMenuGroup(S[R],W);}if(X==="bottom"){U.append(P);}else{U.prepend(P);}},_addMenuGroup:function(Q,S){var T="";for(var R=0,P=Q.length;R<P;R++){if(S){Q[R].isDebugItem=true;Q[R].menuClass="debug-item";}else{Q[R].isDebugItem=false;Q[R].menuClass="minty-item";}T+=this._addMenuItem(Q[R]);}return T;},_addMenuItem:function(Q){var P="";if(Q.isActive){Q.checkedAria='aria-checked="true"';}else{Q.checkedAria="";}if(Q.isDisabled){Q.disabledAria='aria-disabled="true"';}else{Q.disabledAria="";}switch(Q.actionType){case"link":P=A.substitute(C,Q,this._processTemplateValue);break;case"customEvent":P=A.substitute(I,Q,this._processTemplateValue);break;default:break;}if(P){if(Q.isDebugItem){P=P.replace(/separator/,"separator debug-item");}else{P=P.replace(/separator/,"separator minty-item");}}return P;},_clearMenuItem:function(P){this.menu.one(L).all("."+P).each(function(Q){Q.remove(true);});},_processTemplateValue:function(Q,R,S){A.log("key = "+Q+" value = "+R+" meta_data = "+S);var T="";var P=(document.location.protocol==="https:")?F:N;switch(Q){case"icon":if(R!==undefined){if(R==="available"){T='<img src="'+P+'" class="yucs-opi available"/>';}else{if(R==="offline"){T='<img src="'+P+'" class="yucs-opi offline"/>';
}else{if(R==="invisible"){T='<img src="'+P+'" class="yucs-opi invisible"/>';}else{if(R==="busy"){T='<img src="'+P+'" class="yucs-opi busy"/>';}else{if(R==="idle"){T='<img src="'+P+'" class="yucs-opi idle"/>';}else{T='<img src="'+R+'" />';}}}}}}break;case"separatorTop":if(R){T=J;}break;case"separatorBottom":if(R){T=J;}break;case"actionData":if(R){T='data-mad="'+R+'"';}break;case"isDisabled":if(R){T="disabled";}break;case"isActive":if(R){T="sp active";}break;case"checkedAria":T=R;break;default:T=R;break;}return T;},_resetItemStatus:function(S){var R=S.ancestor(L).all(M),Q=S.ancestor(L).all("li.disabled");R.removeClass("sp active");Q.removeClass("disabled");if(S.getAttribute("data-dis")){var P=S.ancestor(M);P.addClass("disabled");}if(S.getAttribute("data-hs")){var P=S.ancestor(M);P.addClass("sp active");}},_handleMenuItemClick:function(Q){var P=Q.target;}};},"1.0",{requires:["node","event","event-mouseenter","substitute","node-focusmanager"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-menu-utils",function(D){var C=D.one("#yUnivHead").all("li.yucs-menu.yucs-activate");C.each(function(F){var E=new D.ucs.MenuUtils(F);});});})();YUI.add("ucs-aria-toolbar",function(E){E.namespace("ucs");var D="role",A="tabIndex",B=">li>a",C="parentNode";E.ucs.AriaToolbar=function(F){this.toolbar=F;this.toolbar.removeClass("yucs-activate");this.init();};E.ucs.AriaToolbar.prototype={init:function(){this.toolbar.set(D,"toolbar");this.toolbar.all(">li").set(D,"presentation");this.focusmanager=this.toolbar.plug(E.Plugin.NodeFocusManager,{descendants:B,keys:{next:"down:39",previous:"down:37"},focusClass:{TABINDEX_ATTR:"-1",fn:function(F){return F.get(C);}},circular:true});this.toolbar.focusManager.get("descendants").after("keyup",function(F){if(9===F.keyCode){this.toolbar.focusManager.focus(0);}},this);}};},"1.0",{requires:["node","event","node-focusmanager"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-aria-toolbar",function(D){var C=D.one("#yUnivHead").all("ul.yucs-toolbar.yucs-activate");C.each(function(E){var F=new D.ucs.AriaToolbar(E);});});})();YUI.add("ucs-usermenu",function(C){var A="ucs:userMenuShow";var B="ucs:userMenuItemClick";C.ucs.UserMenu=function(D){C.ucs.UserMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};C.extend(C.ucs.UserMenu,C.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(A,{broadcast:2,emitFacade:true});this.publish(B,{broadcast:2,emitFacade:true});C.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this);},_showMenu:function(D){C.ucs.UserMenu.superclass._showMenu.apply(this,arguments);this.fire(A);},_handleUserMenuItems:function(H){if(!H.menuGroups||!H.menuGroups.length){return;}var F=H.menuGroups;F.reverse();if(H.reset){this._clearMenuItem("minty-item");}for(var G=0,E=F.length;G<E;G++){var D=F[G].length;F[G][D-1].separator=true;this._addMenuGroup(F[G]);}this._destructAria();this._initAria();},_handleMenuItemClick:function(I){C.ucs.UserMenu.superclass._handleMenuItemClick.apply(this,arguments);var H,F,D,E;H=I.target;H=H.ancestor("a",true);F=H.getAttribute("data-mad");D=H.getAttribute("data-customevt");E=H.ancestor("li").hasClass("disabled");if(D){I.preventDefault();}if(!E){var G={actionData:F};this.fire(B,G);}this._hideMenu();}});C.augment(C.ucs.UserMenu,C.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-usermenu",function(D){var C=D.one("#yUnivHead").all(".yucs-um-activate");C.each(function(F){var E=new D.ucs.UserMenu(F);});});})();YUI.add("ucs-helpmenu",function(E){var B="ucs:helpMenuShow";var A="ucs:helpDebugMenuShow";var D="ucs:helpMenuItemClick";var C="ucs:helpDebugMenuItemClick";E.ucs.HelpMenu=function(F){E.ucs.HelpMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};E.extend(E.ucs.HelpMenu,E.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(B,{broadcast:2,emitFacade:true});this.publish(A,{broadcast:2,emitFacade:true});this.publish(D,{broadcast:2,emitFacade:true});this.publish(C,{broadcast:2,emitFacade:true});E.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this);E.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this);},_showMenu:function(F){if((F.ctrlKey||F.metaKey)&&F.shiftKey){this.fire(A);this._showDebugMenuItems();}else{this.fire(B);this._showMenuItems();}E.ucs.HelpMenu.superclass._showMenu.apply(this,arguments);},_showDebugMenuItems:function(){this.menu.all("li").addClass("hide");this.menu.all("span.separator").setStyle("display","none");this.menu.all("li.debug-item").removeClass("hide");this.menu.all("span.debug-item").setStyle("display","block");},_showMenuItems:function(){this.menu.all("li").removeClass("hide");this.menu.all("span.separator").setStyle("display","block");this.menu.all("li.debug-item").addClass("hide");this.menu.all("span.debug-item").setStyle("display","none");},_handleHelpMenuItems:function(G){if(!G.menuGroups||!G.menuGroups.length){return;}var F=G.menuGroups;if(G.reset){this._clearMenuItem("minty-item");}this._addMenuGroups(F);this._destructAria();this._initAria();},_handleHelpDebugMenuItems:function(G){if(!G.menuGroups||!G.menuGroups.length){return;}var F=G.menuGroups;this._clearMenuItem("debug-item");this._addMenuGroups(F,"top",true);},_handleMenuItemClick:function(K){E.ucs.HelpMenu.superclass._handleMenuItemClick.apply(this,arguments);var J,G,F;J=K.target;J=J.ancestor("a",true);G=J.getAttribute("data-mad");F=J.getAttribute("data-customevt");dis=J.ancestor("li").hasClass("disabled");if(dis){K.halt();this._hideMenu();return;}if(F){K.preventDefault();}if(!dis){var I={actionData:G};var H=J.get("parentNode");if(H.hasClass("debug-item")){this.fire(C,I);}else{this.fire(D,I);}}this._hideMenu();}});E.augment(E.ucs.HelpMenu,E.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-helpmenu",function(D){var C=D.one("#yUnivHead").all(".yucs-hm-activate");C.each(function(F){var E=new D.ucs.HelpMenu(F);});});})();YUI.add("ucs-utilitymenu",function(C){var B="ucs:utilityMenuShow";var A="ucs:utilityMenuItemClick";C.ucs.UtilityMenu=function(D){C.ucs.UtilityMenu.superclass.constructor.apply(this,arguments);this._initCustomEvents();};C.extend(C.ucs.UtilityMenu,C.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(B,{broadcast:2,emitFacade:true});this.publish(A,{broadcast:2,emitFacade:true});C.Global.on("ucs:utilityMenuItems",this._handleUtilityMenuItems,this);},_showMenu:function(D){C.ucs.UtilityMenu.superclass._showMenu.apply(this,arguments);this.fire(B);},_handleUtilityMenuItems:function(E){if(!E.menuGroups||!E.menuGroups.length){return;}var D=E.menuGroups;if(E.reset){this._clearMenuItem("minty-item");}this._addMenuGroups(D);this._destructAria();this._initAria();},_handleMenuItemClick:function(I){C.ucs.UtilityMenu.superclass._handleMenuItemClick.apply(this,arguments);var H,F,D,E;H=I.target;H=H.ancestor("a",true);F=H.getAttribute("data-mad");D=H.getAttribute("data-customevt");E=H.ancestor("li").hasClass("disabled");if(D){I.preventDefault();}if(!E){var G={actionData:F};this.fire(A,G);}this._hideMenu();}});C.augment(C.ucs.UtilityMenu,C.EventTarget);},"1.0",{requires:["oop","node","event-custom","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-utilitymenu",function(D){var C=D.one("#yUnivHead").all(".yucs-utm-activate");C.each(function(F){var E=new D.ucs.UtilityMenu(F);});});})();YUI.add("ucs-logodebug",function(A){A.namespace("ucs");A.ucs.LogoDebug=function(B){B.on("click",this._handleClick,this);this.publish("ucs:logoDebug",{broadcast:2,emitFacade:true});};A.ucs.LogoDebug.prototype={_handleClick:function(B){if(B.altKey){B.halt();this.fire("ucs:logoDebug");}}};A.augment(A.ucs.LogoDebug,A.EventTarget);},"1.0",{requires:["node"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-logodebug",function(E){var D=E.one("#yUnivHead").one("#yuhead-bd>.yuhead-logo>h2>a");if(D){var C=new E.ucs.LogoDebug(D);}});})();YUI.add("jsonp-cached",function(B){B.namespace("jsonpcached");if(!YUI.Env.JsonpCached){YUI.Env.JsonpCached={};}if(!YUI.Env.JsonpCached.services){YUI.Env.JsonpCached.services={};}var A=YUI.Env.JsonpCached.services;B.jsonpcached.getData=function(F){var C={};var D=F.url||"";var J=F.serviceName||"service";var M=F.callbackName||"callback";var I=F.broadcast||false;var J=D.replace(/\W/g,"")+"_"+J+"_"+M;var G=F.onSuccess||function(){};C.timeout=F.timeout;C.onTimeout=F.onTimeout||null;C.onFailure=F.onFailure||null;var L=(D.indexOf("?")===-1)?"?":"&";var H=D+L+M+"=YUI.Env.JsonpCached."+J;var K=F.args||[];var E=F.context||null;B.jsonpcached.get=YUI.Env.JsonpCached.get||B.Get;if(!A[H]){A[H]={dataAvailable:false,requestInProgress:false,callbacksQueue:[]};}var N=A[H];if(N.dataAvailable){G(N.data);}else{N.callbacksQueue.push(G);if(!N.requestInProgress){YUI.Env.JsonpCached[J]=function(R){N.data=R;N.dataAvailable=true;scbs=N.callbacksQueue;for(var Q=0,O=scbs.length;Q<O;Q++){var P=scbs.pop();P.apply(E,[R].concat(K));}};N.requestInProgress=true;B.jsonpcached.get.script(H,C);}}};},"0.0.1");YUI.add("ucs-notifications-v2-bootstrap",function(B){B.namespace("ucs.Notifications");var o=false,Z=false,d=false,K,f=null,a=B.one("#yUnivHead").one(".yucs-notifications.yucs-notif-activate"),O=a.one(".yucs-notif-panel"),H=O.getAttribute("data-authstate"),j=a.one(".ynotif-notif-count"),L=O.getAttribute("data-polling-off"),h=a.one(".ynotif-notif-count-con"),E=a.one(".ynotif-ico-bell"),R=O.getAttribute("data-guid"),X=O.getAttribute("data-crumb"),Q=O.getAttribute("data-intl"),V=!(O.getAttribute("data-polling-no-restart")==="true"),e=O.getAttribute("data-yql-env"),C="http://l.yimg.com/kx/ucs/notif_v2/js/159/",m="http://l.yimg.com/kx/ucs/notif_v2/js/159/",g=null,W=null,P=null,k=null,n=null,T=parseFloat(O.getAttribute("data-polling-halt"))||10,U=parseFloat(O.getAttribute("data-polling-interval"))||2,N=O.getAttribute("data-ylt-bell");var S=function(r,p,q){W=B.later(p,this,function(){B.jsonpcached.getData({url:r,serviceName:"notifications_count"+new Date().getTime(),onSuccess:B.bind(J,this)});},null,q);};var M=function(){var q=B.Cookie.getSub("ucs","nt")||"",u="http://"+e+"ucs.query.yahoo.com/v1/console/yql?",s='select * from social.notifications.summary where guid = "'+R+'" and newCount="1"',r=60,p=U*60,t=u+B.QueryString.stringify({q:s,format:"json",crumb:X,_maxage:r,t:q});S(t,0,false);if(!L){S(t,p*1000,true);}};var J=function(p){var q;if(!(p.query&&p.query.results&&p.query.results.summaryInfo)){}else{q=p.query.results.summaryInfo.totalSinceLastSeen;g=q;if(q>0){if(!B.Lang.isNull(f)){if(q>f.model.getNotificationsCount()){f.view.resetNotificationsFetchState();}}if(q>99){q="99+";}j.set("innerHTML",q);h.removeClass("hide");}else{j.setAttribute("title","0");h.addClass("hide");}if(!B.Lang.isNull(f)){f.model.setNotificationsCount(q);}}};var c=function(){var p=new Image();p.height=0;p.width=0;p.src="http://geo.yahoo.com/t"+N;};var G=function(){c();if(!o){o=true;var p=m+"notifications_v2-min.js";B.Get.script(p,{onSuccess:function(){b("notif");if(K){K.detach();}},onEnd:function(){o=false;}});}};var i=function(){var r={"en-us":"en-US","en-ca":"en-US","en-in":"en-US","en-gb":"en-US","en-ie":"en-US","en-my":"en-US","en-ph":"en-US","en-sg":"en-US","en-za":"en-US","en-ae":"en-US","en-jo":"en-US"},p=C+"dict-"+r[Q.toLowerCase()]+"-min.js",q=new Date(),s={onSuccess:function(){b("dict");},onFail:function(){}};B.Get.script(p,s);};var D=function(){var q=document.getElementById("yUnivHead"),p=(q&&q.getAttribute("data-property")==="srp")?B:YUI();p.use("node","ucs-notifications-v2","ucs-dictionary",function(r){var s=r.one("#yUnivHead").all(".yucs-notif-activate.yucs-notifications");s.each(function(t){f=new r.ucs.NotificationsMenu({"node":t,"dict":r.ucs.dictionary.notif,"bindingVariables":r.ucs.bindingvariables,"notifCount":g,"authState":H,"locale":Q});f._accessShowMenu();});});};var b=function(p){if(p==="dict"){Z=true;}if(p==="notif"){d=true;}if(Z&&d){D();}};var I=function(){i();G();};var A=function(){n=B.later(T*60000,this,F,null,false);if(P){P.detach();}if(k){k.detach();}};var l=function(p){if(W){W.cancel();}if(n){n.cancel();A();}M();};var F=function(p){if(!p&&V){P=B.on("mousemove",l,B.config.win);k=B.on("keypress",l,B.config.win);}if(W){W.cancel();}};B.ucs.Notifications.Bootstrap={init:function(){if(H!=="signedout"){M();L=B.Lang.isString(L)&&L==="true";if(!L){if(B.UA.ie){B.on("focus",l,B.config.doc);B.on("blur",F,B.config.doc);}else{B.on("focus",l,B.config.win);B.on("blur",F,B.config.win);}A();}}if(location.href.match(/ucs_notif_popupsignin=1/)){I();}else{K=B.on("click",function(p){p.halt();I();},".ynotif-control");}}};},"1.0",{requires:["node","event","jsonp-cached","querystring-stringify","node-focusmanager","cookie","ucs-menu-utils"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("ucs-notifications-v2-bootstrap",function(C){if(A.one(".yucs-notifications.yucs-notif-activate")){C.ucs.Notifications.Bootstrap.init();}});if(window.opener&&window.location.href.match(/ucs_notif_popupsignin=1/)){window.opener.location=window.location;window.close();}}());if(!window.ucs){window.ucs={};}YUI.add("ucs-search",function(F){if(!ucs.Search){var D="value",E="click",C="submit",G="innerHTML",A="tabindex",B="target";ucs.Search=function(H){this.form=H;this.buttons=this.form.all("button");this.form.set("onsubmit",null);this.loadedAssist=false;this._timer=null;this.init();};ucs.Search.prototype={isWebSearch:false,init:function(){this._setTabIndex();if(this.buttons.size()===2){this.is2Button=true;}else{this.is2Button=false;}this.input=this.form.one("input");this.vertSearchBtn=this.form.one(".yucs-sprop-btn");this.webSearchBtn=this.form.one(".yucs-sweb-btn");this.searchHint=this.input.getAttribute("data-sh");if((F.one("#yUnivHead")&&F.one("#yUnivHead").getAttribute("data-linktarget"))){this.linkTarget=F.one("#yUnivHead").getAttribute("data-linktarget");}else{this.linkTarget=this.form.getAttribute("target")||"_top";}this._setFormTarget();this._initEventListeners();this.form.removeClass("yucs-activate");if(document.activeElement!==this.input._node&&this.input.get(D)===""){this._resetSearchInput();}},_initEventListeners:function(){if(this.vertSearchBtn&&F.UA.ie){this.webSearchBtn.on(E,this._renderSearchActionIe,this);this.form.on(C,this._handleVertSearch,this);}else{this.form.on(C,this._handleSubmit,this);}this.input.on("focus",this._handleInputFocus,this);this.input.on("blur",this._handleInputBlur,this);this.input.on("keyup",this._handleInputKeyup,this);if(this.vertSearchBtn){this.vertSearchBtn.on(E,this._handleVertSearch,this);}},_getInputValTrimmed:function(){var H=this.input.get(D);H=F.Lang.trim(H);return H;},_inputIsEmpty:function(){return this._getInputValTrimmed()==="";},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint;},_handleInputKeyup:function(H){if(!this._inputIsEmpty()&&!this._inputIsDefaultTerm()){this._setTabIndex();}},_setTabIndex:function(){var H=F.UA.ie<=7;this.buttons.each(function(I){var J=I.getAttribute(A);if((H&&J===0)||(H&&J===65535)||(J&&!(H&&J===32768))){I.setAttribute(A,0);}else{I.setAttribute(A,-1);}});},_setFormTarget:function(){if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){this.form.setAttribute(B,"searchWin");}else{this.form.setAttribute(B,this.linkTarget);}},_renderSearchActionIe:function(){this.isWebSearch=true;var H=this;F.detach(C,this._fireVertSearchEvent,this.form);this._handleSubmit();var I=this.form.getAttribute("action")+"?fr="+this.form.all("#fr").getAttribute(D)+"&p="+this.input.getAttribute(D);if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")||this.is2Button){window.open(I,"searchWin");}else{window.location.href=I;}},_initAssist:function(){var H=this.input.getAttribute("data-satype");if(6===F.UA.ie||7===F.UA.ie){H="";}switch(H){case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node);break;default:break;}},_buildAssistConfig:function(H){var I={searchbox:H,clid:"uh-yui3",align:true,shim:1};if(H.getAttribute("data-pubid")){I.pubid=H.getAttribute("data-pubid");}if(H.getAttribute("data-gosurl")){I.url=H.getAttribute("data-gosurl");}return I;},_initMiniAssist:function(J){var I=this,H={miniassist:{fullpath:"http://l.yimg.com/a/lib/s7/miniassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin","array-extras"]},"miniassist-skin":{fullpath:"http://l.yimg.com/a/lib/s7/miniassist-yui3-201009101433.css",type:"css"},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["miniassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["miniassist"]}};YUI({modules:H}).use("miniassist","miniassist-skin","tray-align-plugin","tray-shim-plugin",function(M){var K=new M.Node(J),L=I._buildAssistConfig(K);I.sa=new M.Search.MiniAssist(L);});},_initRichAssist:function(J){var I=this,H={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};YUI({modules:H}).use("richassist","tray-align-plugin","tray-shim-plugin",function(M){var K=new M.Node(J),L=I._buildAssistConfig(K);I.sa=new M.Search.RichAssist(L);});},_setInputBlank:function(){this.input.set(D,"");},_handleSubmit:function(J){var I=false;if(J){I=J.target.getAttribute("data-vsearch")?true:false;}if(this._inputIsDefaultTerm()){this._setInputBlank();}if(I===false){if(document.getElementById("yuhead-att-cat")){if(this.form.getAttribute(B)!=="searchWin"){J.preventDefault();}var H=F.Node.create("<img />");H.once("load",this._handleImageLoad,this);H.once("error",this._handleImageLoad,this);this._timer=window.setTimeout(F.bind(this._handleImageLoad,this),2000);H.set("src","http://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(document.getElementById("yuhead-sform-searchfield").value));}}},_handleImageLoad:function(H){if(this._timer!==null){clearTimeout(this._timer);this._timer=null;}if(this.form.getAttribute(B)!=="searchWin"){this.form.submit();}},_handleInputFocus:function(H){if(this._inputIsDefaultTerm()){this._setInputBlank();}this.input.removeClass("yucs-search-hint-color");if(!this.loadedAssist){this.loadedAssist=true;this._initAssist();}},_handleInputBlur:function(H){if(this._inputIsEmpty()){this.input.set(D,this.searchHint);this.input.addClass("yucs-search-hint-color");}},_handleVertSearch:function(J){if(this.isWebSearch){this.isWebSearch=false;return;}J.preventDefault();this._handleSubmit(J);var I=J.target.getAttribute("data-vsearch"),H=J.target.getAttribute("data-ylt");if(I){I+="?fr="+this.form.all("#fr").get(D)+"&p="+this.input.get(D);if(H){if(H.charAt(0)==="/"){H=H.substring(1);}I+=H;}if(this.linkTarget==="_blank"||this.form.hasClass("yucs-search-fh")){window.open(I,"searchWin");}else{window.location.href=I;}}else{this._fireVertSearchEvent(J);
}},_fireVertSearchEvent:function(I){var H=this.input.get(D);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:true});this.fire("ucs:verticalSearchAction",{"query":H});},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:true});this.fire("ucs:uhSearchInterfaceReady");},_getSearchInput:function(){return this.input;},_resetSearchInput:function(){this.input.set(D,this.searchHint);this.input.addClass("yucs-search-hint-color");},_setSearchInput:function(H){this.input.set(D,H);},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(G);},_setVertSearchBtnContent:function(H){this.vertSearchBtn.set(G,(H["text"])?H["text"]:H);}};F.augment(ucs.Search,F.EventTarget);}},"1.0",{requires:["node","event","event-custom"]});YUI().use("node","ucs-search",function(B){var A=B.one("#yUnivHead").all("form.yucs-search.yucs-activate");A.each(function(F,C,E){if(F.ancestor("#yuhead-search")){if(F.ancestor("#yucs-fh")){if(F.all("button").size()===2){B.one("#yucs-fh").addClass("yucs-fh-twobutton");}}ucs.UhSearchInterface=new ucs.Search(F);ucs.UhSearchInterface.getInput=function(){return ucs.UhSearchInterface._getSearchInput();};ucs.UhSearchInterface.setInput=function(G){ucs.UhSearchInterface._setSearchInput(G);};ucs.UhSearchInterface.resetInput=function(){ucs.UhSearchInterface._resetSearchInput();};ucs.UhSearchInterface.getVertSearchBtnText=function(){return ucs.UhSearchInterface._getVertSearchBtnContent();};ucs.UhSearchInterface.setVertSearchBtnText=function(G){ucs.UhSearchInterface._setVertSearchBtnContent(G);};ucs.UhSearchInterface._fireInterfaceReady();}else{var D=new ucs.Search(F);}});});YUI.add("gallery-intl-bidi",function(B){B.mix(B.namespace("Intl"),{_rtlChars:"[\uD83A\uD83B][\uDC00-\uDFFF]|[\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05FF\u0604\u0605\u0608\u060B\u060D\u061B-\u064A\u065F\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070E\u0710\u0712-\u072F\u074B-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA-\u0815\u081A\u0824\u0828\u082E-\u08FF\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD40-\uFDCF\uFDF0-\uFDFC\uFDFE\uFDFF\uFE70-\uFEFE]|\uD803[\uDC00-\uDE5F\uDE7F-\uDFFF]|\uD802[\uDC00-\uDD1E\uDD20-\uDE00\uDE04\uDE07-\uDE0B\uDE10-\uDE37\uDE3B-\uDE3E\uDE40-\uDF38\uDF40-\uDFFF]",_neutralChars:"[\uDB40-\uDB43][\uDC00-\uDFFF]|\uD802[\uDD1F\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDF39-\uDF3F]|\uD804[\uDC80\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA]|\uD803[\uDE60-\uDE7E]|\uD800[\uDD01\uDD40-\uDD8A\uDD90-\uDD9B\uDDFD]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDD00-\uDD0A]|[\u0000-\u0040\u005B-\u0060\u007B-\u00A9\u00AB-\u00B4\u00B6-\u00B9\u00BB-\u00BF\u00D7\u00F7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0600-\u0603\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065E\u0660-\u066C\u0670\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0900-\u0902\u093C\u0941-\u0948\u094D\u0951-\u0955\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0CF1\u0CF2\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135F\u1390-\u1399\u1400\u1680\u169B\u169C\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180E\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1DC0-\u1DE6\u1DFD-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2000-\u200D\u2010-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20B8\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189\u2190-\u2335\u237B-\u2394\u2396-\u23E8\u2400-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u26CD\u26CF-\u26E1\u26E3\u26E8-\u26FF\u2701-\u2704\u2706-\u2709\u270C-\u2727\u2729-\u274B\u274D\u274F-\u2752\u2756-\u275E\u2761-\u2794\u2798-\u27AF\u27B1-\u27BE\u27C0-\u27CA\u27CC\u27D0-\u27FF\u2900-\u2B4C\u2B50-\u2B59\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2DE0-\u2E31\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u3004\u3008-\u3020\u302A-\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA673\uA67C-\uA67F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82B\uA838\uA839\uA874-\uA877\uA8C4\uA8E0-\uA8F1\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uABE5\uABE8\uABED\uFB1E\uFB29\uFD3E\uFD3F\uFDD0-\uFDEF\uFDFD\uFE00-\uFE19\uFE20-\uFE26\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF0-\uFFFF]|\uD835[\uDEDB\uDF15\uDF4F\uDF89\uDFC3\uDFCE-\uDFFF]|\uD834[\uDD67-\uDD69\uDD73-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE00-\uDE45\uDF00-\uDF56]",_initializeBidiPatterns:function(){this._rtlPattern=new RegExp("^(?:"+this._neutralChars+")*(?:"+this._rtlChars+")");this._neturalPattern=new RegExp("^(?:"+this._neutralChars+")*$");},setBidiChars:function(D,A){if(D!==undefined){this._rtlChars=D;}if(A!==undefined){this._neutralChars=A;}this._initializeBidiPatterns();},detectDirection:function(A,D){if(this._rtlPattern.test(A)){return"rtl";}else{if(D==="ltr"){return"ltr";}else{if(this._neturalPattern.test(A)){if(D==="rtl"){return"rtl";}else{return"";}}else{return"ltr";}}}}});B.Intl._initializeBidiPatterns();B.mix(B.namespace("Intl"),{bidiDirection:B.Intl.detectDirection});},"gallery-2010.09.22-20-15");YUI.add("gallery-node-setdir",function(D){var C={ltr:"rtl",rtl:"ltr"};D.Node.addMethod("setDirection",function(B,A){var G,H;if(A==="ltr"||A==="rtl"){G=D.one(B);H=G.getStyle("direction");G.setAttribute("dir",A);G.setStyle("direction",A);G.removeClass(D.ClassNameManager.getClassName(C[A]));G.addClass(D.ClassNameManager.getClassName(A));if(A!==H){D.fire("directionChange",{target:G,dir:A});}}return G;});},"gallery-2010.09.22-20-15",{requires:["classnamemanager","node-base","node-style"]});YUI.add("gallery-bidi-textinput",function(D){function C(){C.superclass.constructor.apply(this,arguments);}C.NS="bidiTextEntry";C.NAME="bidiTextEntry";D.extend(C,D.Plugin.Base,{initializer:function(){this.afterHostEvent("valueChange",function(B){var F=this.get("host"),A=D.Intl.detectDirection(B.newVal);F.setDirection(A);});}});D.namespace("Plugin");D.Plugin.BidiTextEntry=C;D.Plugin.BidiTextInput=C;
},"gallery-2010.09.22-20-15",{requires:["plugin","event-valuechange","gallery-intl-bidi","gallery-node-setdir"]});YUI().use("node","gallery-bidi-textinput","node-pluginhost",function(A){A.one("#yUnivHead").all("form.yucs-search input[type=text]").each(function(B){B.plug(A.Plugin.BidiTextEntry);});});YUI.add("yucs-breaking-news",function(A){A.namespace("ucs");A.ucs.BreakingNews=function(B){this.tab=B.node;this.init();};A.ucs.BreakingNews.prototype={init:function(){var B=null;this.bounceCount=0;this.bounceToggleCount=0;this.isDisplayed=false;this.authState=this.tab.getAttribute("data-authstate");this.linkTarget=this.tab.getAttribute("data-linktarget");this.intl=this.tab.getAttribute("data-lang");this.isMarkupBuilt=false;this.autoHideTimer=null;this.tab.removeClass("yucs-activate");this.TIME_STAMP_EXPIRE=1800000;this.AUTO_HIDE_INTERVAL=15000;this.MAX_BOUNCE=2;this.ACTION_KEYS={"AUTO_OPEN":"v","GENERIC_LINK_CLICK":"g","LINK_CLICK":"l","CLICK_CLOSE":"x","CLICK_OPEN":"e"};this.SUB_COOKIES={"BN_AUTOSHOW":{"COOKIE":"bnas","VALUES":{"SHOWN":1,"HIDDEN":0}},"BN_ID":{"COOKIE":"bnid"},"BN_TS":{"COOKIE":"bnts"}};this.AUTH_STATES={"signedout":0,"signedin":1,"middleauth":2};this.initCookie();var D=A.Cookie.getSub("ucs",this.SUB_COOKIES.BN_TS.COOKIE,Number),C=new Date().getTime();this.registerEvents();this.subscribeEvents();if(C>=D||D===null){this.requestBreakingNews();}},validateCookie:function(){autoShowCookie=A.Cookie.getSub("ucs",this.SUB_COOKIES.BN_AUTOSHOW.COOKIE,Number);if(autoShowCookie===this.SUB_COOKIES.BN_AUTOSHOW.VALUES.HIDDEN){this.fire("autoshow");this.autoHideTimer=A.later(this.AUTO_HIDE_INTERVAL,this,function(){this.fire("autohide");});}else{this.bounceTimer=A.later(500,this,this.bounce,null,true);}},registerEvents:function(){this.publish("autoshow");this.publish("autohide");this.publish("toggledisplay");this.publish("updatemodel");this.publish("newevent");},subscribeEvents:function(){this.tab.on("click",this.handleTabClick,this);this.on("autoshow",this.toggleDisplay,this);this.on("autohide",this.toggleDisplay,this);this.on("toggledisplay",this.handleToggleDisplayEvent,this);this.on("updatemodel",this.buildMarkup,this);A.Global.on("ucs_bn:newevent",this.setModel,this);},requestBreakingNews:function(){var C='select * from ucs.breakingnews where lang = "'+this.intl+'"',B="http://ucs.query.yahoo.com/v1/public/yql?"+A.QueryString.stringify({q:C,format:"json",t:(new Date()).getTime()});A.jsonpcached.getData({url:B,serviceName:"breakingnews",onSuccess:A.bind(function(F){if(F.query&&F.query.count){var D=F.query.results.result,E=parseInt(D.hide,10);if(E!==1){this.fire("newevent",{link:D.url,uniqueid:D.list_id,text:D.text});}}},this)});},setModel:function(D){var B=D.uniqueid,C=A.Cookie.getSub("ucs",this.SUB_COOKIES.BN_ID.COOKIE);this.breakingNewsLink=D.link;this.newsText=D.text;if(B!==C){this.setUCSSubCookie({subCookie:this.SUB_COOKIES.BN_ID.COOKIE,subCookieVal:B});this.setUCSSubCookie({subCookie:this.SUB_COOKIES.BN_AUTOSHOW.COOKIE,subCookieVal:this.SUB_COOKIES.BN_AUTOSHOW.VALUES.HIDDEN});this.fire("updatemodel");}else{if(!this.isMarkupBuilt){this.fire("updatemodel");}else{}}},buildMarkup:function(){var B=this.breakingNewsLink?'<a id="yucs-bn-txt" href="'+this.breakingNewsLink+'">'+this.newsText+"</a>":'<span id="yucs-bn-txt">'+this.newsText+"</span>&nbsp;&nbsp;";this.tab.one(".container").setContent(B).append(this.tab.one(".genericlink"));this.breakingNewsLink?this.tab.one(".genericlink").addClass("hide"):this.tab.one(".genericlink").removeClass("hide");this.tab.removeClass("hide");this.isMarkupBuilt=true;if(this.autoHideTimer){this.autoHideTimer.cancel();}A.later(60,this,this.validateCookie);},initCookie:function(){var B=A.Cookie.getSub("ucs",this.SUB_COOKIES.BN_AUTOSHOW.COOKIE,Number);if(B===null){this.setUCSSubCookie({subCookie:this.SUB_COOKIES.BN_AUTOSHOW.COOKIE,subCookieVal:this.SUB_COOKIES.BN_AUTOSHOW.VALUES.HIDDEN});}},setUCSSubCookie:function(C){var D=C.subCookie,B=C.subCookieVal;A.Cookie.setSub("ucs",D,B,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com"});},sendBeacon:function(E,D){var B=A.Node.create("<img />"),F=A.one("#yucs-bn-txt").get("text"),C=this.authState;if(D){B.once("load",function(G){this.tab.addClass("hide");var H=new Date();H.setTime(H.getTime()+this.TIME_STAMP_EXPIRE);this.setUCSSubCookie({subCookie:this.SUB_COOKIES.BN_TS.COOKIE,subCookieVal:H.getTime()});if(D.target==="_blank"){window.open(D.url);}else{location.href=D.url;}},this);}B.set("src","http://geo.yahoo.com/p?s=2146620889"+"&t="+Math.random()+"&_li="+this.AUTH_STATES[C]+"&locale="+this.tab.getAttribute("data-lang")+"&prop="+this.tab.getAttribute("data-property")+"&action="+E+"&txt="+encodeURIComponent(F)+"&otxt="+encodeURIComponent(this.newsText));},handleToggleDisplayEvent:function(D){var C=D.isShown,B=D.eventType;switch(B){case"click":this.sendBeacon(C?this.ACTION_KEYS.CLICK_OPEN:this.ACTION_KEYS.CLICK_CLOSE);break;case"ucs_bn:autoshow":this.sendBeacon(this.ACTION_KEYS.AUTO_OPEN);this.setUCSSubCookie({subCookie:this.SUB_COOKIES.BN_AUTOSHOW.COOKIE,subCookieVal:this.SUB_COOKIES.BN_AUTOSHOW.VALUES.SHOWN});break;default:break;}},toggleDisplay:function(D){var C=D.type,B=C==="click"?!this.isDisplayed:(C==="ucs_bn:autoshow"?true:false);B?this.tab.removeClass("slide"):this.tab.addClass("slide");this.fire("toggledisplay",{"isShown":B,"eventType":C});this.isDisplayed=B;},handleTabClick:function(B){B.preventDefault();if(B.target.hasClass("close")||B.target===B.currentTarget||B.target.get("tagName").toLowerCase()==="a"){if(B.target.get("tagName").toLowerCase()==="a"){if(B.target.hasClass("genericlink")){this.sendBeacon(this.ACTION_KEYS.GENERIC_LINK_CLICK,{"url":this.breakingNewsLink||B.target.get("href"),"target":this.linkTarget});}else{this.sendBeacon(this.ACTION_KEYS.LINK_CLICK,{"url":this.breakingNewsLink||B.target.get("href"),"target":this.linkTarget});}}else{if(this.autoHideTimer){this.autoHideTimer.cancel();}this.toggleDisplay(B);if(B.target.hasClass("close")){this.tab.addClass("hide");var C=new Date();C.setTime(C.getTime()+this.TIME_STAMP_EXPIRE);this.setUCSSubCookie({subCookie:this.SUB_COOKIES.BN_TS.COOKIE,subCookieVal:C.getTime()});}}}},bounce:function(){this.bounceToggleCount%2===0?this.tab.replaceClass("slide","slide-mini"):this.tab.replaceClass("slide-mini","slide");this.bounceToggleCount+=1;
this.bounceCount+=this.bounceToggleCount%2===0?1:0;if(this.bounceCount===this.MAX_BOUNCE){this.bounceTimer.cancel();}}};A.augment(A.ucs.BreakingNews,A.EventTarget,true,null,{emitFacade:true,prefix:"ucs_bn",broadcast:2});},"1.0",{requires:["node","event","event-custom","event-mouseenter","querystring-stringify","jsonp-cached","cookie"]});(function(){var A=document.getElementById("yUnivHead");YObj=(A&&A.getAttribute("data-property")==="srp")?Y:YUI();YObj.use("yucs-breaking-news",function(F){var D=true,E="",C=F.one("#yucs-bnews.yucs-activate");F.all("embed").each(function(G){E=G.get("src");if(E&&E.match(/ads.yimg.com\/qq\/a\/ba\/bankofamerica\/.*\.swf/i)){D=false;}});if(C&&D===true){var B=new F.ucs.BreakingNews({"node":C});}});}());YUI.add("ucs-activate",function(A){A.namespace("ucs");A.ucs.Activate=function(B){this.el=B;this.el.removeClass("yucs-inactive");this.el.removeClass("yucs-wait");};},"1.0",{requires:["node"]});(function(){var B=document.getElementById("yUnivHead"),A=(B&&B.getAttribute("data-property")==="srp")?Y:YUI();A.use("node","ucs-activate",function(E){var D=E.one("#yUnivHead").all("li.yucs-inactive");var C=E.one("#yUnivHead").all("li.yucs-wait");D.each(function(F){var G=new E.ucs.Activate(F);});C.each(function(F){var G=new E.ucs.Activate(F);});});})();
/* rmp.js 755083 */ YUI.add("media-rmp",function(b){var k=/<style([^>]*)>([^<]+)<\/style>/igm,f=/@import\s*url\s*\(([^\)]*?)\);/igm,a=/<link([^>]*)/igm,j=/href=(['"]?)([^"']*)\1/igm,d="/_remote/",i="_@_!_",l=/_@_!_/igm,h="RMPClient",c=/(http[^\?]*?\/combo)\?(.*)/igm,e={srcNode:null,params:{m_id:"MediaRemoteInstance",m_mode:"fragment",instance_id:null},baseUrl:"",onAbort:function(m){},onFailure:function(n,m){},onSuccess:function(m){},onComplete:function(m){},onMarkup:function(o){var n=this,m=b.one(n.config.srcNode);m.setContent(n.markup);m.setStyle("minHeight","");m.removeClass("yom-loading")},data:{},context:null,timeout:1000,continueOnError:false,path:d};var g=function(n){var m=this,o;if(n.rmpPath){n.path=n.rmpPath}e.context=m;m.config=b.merge(e,n||{});o=m.config;o.params=b.merge(e.params,n.params||{});if(!o.params.instance_id&&!o.path){m._errorHandler({message:"RMP config requires either an instance_id or a path"});return}if(!o.srcNode){m._errorHandler({message:"RMP config must include srcNode"});return}m.error=false;m.markup="";m.jsUrls=[];m.cssUrls=[];m.inlineCSS=[];m.embedInlineJs=[];m.markupInlineJs=[];m.request=null};g.prototype={load:function(){var m=this,n=m.config,p=n.params.instance_id,r=n.srcNode,q=m._getRMPUrl(n),o;if(m.error){return true}b.log("srcNode "+r,"info",h);b.log("calling remote url "+q,"info",h);m.request=b.io(q,{timeout:n.timeout,context:m,on:{success:function(t,v){try{m._load(v)}catch(u){m._errorHandler(u)}},failure:function(t,u){if(u&&"abort"===u.statusText){m._abortHandler()}else{m._errorHandler({message:"Y.io call failed in RMP.load()"})}}}})},getRequest:function(){return this.request},_getRMPUrl:function(){var p=[],n=this,o=n.config,m;for(m in o.params){p.push(encodeURIComponent(m)+"="+encodeURIComponent(o.params[m]))}return o.baseUrl+o.path+"?"+p.join("&")},_load:function(n){var x=this,q=x.config,w=n.getResponseHeader("Content-Type").split(";"),p=w[0]==="multipart/mixed",s=q.path.indexOf(d)===-1,y="",v="";if(p||s){try{var m=p?w[1].split("=")[1]:"dali-response-split",r=n.responseText.replace(/\r/g,"").split("--"+m).slice(1,-1),t="\n\n";b.Array.each(r,function(A){var z=A.indexOf(t),o=A.slice(z+t.length),B=A.slice(0,z).split("\n"),C={};b.Array.each(B,function(D){if(D){var E=D.split(": ");C[E[0]]=E[1].split("; ")[0]}});switch(C["Content-Type"]){case"text/plain":v+=" "+o;break;case"text/html":y=o;break}})}catch(u){b.log("Error parsing multipart response: "+u.message,"error");b.log(n.responseText,"info");return}}else{y=n.responseText;v=x._decode(n.getResponseHeader("X-Maple-Embed-Blob"))}x._parse(y,v);x._loadFiles(b.bind(x._execute,x))},_decode:function(m){m=m.replace(/%2B/g,i);m=decodeURIComponent(m).replace(/\+/igm," ").replace(l,"+");return m},_parse:function(n,o){var m=this;m.markup=n;if(m.config.loadCss!==false){m._parseCSS(o);m._parseCSS(n)}if(m.config.loadJs!==false){m._parseJS(o,false);m._parseJS(n,true)}m._parseDuplicates()},_parseCSS:function(x,u){var y=this,w=[],t=k.exec(x),o,r,q,s,v,n,m;while(t){o=t[2];if(o){r=new RegExp(f);q=r.exec(o);while(q){for(s=0,v=q.length;s<v;s++){}n=q[1];if(n){w.push(n)}q=r.exec(o)}}o=o.replace(f,"");if(b.Lang.trim(o)!=""){y.inlineCSS.push(o)}t=k.exec(x)}t=a.exec(x);while(t){var p=t[1];if(p){m=j.exec(p);if(m){n=m[2];if(n){w.push(n)}j.exec(p)}}t=a.exec(x)}if(u){return w}else{if(w.length){y.cssUrls=y.cssUrls.concat(w)}}},_parseJS:function(q,r){var o=b.Node.create("<div></div>"),m=this,p,n;o.setContent(q);p=o.all("script").each(function(s){s.get("parentNode").removeChild(s)});p.each(function(s){n=null;if(s){n=s.get("src")}if(n){m.jsUrls.push(n)}else{if(r){m.markupInlineJs.push(s)}else{m.embedInlineJs.push(s)}}})},_parseDuplicates:function(){var p=this,q,s,n,m,o,r;o=YUI.namespace("Media.RMP");if(!o.assetsAlreadyLoaded){o.assetsAlreadyLoaded=[];r=b.one("head");r.all("> script[src]").each(function(t){q=t.get("src");p._removeDuplicates([q])});p._removeDuplicates(p._parseCSS(r.getContent(),true))}p.cssUrls=p._removeDuplicates(p.cssUrls);p.jsUrls=p._removeDuplicates(p.jsUrls);b.log("found new assets : "+p.cssUrls+"\n"+p.jsUrls,"info",h)},_removeDuplicates:function(r){var n=this,q=[],o,p,m;for(p=0,m=r.length;p<m;p++){o=n._processUrl(r[p]);if(o){q.push(o)}}return q},_processUrl:function(m){var u,n,o,r,t,p,w,v=new RegExp(c),s=v.exec(m),q=YUI.Media.RMP.assetsAlreadyLoaded;if(s){n=s[1];u=s[2].replace(/&amp;/g,"&").split("&");o=[];for(p=0,w=u.length;p<w;p++){if(b.Array.indexOf(q,u[p])==-1){q.push(u[p]);o.push(u[p])}}if(o.length>0){return n+"?"+o.join("&")}else{return null}}else{if(b.Array.indexOf(q,m)==-1){q.push(m);return m}else{return null}}},_loadFiles:function(n){var m=this;m._getCSS(n)},_isFF9orGreater:function(){return b.UA.gecko>=9},_getCSS:function(o){var m=this,n=m.config;if(m.cssUrls.length===0){o();return}else{}b.Get.css(m.cssUrls,{timeout:n.timeout,context:m,async:true,onFailure:function(p){if(!m._isFF9orGreater()){if(!n.continueOnError){m._errorHandler({message:"Y.Get.css failed",cause:p})}else{m._getScript(o)}}},onTimeout:function(p){if(!m._isFF9orGreater()){if(!n.continueOnError){m._errorHandler({message:"Y.Get.css timed out",cause:p})}else{m._getScript(o)}}},onSuccess:function(){if(!m._isFF9orGreater()){m._getScript(o)}}});if(m._isFF9orGreater()){m._getScript(o)}},_getScript:function(o){var m=this,n=m.config;if(m.jsUrls.length===0){o();return}else{}b.Get.script(m.jsUrls,{timeout:n.timeout,context:m,async:false,onFailure:function(p){m._errorHandler({message:"Y.Get.script failed",cause:p});if(n.continueOnError){o()}else{}},onTimeout:function(p){m._errorHandler({message:"Y.Get.script timed out",cause:p});if(n.continueOnError){o()}else{}},onSuccess:function(){o()}})},_execute:function(){var m=this,n=m.config;try{m._executeInlineCSS();m._callUserCallback(n.context,n.onMarkup,[n.data]);m._executeScript();m._completionHandler()}catch(o){m._errorHandler(o)}},_executeInlineCSS:function(){var o=this,n,p,m;for(p=0,m=o.inlineCSS.length;p<m;p++){n=document.createElement("style");n.type="text/css";if(b.Lang.isObject(n.styleSheet)){n.styleSheet.cssText=o.inlineCSS[p]}else{n.appendChild(document.createTextNode(o.inlineCSS[p]))}try{document.getElementsByTagName("head")[0].appendChild(n)}catch(q){if(!o.config.continueOnError){o._errorHandler({message:"Inline css execute failed",cause:q});return}}}},_executeScript:function(){var n=this,o,m,p;if(!b.Media.RMP.id){b.Media.RMP.id="_ts"+new Date().getTime()}p=b.Media.RMP.id;if(!YUI.RMP){YUI.namespace("RMP")}if(!YUI.RMP[p]){YUI.RMP[p]={currentYSandBox:b}}if(!YUI.RMP[p].proxyAdd){YUI.RMP[p].proxyAdd=function(s,r,q){var t=YUI.RMP[p].currentYSandBox;t.use("event",function(u){u.Event.attach("load",q,window)})}}for(o=0,m=n.markupInlineJs.length;o<m;o++){n._insertInlineJS(n.markupInlineJs[o])}for(o=0,m=n.embedInlineJs.length;o<m;o++){n._insertInlineJS(n.embedInlineJs[o])}},_insertInlineJS:function(o){var p=b.config.doc,q=(o?o.get("ownerDocument"):null)||p,n=q.one("head")||q.get("documentElement"),m=b.one(p.createElement("script")),r=b.Media.RMP.id;m._node.text=o._node.text.replace("YUI.Env.add",'YUI.RMP["'+r+'"].proxyAdd').replace("YUI(YUI.YUICfg).use",'YUI.RMP["'+r+'"].currentYSandBox.applyConfig(YUI.YUICfg);YUI.RMP["'+r+'"].currentYSandBox.use');n.appendChild(m);m.remove();if(o){o.remove()}},_abortHandler:function(){b.log("Request aborted","info",h);var m=this,n=m.config;m._callUserCallback(n.context,n.onAbort,[n.data]);m._callUserCallback(n.context,n.onComplete,[n.data])},_errorHandler:function(p){b.log("Encountered error "+p.message,"error",h);var m=this,n=m.config;m.error=true;m._callUserCallback(n.context,n.onFailure,[p,n.data]);m._callUserCallback(n.context,n.onComplete,[n.data])},_completionHandler:function(){var m=this,n=m.config;m._callUserCallback(n.context,n.onSuccess,[n.data]);m._callUserCallback(n.context,n.onComplete,[n.data])},_callUserCallback:function(n,o,m){o.apply(n||this,m)}};b.namespace("Media.RMP").load=function(n){var m=new g(n);m.load();return m}},"0.0.1",{requires:["node","io-base","async-queue","get"]});
if(typeof YAHOO==="undefined"||!YAHOO){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.CONF){YAHOO.ULT.CONF={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON="http://geo.yahoo.com/t";}
if(!YAHOO.ULT.DOMAIN){YAHOO.ULT.DOMAIN=".yahoo.com";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
if(typeof(YAHOO.ULT.DEBUG)==="undefined"){YAHOO.ULT.DEBUG=0;}
YAHOO.ULT.DELIMITERS={'/':'P',';':'1','?':'P','&':'1','#':'P'};(function(){var YLT=YAHOO.ULT;}());(function(){var YLT=YAHOO.ULT;YLT.strip_rd=function(u,data){var idx=u.indexOf('/**');if(idx!==-1){data.clean=u.substr(idx+3);data.clean=decodeURIComponent(data.clean);}
return data;};YLT.strip=function(u){var delims=YLT.DELIMITERS;var data={url:u,clean:'',cookie:'',keys:[]};var idx=0;while(u.indexOf('_yl',idx)!==-1){var start=u.indexOf('_yl',idx);if(idx<start){data.clean+=u.slice(idx,start-1);}
idx=start+3;if(delims[u.charAt(start-1)]&&u.charAt(start+4)==='='){data.ult=1;var key="_yl"+u.charAt(start+3);var value="";for(start=start+5;start<u.length&&!delims[u.charAt(start)];start++){value+=u.charAt(start);}
data.keys.push(key);data[key]=value;if(key!=='_ylv'){data.cookie+="&"+key+"="+value;}
if(delims[u.charAt(start)]&&delims[u.charAt(start)]==='P'){data.clean+=u.charAt(start);}
idx=start+1;}else{data.clean+=u.slice(start-1,idx);}}
if(data.ult){data.cookie=data.cookie.substr(1);data.clean+=u.substr(idx);if(data._ylv==='0'){YLT.strip_rd(u,data);}}
return data;};YLT.click_token=function(e,u,t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();YLT.IMG.onerror=YLT.IMG.onload=function(){location=u;};e.preventDefault();i.src=src;};YLT.beacon_token=function(t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();i.src=src;};}());YUI().use('node',function(Y){var YLT=YAHOO.ULT;YLT.set_href=function(el,data,keyname){if(data.html){el.set('href',data[keyname]);el.set('innerHTML',data.html);}else{el.set('href',data[keyname]);}};YLT.clicked=function(e,data){var el=e.currentTarget;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');}
if(!el){return;}
if(el.get('className').indexOf('yltasis')!==-1){}else if(el.get('className').indexOf('yltnofollow')!==-1){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else if(data._ylv==3){YLT.set_href(el,data,"clean");var cook="D="+data.cookie+"; Max-Age=10; Path=/; Domain="+YLT.DOMAIN;document.cookie=cook;}else if(data._ylv==8||data._ylv==9){}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||data.target==="_blank"){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else{YLT.set_href(el,data,"clean");YLT.click_token(e,data.clean,data.cookie);}};YLT.revert=function(e,data){var el=e.currentTarget;var ie_ischild=0;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');ie_ischild=1;}
if(!el){}else{if(YLT.isIE&&ie_ischild){delete data.html;}
YLT.set_href(el,data,"url");}};YLT.clean=function(){if(YAHOO.YHLDEBUG){return;}
YLT.isIE=(typeof(ActiveXObject)==='function');var el,data,name,i;for(i=0;i<document.links.length;i++){el=document.links[i];if(el.className.indexOf('yltasis')!==-1){continue;}
data=YLT.strip(el.getAttribute('href',2));if(!data.ult){continue;}else if(YLT.CONF.force_beacon&&data._ylv!=8&&data._ylv!=9){data._ylv='X';}else if(YLT.isSafari&&data._ylv!=3&&data._ylv!=8&&data._ylv!=9){continue;}
for(name=0;name<data.keys.length;name++){if(data.keys[name]!=='_ylv'){delete data[data.keys[name]];}}
delete data.keys;delete data.ult;data.target=el.target;if(YLT.isIE&&(el.innerHTML.indexOf('http')===0||el.innerHTML.indexOf('www')===0||el.innerHTML.indexOf('@')!==-1||el.className.indexOf('yltiefix')!==-1)){data.html=el.innerHTML;}
var node=Y.one(el);YLT.set_href(node,data,"clean");node.on("click",YLT.clicked,null,data);if(!YLT.CONF.cleanest){node.on("mousedown",YLT.revert,null,data);}}};window.setTimeout(function(){YAHOO.ULT.clean();},1);});
/* iesitemode.js 189359 */ YUI.add("media-iesitemode",function(a){a.namespace("Media");a.Media.Iesitemode=function(b){this.title=b.title;this.spaceid=b.spaceid;this.track_host=YAHOO.ULT.BEACON.replace(/\/t$/,"/p");if(this.checkSiteMode()){this.insertJumpList();this.instrument()}};a.Media.Iesitemode.prototype={instrument:function(){if(window.external.msIsSiteModeFirstRun(true)===1){var b=this.track_host+"?s="+this.spaceid+"&type=1&t="+Math.random();(new Image()).src=b}},insertJumpList:function(){var d=a.all("#navigation > .bd > .nav > div:first-child > ul > li > a");var b=new Array();d.each(function(f,e){b.push([f.one("span").getContent(),f.get("href")])});window.external.msSiteModeCreateJumplist(this.title);b=b.reverse();for(var c in b){window.external.msSiteModeAddJumpListItem(b[c][0],b[c][1],"/favicon.ico")}if(b.length>0){window.external.msSiteModeShowJumplist()}},checkSiteMode:function(){if(typeof window.external==="undefined"){return false}if(typeof window.external.msIsSiteMode==="undefined"){return false}return true}}},"0.1");
/* trfsm.js 797026 */ YUI.add("media-trfsm",function(a){a.namespace("Media");a.Media.TrafficSimulator=function(b){if(!b){return}this.config=b};a.Media.TrafficSimulator.prototype={load:function(){var c,d;c=this.config&&this.config.dataUrl&&a.Lang.isString(this.config.dataUrl)?a.Lang.trim(this.config.dataUrl):"";if(c.indexOf("http://")!==0){return}d={context:this,on:{success:a.Media.TrafficSimulator.handleSuccess,failure:a.Media.TrafficSimulator.handleFailure},timeout:1000};try{a.jsonp(c,d)}catch(b){}}};a.Media.TrafficSimulator.handleSuccess=function(c){var b,g,f;try{b=c&&c.users_ratio?parseInt(c.users_ratio,10):0;g=c&&c.req_per_user?parseInt(c.req_per_user,10):0;f=c&&a.Lang.isArray(c.urls)?c.urls:[];a.Media.TrafficSimulator.runSimulation(b,g,f)}catch(d){}};a.Media.TrafficSimulator.runSimulation=function(e,f,m){var h,g,c,n,l,b,k,d=m.length;if(e<1||f<1||d<1){return}if(e!=1&&Math.floor(Math.random()*e)!=1){return}l={};b=0;for(h=0;h<f;h++){c=Math.floor(Math.random()*d);n=m[c];if(typeof l[n]!=="undefined"&&b<d){for(g=0;g<d;g++){n=m[g];if(typeof l[n]==="undefined"){break}}}l[n]=true;b++;k=new Image();k.src=n}};a.Media.TrafficSimulator.handleFailure=function(){};window.YMediaTrafficSimulator=window.YMediaTrafficSimulator||a.Media.TrafficSimulator},"1.0",{requires:["base","jsonp"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("jsonp",function(c){var b=c.Lang.isFunction;function a(){this._init.apply(this,arguments);}a.prototype={_init:function(d,f){this.url=d;this._requests={};this._timeouts={};f=(b(f))?{on:{success:f}}:f||{};var e=f.on||{};if(!e.success){e.success=this._defaultCallback(d,f);}this._config=c.merge({context:this,args:[],format:this._format,allowCache:false},f,{on:e});},_defaultCallback:function(){},send:function(){var d=this,g=c.Array(arguments,0,true),f=d._config,h=d._proxy||c.guid(),e;if(f.allowCache){d._proxy=h;}if(d._requests[h]===undefined){d._requests[h]=0;}if(d._timeouts[h]===undefined){d._timeouts[h]=0;}d._requests[h]++;g.unshift(d.url,"YUI.Env.JSONP."+h);e=f.format.apply(d,g);if(!f.on.success){return d;}function i(k,j){return(b(k))?function(n){var m=true,l="_requests";if(j){++d._timeouts[h];--d._requests[h];}else{if(!d._requests[h]){m=false;l="_timeouts";}--d[l][h];}if(!d._requests[h]&&!d._timeouts[h]){delete YUI.Env.JSONP[h];}if(m){k.apply(f.context,[n].concat(f.args));}}:null;}YUI.Env.JSONP[h]=i(f.on.success);c.Get.script(e,{onFailure:i(f.on.failure),onTimeout:i(f.on.timeout,true),timeout:f.timeout,charset:f.charset,attributes:f.attributes});return d;},_format:function(d,e){return d.replace(/\{callback\}/,e);}};c.JSONPRequest=a;c.jsonp=function(d,f){var e=new c.JSONPRequest(d,f);return e.send.apply(e,c.Array(arguments,2,true));};if(!YUI.Env.JSONP){YUI.Env.JSONP={};}},"3.5.1",{requires:["get","oop"]});
/* i13n.js 808012 */ if(!YAHOO){YAHOO={}}if(!YAHOO.i13n){YAHOO.i13n={}}if(!YAHOO.i13n.CIMG){YAHOO.i13n.CIMG=new Image()}YUI.add("media-i13n",function(b){var a="i13n";YAHOO.i13n.setSpaceid=function(c){YAHOO.i13n.spaceid=c};YAHOO.i13n.setEga=function(c){YAHOO.i13n.ega=c};YAHOO.i13n.setRdg=function(c){YAHOO.i13n.rdg=c};YAHOO.i13n.sendComscoreEvent=function(e){if(!YAHOO.i13n.spaceid){YAHOO.i13n.spaceid=1197072712}var d="//b.scorecardresearch.com/b?c1=2&c2=7241469&c7="+encodeURIComponent(document.location.href)+"&c5="+YAHOO.i13n.spaceid;if(typeof YAHOO.i13n.ega!=="undefined"&&typeof YAHOO.i13n.rdg!=="undefined"){d+="&c15="+YAHOO.i13n.ega+"$"+YAHOO.i13n.rdg}for(var c in e){if(e.hasOwnProperty(c)){d+="&"+c+"="+e.hasOwnProperty(c)}}YAHOO.i13n.CIMG.src=d}},"1.0",{});var GravityInsights=function(b){function h(a,d){var c,f=d||"beacon";c=document.getElementsByTagName("title")[0]===void 0?"":encodeURIComponent(document.getElementsByTagName("title")[0].innerHTML);var g=new Date,g=g.getMilliseconds()+"-"+g.getSeconds();c=["cbust="+g,"site_guid="+b.site_guid,"action="+f,"user_guid="+a,"referrer="+e(document.referrer),"browser_useragent="+e(navigator.userAgent),"OS="+e(j()),"href="+e(location.href),"url="+k(),b.thread_id!==void 0?"thread_id="+b.thread_id:"",b.post_id!== void 0?"post_id="+b.post_id:"",b.forum_id!==void 0?"forum_id="+b.forum_id:"",b.user_id!==void 0?"user_id="+b.user_id:"",b.username!==void 0?"user_name="+e(b.username):"",b.post_title!==void 0?"post_title="+e(b.post_title):"",b.thread_title!==void 0?"thread_title="+e(b.thread_title):"",b.forum_title!==void 0?"forum_title="+e(b.forum_title):"",c!==void 0?"article_title="+c:"",b.external_user_id!==void 0?"external_user_id="+b.external_user_id:"",b.article_id!==void 0?"article_id="+b.article_id:"",b.type!== void 0?"type="+b.type:"",b.board!==void 0?"board="+encodeURIComponent(b.board):""].join("&");f=document.createElement("script");f.src=i+"/log?"+c;f.type="text/javascript";c=document.getElementsByTagName("head")[0]||document.documentElement;c.insertBefore(f,c.firstChild)}function e(a){return window.encodeURIComponent?encodeURIComponent(a):escape(a)}function j(){var a="Unknown OS";navigator.appVersion.indexOf("Win")!==-1&&(a="Windows");navigator.appVersion.indexOf("Mac")!==-1&&(a="MacOS");navigator.appVersion.indexOf("X11")!== -1&&(a="UNIX");navigator.appVersion.indexOf("Linux")!==-1&&(a="Linux");return a}function k(){var a=document.getElementsByTagName("link"),b=a.length,c="";for(x=0;x<b;x++)if((c=a[x].getAttribute("rel"))&&c.indexOf("canonical")===0)return encodeURIComponent(a[x].getAttribute("href"));else if(x===b)break;return encodeURIComponent(location.href)}var i="http://rma-api.gravity.com/v1/beacons";(function(){var a;a=document.cookie;var d=a.indexOf("grvinsights");if(d===-1)a=" ";else{var c=a.indexOf(";",d);if(c=== -1)c=a.length;a=unescape(a.substring(d+11+1,c))}if(a===" "||a==="")d="?u="+b.user_id+"&sg="+b.site_guid,a=document.createElement("script"),a.src=i+"/initialize"+d,a.type="text/javascript",d=document.getElementsByTagName("head")[0]||document.documentElement,d.insertBefore(a,d.firstChild),a=!1;a!==void 0&&a&&h(a,"beacon")})();return{cc:function(a,b){if(a!==""){var c=new Date;c.setTime(c.getTime()+432E8);c="; expires="+c.toGMTString();document.cookie=a+"="+b+c+"; path=/";h(b,"beacon")}}}}(gravityInsightsParams);
/* rotater.js 649121 */ YUI.add("media-rotater",function(b){function a(){a.superclass.constructor.apply(this,arguments)}a.NAME="rotater";a.ATTRS={guid:{value:b.guid(),writeOnce:true},interval:{value:null,setter:function(c){var d=parseInt(c,10);return d?d:0},writeOnce:true},current:{value:null},loop:{value:true,setter:function(c){return c?true:false}},loading:{value:false},cached:{value:[]},count:{value:0},preload:{value:false,setter:function(c){return c?true:false}},selector:{value:null,setter:function(c){return c?c:"div"}},transition:{value:null,setter:function(c){if(c){c.on=null;return c}return{easing:"linear",duration:3,opacity:{value:0}}},writeOnce:true},node:{value:null,setter:function(c){return b.one(c)},writeOnce:true},data:{value:null,setter:function(c){return c||"data-rotater-image"},writeOnce:true}};b.namespace("Media").Rotater=b.extend(a,b.Base,{/*     *     *     *     */toString:function(){return"Rotater <"+this.get("node")+">"},/*    *    *    * node:    * data:    * transition:    * selector:    * interval : auto-rotate (seconds)    * preload : boolean (true,false)    */initializer:function(c){this.set("node",c.node);this.set("data",c.data);this.set("transition",c.transition);this.set("selector",c.slides);this.set("interval",c.interval);this.set("preload",c.hasOwnProperty("preload")?c.preload:false);if(!this.get("node")){return}var e=this.getSlides(),d=0;for(;d<e.size();d++){e.item(d).setAttribute("data-rotater-index",d)}this._load(0,true);return this},/*     * Retrieve the {i}th slide (base-0) in the Rotater     *     * @param i (int) - index of the slide to be retrieved, if < 0 assumed to be from the end of the list     * @return Node     */getSlide:function(d){var e=this.getSlides(),c=0;d=parseInt(d,10);if(d<0){d=(e.size()+d)%e.size()}for(;c<e.size();c++){if(parseInt(e.item(c).getAttribute("data-rotater-index"),10)===d){return e.item(c)}}return null},getSlides:function(){return this.get("node").all(this.get("selector"))},getImage:function(c){var d=this.getSlide(c);if(!d){return null}return d.getAttribute(this.get("data"))},_load:function(h,g){var j=this.getSlides(),c=null,e=null,f=null,d=null;if(h==0){this.getSlide(0).addClass("first")}if(h==0&&this.get("preload")){c=j.item(0);e=c.getComputedStyle("backgroundImage");f=e.match(/url\((.*)\)/);if(f){e=f[1].replace(/\"/g,"")}this._load(1,false);this._load(-1,false);this._loadingCallback({index:0,url:e,node:null});return}if(h<0){h=j.size()+h}if(h>=j.size()){return}e=this.getImage(h);if(!e||b.Array.indexOf(this.get("cached"),this.getImage(h))>=0){return}d=b.Node.create("<img>");d.setStyle("display","none");b.one("body").append(d);d.on("load",function(i){this.owner._loadingCallback(this);if(g){this.owner._load(this.index+1,false);this.owner._load(this.index-1,false)}},{owner:this,index:h,url:e,node:d});this.set("loading",true);d.set("src",e);return true},_loadingCallback:function(d){var f=d.url,e=parseInt(d.index,10),c=null,g=null;this.set("loading",false);this.get("cached").push(f);g=this.getSlide(e);this.fire("rotater:load",{index:e});g.setStyle("backgroundImage","url("+f+")");if(e===0){if(!this.get("preload")){g.transition({duration:this.get("transition").duration/2,opacity:0.99})}this.set("current",0);if(this.get("interval")&&this.getSlides().size()>1){b.later(this.get("interval")*1000,this,"next",[],true)}}if(d.node){d.node.remove()}},_done:function(d,c){this.set("transitioning",false);this.set("current",c);d.remove().removeClass("first").setStyle("opacity",0);this.get("node").appendChild(d);this.getSlide(c).addClass("first")},/*     *     *     * @param next (int) - the data-rotater-index of the slide to be displayed next     */rotate:function(d){var e=this,f=this.getSlide(this.get("current")),c=this.get("transition");c.on={start:function(){var h=parseInt(f.getAttribute("data-rotater-index"),10),g=parseInt(d.getAttribute("data-rotater-index"),10);this.set("transitioning",true);this.rotater.fire("rotater:start",{current:h,next:g})},end:function(){var h=parseInt(f.getAttribute("data-rotater-index"),10),g=parseInt(d.getAttribute("data-rotater-index"),10);this.rotater.fire("rotater:end",{previous:h,current:g});this.rotater._done(this,g)}};f.rotater=this;d=this.getSlide(d);if(this.getSlides().size()>2){d.remove();this.get("node").insert(d,this.getSlides().item(1))}d.setStyle("opacity",0.99);f.transition(c);return this},show:function(c){c=parseInt(c,10);if(!this.get("transitioning")){this.rotate(c)}this._load(c+1,true);this._load(c-1,true);return this},/*     * Display the next slide     */next:function(){if(!this.get("transitioning")){this.rotate((this.get("current")+1)%this.getSlides().size())}this._load(this.get("current")+2,true);return this},/*     * Display the previous slide     */previous:function(){if(!this.get("transitioning")){var c=this.get("current")-1;if(c<0){c=this.getSlides().size()+c}this.rotate(c)}this._load(this.get("current")-2,true);return this},/*     * Clean-up     */destructor:function(){this.set("transitioning",false);this.set("transition",{});this.set("current",null);this.set("node",null);this.set("data",null)}})},"3.3.0",{requires:["base","event","node","transition"]});
/* megatron.js 725944 */ YUI.add("media-megatron",function(b){function a(){a.superclass.constructor.apply(this,arguments)}b.namespace("Media").Megatron=b.extend(a,b.Base,{initializer:function(g){if(g.device!=="full"){return false}g.preload=g.hasOwnProperty("preload")&&parseInt(g.preload,10)!==0?true:false;this.set("srcNode",b.one(g.node));if(!this.get("srcNode")){return false}var j=function(m){m.target.ancestor("div.pane",true).addClass("hover");m.target.ancestor("div.yom-megatron").addClass("hover")},f=function(m){m.target.ancestor("div.pane",true).removeClass("hover");m.target.ancestor("div.yom-megatron").addClass("hover")},d=function(m){m.target.ancestor("div.pane",true).addClass("related")},k=function(m){m.target.ancestor("div.pane",true).removeClass("related")},e=function(m){m=m.ancestor("a",true);if(m.getAttribute("data-popup")){window.open(m.getAttribute("data-url"),"window_"+b.guid(),m.getAttribute("data-popup")+",location=0,scrollbars=0");return true}return false},c,h,i,l;if(!YAHOO.widget){YAHOO.widget={}}if(g.inlineVideo&&(!YAHOO.widget.Video)&&g.swf&&g.yep&&this.get("srcNode").all("div.pane.video").size()>0){b.Get.script(g.yep,{})}h=this.get("srcNode").one(".pane-nav .prev strong");i=this.get("srcNode").one(".pane-nav .next strong");if(i&&h){c=this.get("srcNode").one(".pane-nav");if(c){c.setStyle("top",(c.ancestor(".yog-col").one("div .pane").get("region").height/2)-(c.one("div").get("region").height/2)+"px");l=function(r,n){r.halt(true);var m=r.target.ancestor("div.yog-col",false),q=m.all("div.x1"),p=q.item(0),o=q.item(n[0]>=0?n[0]:q.size()+n[0]);m.setStyle("height",m.get("region").height+"px");p.setStyles({position:"absolute",zIndex:3}).addClass("yom-mega-carousel first");o.setStyles({display:"block",opacity:1});p.transition({duration:0.5,opacity:0},function(){var t=null,s=this.ancestor("div.yog-col");this.remove();t=s.one("div.x1");t.setStyles({opacity:1}).addClass("first");s.append(this);this.setStyles({zIndex:0,display:"none"})})};h.on("click",l,null,[-1]);i.on("click",l,null,[1])}}b.each(this.get("srcNode").all("div.pane"),function(n){var p,v=n.one("div.meta"),r=n.one("div.bd"),q=null,o=null,s=null,w=null,t=null,m=null,u=null;if(g.preload&&(b.UA.ie&&b.UA.ie<9)){if(n.one("span.slide")){n.one("span.slide").setStyle("opacity",1)}}n.on("mouseenter",j);n.on("mouseleave",f);b.delegate("mouseenter",d,n,"div.rel li");b.delegate("mouseleave",k,n,"div.rel li");if(!n.hasClass("no-img")&&n.all("a.img span.slide").size()){q=n.one("div.hd .status .next");o=n.one("div.hd .status .prev");s=new b.Media.Rotater({node:n.one("a.img"),slides:"span.slide",data:"data-rotater-image",preload:g.preload?true:false,transition:{opacity:0,duration:q&&o?0.5:1},interval:q&&o?0:5});if(q&&o){n.rotater=s;s.on("rotater:load",function(){n.addClass("init")});s.on("rotater:start",function(y){var x=n.rotater.getSlide(y.next).getAttribute("data-link");n.one(".status strong").set("innerHTML",y.next+1);if(x){n.one("h2 a").setAttribute("href",x);n.one("a.img").setAttribute("href",x)}});q.on("click",function(x){n.rotater.next();x.halt(true)});o.on("click",function(x){n.rotater.previous();x.halt(true)})}}if(n.hasClass("overlay")){p=n.one(".ft");p.setAttribute("data-height",p.get("region").height);p.setStyle("width",(n.one(".bd").get("region").width-16)+"px");w=function(){p.transition({easing:"ease-in-out",duration:0.3,opacity:0.99,bottom:parseInt(p.getStyle("bottom"),10),height:p.getAttribute("data-height")+"px"})};m=function(){p.setStyle("opacity",1);p.transition({easing:"ease-in-out",duration:0.3,opacity:0,bottom:parseInt(p.getStyle("bottom"),10),height:0})};n.one("h2 a").on("focus",function(){w()});n.on("mouseenter",function(){w()});n.one("h2 a").on("blur",function(){m()});n.on("mouseleave",function(){m()});p.setStyle("bottom",(v.get("region").bottom-r.get("region").top)+"px")}u=function(A){var E=A.target.ancestor(".yom-megatron"),D=A.target.ancestor(".pane",true),x=null,z=null,y=null,C=null,B=null;if(!E||!D){return}x=A.target.ancestor("a",true);if(!x){x=D.one("h2 a")}if(x.hasClass("popup")){A.preventDefault();e(x);return}else{if(x.getAttribute("target")){window.open(x.get("href"));A.preventDefault()}}if(g.inlineVideo&&D.hasClass("video")&&D.getAttribute("data-mega-meta")&&!x.ancestor(".rel")){A.halt(true);D.detach("click");z=D.one("strong.play");if(z){z.remove()}y=D.get("region");C=b.guid();B=b.Node.create('<div class="yom-mega-video " id="'+C+'"></div>');D.append(B);B.setStyle("width",y.width);B.setStyle("height",y.height);B.transition({duration:0.2,opacity:1,on:{start:function(){},end:function(){if(YAHOO.widget.Video){var G=D.getAttribute("data-mega-meta"),F=new YAHOO.widget.Video(C,{playerUrl:g.swf,width:y.width,height:y.height,lang:g.lang,region:g.region,pageSpaceId:g.spaceID,autoPlay:1,vid:G},{onPlayerReady:function(){},onPlaybackStart:function(){},onPlayerError:function(H){b.log(H)}});F.render()}}}});return false}if(!A.target.get("tagName").toUpperCase()=="DIV"){document.location=x.get("href")}};n.all("p,b,em,h2 a,a.img,li a").on("click",u)})},toString:function(){return"Y.Media.Megatron <#"+this.get("srcNode").get("id")+">"}},{NAME:"yom-megatron",ATTRS:{srcNode:{value:null,setter:function(c){return b.one(c)}}}})},"3.3.0",{requires:["plugin","scrollview-base","scrollview-paginator","transition","media-rotater","get","base","node","node-focusmanager","event","event-mouseenter"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("event-simulate",function(a){(function(){var k=a.Lang,j=a.Array,f=k.isFunction,d=k.isString,g=k.isBoolean,o=k.isObject,n=k.isNumber,m=a.config.doc,p={click:1,dblclick:1,mouseover:1,mouseout:1,mousedown:1,mouseup:1,mousemove:1,contextmenu:1},l={keydown:1,keyup:1,keypress:1},c={blur:1,change:1,focus:1,resize:1,scroll:1,select:1},e={scroll:1,resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};a.mix(e,p);a.mix(e,l);function i(v,z,u,s,B,r,q,A,x,D,C){if(!v){a.error("simulateKeyEvent(): Invalid target.");}if(d(z)){z=z.toLowerCase();switch(z){case"textevent":z="keypress";break;case"keyup":case"keydown":case"keypress":break;default:a.error("simulateKeyEvent(): Event type '"+z+"' not supported.");}}else{a.error("simulateKeyEvent(): Event type must be a string.");}if(!g(u)){u=true;}if(!g(s)){s=true;}if(!o(B)){B=a.config.win;}if(!g(r)){r=false;}if(!g(q)){q=false;}if(!g(A)){A=false;}if(!g(x)){x=false;}if(!n(D)){D=0;}if(!n(C)){C=0;}var y=null;if(f(m.createEvent)){try{y=m.createEvent("KeyEvents");y.initKeyEvent(z,u,s,B,r,q,A,x,D,C);}catch(w){try{y=m.createEvent("Events");}catch(t){y=m.createEvent("UIEvents");}finally{y.initEvent(z,u,s);y.view=B;y.altKey=q;y.ctrlKey=r;y.shiftKey=A;y.metaKey=x;y.keyCode=D;y.charCode=C;}}v.dispatchEvent(y);}else{if(o(m.createEventObject)){y=m.createEventObject();y.bubbles=u;y.cancelable=s;y.view=B;y.ctrlKey=r;y.altKey=q;y.shiftKey=A;y.metaKey=x;y.keyCode=(C>0)?C:D;v.fireEvent("on"+z,y);}else{a.error("simulateKeyEvent(): No event simulation framework present.");}}}function b(A,F,x,u,G,z,w,v,t,r,s,q,E,C,y,B){if(!A){a.error("simulateMouseEvent(): Invalid target.");}if(d(F)){F=F.toLowerCase();if(!p[F]){a.error("simulateMouseEvent(): Event type '"+F+"' not supported.");}}else{a.error("simulateMouseEvent(): Event type must be a string.");}if(!g(x)){x=true;}if(!g(u)){u=(F!="mousemove");}if(!o(G)){G=a.config.win;}if(!n(z)){z=1;}if(!n(w)){w=0;}if(!n(v)){v=0;}if(!n(t)){t=0;}if(!n(r)){r=0;}if(!g(s)){s=false;}if(!g(q)){q=false;}if(!g(E)){E=false;}if(!g(C)){C=false;}if(!n(y)){y=0;}B=B||null;var D=null;if(f(m.createEvent)){D=m.createEvent("MouseEvents");if(D.initMouseEvent){D.initMouseEvent(F,x,u,G,z,w,v,t,r,s,q,E,C,y,B);}else{D=m.createEvent("UIEvents");D.initEvent(F,x,u);D.view=G;D.detail=z;D.screenX=w;D.screenY=v;D.clientX=t;D.clientY=r;D.ctrlKey=s;D.altKey=q;D.metaKey=C;D.shiftKey=E;D.button=y;D.relatedTarget=B;}if(B&&!D.relatedTarget){if(F=="mouseout"){D.toElement=B;}else{if(F=="mouseover"){D.fromElement=B;}}}A.dispatchEvent(D);}else{if(o(m.createEventObject)){D=m.createEventObject();D.bubbles=x;D.cancelable=u;D.view=G;D.detail=z;D.screenX=w;D.screenY=v;D.clientX=t;D.clientY=r;D.ctrlKey=s;D.altKey=q;D.metaKey=C;D.shiftKey=E;switch(y){case 0:D.button=1;break;case 1:D.button=4;break;case 2:break;default:D.button=0;}D.relatedTarget=B;A.fireEvent("on"+F,D);}else{a.error("simulateMouseEvent(): No event simulation framework present.");}}}function h(w,v,s,r,q,u){if(!w){a.error("simulateUIEvent(): Invalid target.");}if(d(v)){v=v.toLowerCase();if(!c[v]){a.error("simulateUIEvent(): Event type '"+v+"' not supported.");}}else{a.error("simulateUIEvent(): Event type must be a string.");}var t=null;if(!g(s)){s=(v in e);}if(!g(r)){r=(v=="submit");}if(!o(q)){q=a.config.win;}if(!n(u)){u=1;}if(f(m.createEvent)){t=m.createEvent("UIEvents");t.initUIEvent(v,s,r,q,u);w.dispatchEvent(t);}else{if(o(m.createEventObject)){t=m.createEventObject();t.bubbles=s;t.cancelable=r;t.view=q;t.detail=u;w.fireEvent("on"+v,t);}else{a.error("simulateUIEvent(): No event simulation framework present.");}}}a.Event.simulate=function(s,r,q){q=q||{};if(p[r]){b(s,r,q.bubbles,q.cancelable,q.view,q.detail,q.screenX,q.screenY,q.clientX,q.clientY,q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,q.button,q.relatedTarget);}else{if(l[r]){i(s,r,q.bubbles,q.cancelable,q.view,q.ctrlKey,q.altKey,q.shiftKey,q.metaKey,q.keyCode,q.charCode);}else{if(c[r]){h(s,r,q.bubbles,q.cancelable,q.view,q.detail);}else{a.error("simulate(): Event '"+r+"' can't be simulated.");}}}};})();},"3.5.1",{requires:["event-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-event-simulate",function(a){a.Node.prototype.simulate=function(c,b){a.Event.simulate(a.Node.getDOMNode(this),c,b);};},"3.5.1",{requires:["node-base","event-simulate"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("node-focusmanager",function(b){var j="activeDescendant",l="id",i="disabled",n="tabIndex",e="focused",a="focusClass",q="circular",c="UI",f="key",g=j+"Change",o="host",p={37:true,38:true,39:true,40:true},m={"a":true,"button":true,"input":true,"object":true},h=b.Lang,k=b.UA,d=function(){d.superclass.constructor.apply(this,arguments);};d.ATTRS={focused:{value:false,readOnly:true},descendants:{getter:function(r){return this.get(o).all(r);}},activeDescendant:{setter:function(v){var t=h.isNumber,s=b.Attribute.INVALID_VALUE,r=this._descendantsMap,y=this._descendants,x,u,w;if(t(v)){x=v;u=x;}else{if((v instanceof b.Node)&&r){x=r[v.get(l)];if(t(x)){u=x;}else{u=s;}}else{u=s;}}if(y){w=y.item(x);if(w&&w.get("disabled")){u=s;}}return u;}},keys:{value:{next:null,previous:null}},focusClass:{},circular:{value:true}};b.extend(d,b.Plugin.Base,{_stopped:true,_descendants:null,_descendantsMap:null,_focusedNode:null,_lastNodeIndex:0,_eventHandlers:null,_initDescendants:function(){var y=this.get("descendants"),r={},w=-1,v,u=this.get(j),x,s,t=0;if(h.isUndefined(u)){u=-1;}if(y){v=y.size();for(t=0;t<v;t++){x=y.item(t);if(w===-1&&!x.get(i)){w=t;}if(u<0&&parseInt(x.getAttribute(n,2),10)===0){u=t;}if(x){x.set(n,-1);}s=x.get(l);if(!s){s=b.guid();x.set(l,s);}r[s]=t;}if(u<0){u=0;}x=y.item(u);if(!x||x.get(i)){x=y.item(w);u=w;}this._lastNodeIndex=v-1;this._descendants=y;this._descendantsMap=r;this.set(j,u);if(x){x.set(n,0);}}},_isDescendant:function(r){return(r.get(l) in this._descendantsMap);},_removeFocusClass:function(){var s=this._focusedNode,t=this.get(a),r;if(t){r=h.isString(t)?t:t.className;}if(s&&r){s.removeClass(r);}},_detachKeyHandler:function(){var s=this._prevKeyHandler,r=this._nextKeyHandler;if(s){s.detach();}if(r){r.detach();}},_preventScroll:function(r){if(p[r.keyCode]&&this._isDescendant(r.target)){r.preventDefault();}},_fireClick:function(s){var r=s.target,t=r.get("nodeName").toLowerCase();if(s.keyCode===13&&(!m[t]||(t==="a"&&!r.getAttribute("href")))){r.simulate("click");}},_attachKeyHandler:function(){this._detachKeyHandler();var u=this.get("keys.next"),s=this.get("keys.previous"),t=this.get(o),r=this._eventHandlers;if(s){this._prevKeyHandler=b.on(f,b.bind(this._focusPrevious,this),t,s);}if(u){this._nextKeyHandler=b.on(f,b.bind(this._focusNext,this),t,u);}if(k.opera){r.push(t.on("keypress",this._preventScroll,this));}if(!k.opera){r.push(t.on("keypress",this._fireClick,this));}},_detachEventHandlers:function(){this._detachKeyHandler();var r=this._eventHandlers;if(r){b.Array.each(r,function(s){s.detach();});this._eventHandlers=null;}},_attachEventHandlers:function(){var u=this._descendants,r,s,t;if(u&&u.size()){r=this._eventHandlers||[];s=this.get(o).get("ownerDocument");if(r.length===0){r.push(s.on("focus",this._onDocFocus,this));r.push(s.on("mousedown",this._onDocMouseDown,this));r.push(this.after("keysChange",this._attachKeyHandler));r.push(this.after("descendantsChange",this._initDescendants));r.push(this.after(g,this._afterActiveDescendantChange));t=this.after("focusedChange",b.bind(function(v){if(v.newVal){this._attachKeyHandler();t.detach();}},this));r.push(t);}this._eventHandlers=r;}},_onDocMouseDown:function(u){var w=this.get(o),r=u.target,v=w.contains(r),t,s=function(y){var x=false;if(!y.compareTo(w)){x=this._isDescendant(y)?y:s.call(this,y.get("parentNode"));}return x;};if(v){t=s.call(this,r);if(t){r=t;}else{if(!t&&this.get(e)){this._set(e,false);this._onDocFocus(u);}}}if(v&&this._isDescendant(r)){this.focus(r);}else{if(k.webkit&&this.get(e)&&(!v||(v&&!this._isDescendant(r)))){this._set(e,false);this._onDocFocus(u);}}},_onDocFocus:function(w){var u=this._focusTarget||w.target,s=this.get(e),v=this.get(a),t=this._focusedNode,r;if(this._focusTarget){this._focusTarget=null;}if(this.get(o).contains(u)){r=this._isDescendant(u);if(!s&&r){s=true;}else{if(s&&!r){s=false;}}}else{s=false;}if(v){if(t&&(!t.compareTo(u)||!s)){this._removeFocusClass();}if(r&&s){if(v.fn){u=v.fn(u);u.addClass(v.className);}else{u.addClass(v);}this._focusedNode=u;}}this._set(e,s);},_focusNext:function(s,t){var r=t||this.get(j),u;if(this._isDescendant(s.target)&&(r<=this._lastNodeIndex)){r=r+1;if(r===(this._lastNodeIndex+1)&&this.get(q)){r=0;}u=this._descendants.item(r);if(u){if(u.get("disabled")){this._focusNext(s,r);}else{this.focus(r);}}}this._preventScroll(s);},_focusPrevious:function(s,t){var r=t||this.get(j),u;if(this._isDescendant(s.target)&&r>=0){r=r-1;if(r===-1&&this.get(q)){r=this._lastNodeIndex;}u=this._descendants.item(r);if(u){if(u.get("disabled")){this._focusPrevious(s,r);}else{this.focus(r);}}}this._preventScroll(s);},_afterActiveDescendantChange:function(r){var s=this._descendants.item(r.prevVal);if(s){s.set(n,-1);}s=this._descendants.item(r.newVal);if(s){s.set(n,0);}},initializer:function(r){this.start();},destructor:function(){this.stop();this.get(o).focusManager=null;},focus:function(r){if(h.isUndefined(r)){r=this.get(j);}this.set(j,r,{src:c});var s=this._descendants.item(this.get(j));if(s){s.focus();if(k.opera&&s.get("nodeName").toLowerCase()==="button"){this._focusTarget=s;}}},blur:function(){var r;if(this.get(e)){r=this._descendants.item(this.get(j));if(r){r.blur();this._removeFocusClass();}this._set(e,false,{src:c});}},start:function(){if(this._stopped){this._initDescendants();this._attachEventHandlers();this._stopped=false;}},stop:function(){if(!this._stopped){this._detachEventHandlers();this._descendants=null;this._focusedNode=null;this._lastNodeIndex=0;this._stopped=true;}},refresh:function(){this._initDescendants();if(!this._eventHandlers){this._attachEventHandlers();}}});d.NAME="nodeFocusManager";d.NS="focusManager";b.namespace("Plugin");b.Plugin.NodeFocusManager=d;},"3.5.1",{requires:["attribute","node","plugin","node-event-simulate","event-key","event-focus"]});
/* index.js 574112 */ YUI().add("media-index",function(d){var b=function(){if(typeof console=="object"&&typeof console.log=="function"){var e=Array.prototype.slice.call(arguments);console.log.apply(console,e)}};var a=function(){if(this._isDebug){this.log.apply(this,arguments)}};d.namespace("Media.Index");var c=d.Media.Index;c.BreakingNews={init:function(f){var e=f.mod_id||".yom-breaking-news",h=parseInt(f.ticker_duration)||3,g=0.8,i=(h+g)*1000;d.on("domready",function(p){var q=d.all(e+" .bd ul li");if(q.size()<2){return}var j,n=0,o=q.size(),r=q.item(0).get("offsetHeight");var k=new d.Anim({from:{top:0},to:{top:-(r)},easing:d.Easing.easeOut,duration:g});var l=new d.Anim({from:{top:r},to:{top:0},easing:d.Easing.easeOut,duration:g});var m=function(){k.set("node",q.item(n));k.run();n=(n+1)%o;l.set("node",q.item(n));l.run();clearTimeout(j);j=setTimeout(m,i)};j=setTimeout(m,i);d.on("mouseover",function(){clearTimeout(j)},q);d.on("mouseout",function(){clearTimeout(j);j=setTimeout(m,i)},q)})}};c.StoryList={init:function(){d.on("contentready",function(l){var m=d.one("#story-list-view .hd .headline");var k=d.one("#story-list-view .hd .thumb");var j=d.one(".story-list .yom-list-wide");var h=d.one("#story-list-view .filter-change");if(h!==null){var g=function(D){D.preventDefault();var s=d.one(".story-list");var u=d.one("#storylist-s");var E=d.one("#storylist-p");var t=d.one("#storylist-t");var y=d.one("#story-list-view");var p=d.one(".most-popular-list");var z=d.one("#storylist-mp");var x=d.one("#storylist-mt");var A=window.location.pathname;A=(A!==null)?A.split("/"):A;var r=(A.length===4)?A[2]:(A.length===3?A[1]:null);var v=u.get("value").replace(/\//g,"");if(r!==null){var q="";if(z!==null){var F=new Array();var C=0;y.all("select option:first-child").each(function(e){if(e.get("selected")===true){C++}});if(y.all("select").size()!==C){var n=new Array();if(v!==""){n.push(v)}var o=z.get("value");if(o!==""){n.push(o)}n=n.join("--");F.push(n)}F.push(r);var w=x.get("value");if(x.all("option:first-child")){x.all("option:first-child")}if(w!==""){if(x.one("option")===null){F.push(w+"--1.html")}else{if(x.one("option").get("selected")===false){F.push(w+"--1.html")}else{F.push("1.html")}}}else{F.push("1.html")}q="/"+F.join("/")}if(E!==null&&u!==null){var F=new Array();var C=0;y.all("select option:first-child").each(function(e){if(e.get("selected")===true){C++}});if(y.all("select").size()!==C){if(E.one("option").get("selected")===true&&u.one("option").get("selected")===false){F.push(v)}else{F.push(E.get("value")+"--"+v)}}F.push(r);var B=t.get("value");if(B!==""&&t.one("option").get("selected")===false){F.push(B.toLowerCase()+"--1.html")}else{F.push("1.html")}q="/"+F.join("/")}if(q){window.location.href=q}}};d.on("click",g,h)}if(m!==null&&k!==null){var i=function(n){var o=d.io("/set-cookies/?m=MediaStoryList&v=1");m.set("className","headline yom-button selected");j.set("className","yom-list yom-list-wide headline");k.removeClass("selected");k.addClass("on")};d.on("click",i,m);var f=function(n){var o=d.io("/set-cookies/?m=MediaStoryList&v=2");k.set("className","thumb yom-button selected");j.set("className","yom-list-wide thumbnail");m.removeClass("selected");m.addClass("on")};d.on("click",f,k)}},["#story-list-view"])}};c.ListView={init:function(){d.on("contentready",function(h){var f=this.one(".menu");var g=this.one(".filter-content");var i=function(j){if(this.hasClass("off")){this.removeClass("off");f.addClass("off")}else{this.addClass("off");f.removeClass("off")}};d.on("click",i,g)},["story-list-view"])}};c.SectionList={init:function(o){var p=d.one("#"+o.mod_id);var n=p.one(".bd");var g=o.menu_items[0].list_id;var e=new Array();var f=['<div class="menu">','<span class="menu-label default">{menu_label}</span>','<a class="yom-button" href="#" role="button">','<span class="arrow arrow-down">&nbsp;</span>',"</a>","</div>"].join("");var q=d.substitute(f,{menu_label:o.menu_label});p.one(".hd").prepend(q);if(o.menu_items.length>0){var l='<div class="overlay"><ul>';for(var k in o.menu_items){var j=(k===0)?' class="selected" ':"";l+=d.substitute("<li><a "+j+'href="#{list_id}">{name}</a></li>',o.menu_items[k])}l+="</ul></div>"}var h=new d.Overlay({align:{node:p.one(".hd .menu"),points:["tr","br"]},bodyContent:l,shim:false,tabIndex:null,visible:false,zIndex:"100000000"});h.render("#"+o.mod_id);var m=function(z,x,y){if(typeof y==="undefined"||x.status!="200"){return}var w,v,u;if(typeof e[y]!=="undefined"){w=e[y]}else{var t=d.Node.create(x.responseText).one(".bd");if(t){w=t.getContent()}else{w="<!-- xhr response was invalid -->";b("xhrCallback(): xhr response was invalid: ",x.responseText);return}e[y]=w}n.setContent(w);for(v=0,u=o.menu_items.length;v<u;v++){if(o.menu_items[v].list_id===y){break}}var s=o.menu_items[v];if(y===g){p.one(".menu-label").setContent(o.menu_label).addClass("default")}else{p.one(".menu-label").setContent(s.name).removeClass("default")}if(s.more_link_url&&s.more_link_text){if(p.one(".ft")===null){n.insert('<div class="ft"></div>',"after")}p.one(".ft").setStyle("visibility","visible").setContent(d.substitute('<div class="more"><a href="{more_link_url}">{more_link_text}</a></div>',s))}else{if(p.one(".ft")!==null&&p.one(".ft").getContent()===""){p.one("ft").remove()}}};p.all(".overlay a").on("click",function(u){var s=u.currentTarget;var r=n.getContent();u.halt();if(typeof e[g]==="undefined"){e[g]=r}h.hide();n.setContent('<div class="loading">&nbsp;</div>'+r);n.one("ul").setStyle("visibility","hidden");n.one(".loading").setStyle("width",n.get("offsetWidth"));p.all(".ft").setStyle("visibility","hidden");p.all(".overlay a").removeClass("selected");s.addClass("selected");var v=s.get("href").replace(/.*#/,"");if(typeof e[v]==="undefined"){var t=d.merge(o.xhr_data,{list_id:v,mod_id:o.mod_id});t=d.QueryString.stringify(t);var i={method:"GET",on:{complete:m},"arguments":v};d.io("/_xhr/section-list/?"+t,i)}else{m("",{status:"200",responseText:e[v]},v)}});d.one("body").on("click",function(i){h.hide()});p.one(".hd .yom-button").on("click",function(i){i.halt();h.set("align",{node:p.one(".hd .menu"),points:["tr","br"]});h.show()})}}},"1.1",{requires:["io","substitute","json-parse","node","event","anim","overlay","querystring-stringify"]});
/* topstory.js 369941 */ YUI().add("media-topstory",function(a){a.namespace("Media.Topstory");a.Media.Topstory=function(J){var j=this,O=(J.useJapi=="1"),e=J.tabbedListId||"",c=J.queryUrl,A=J.content_id,H=J.ids,t=J.apply_filter,N=J.filters,w=J.latestList,p=J.argsList,x=J.labels,o=J.defaultSec,d=J.spaceId,i="P#"+d,q=J.pagequery,K=q,s=J.more_inline,g=J.ads_refresh,n={},l={},b="yom-top-story-",h="yom-list",C="yom-list-pg-",B=false,I=0,M,v,r=J.popupswitch,k=a.all("#"+e+" .nav .tabs li"),F=a.one("#"+e+" .loading"),z=YAHOO.ULT.SRC_SPACEID_KEY,f="s",D,P=I,y=a.one("#"+e+" ."+b+I),L=null,m=null,G=("1"===J.enableSC);this.init=function(){if(k.size()>=2){var Q=a.all(".yom-top-story .nav li a");Q.set("href","?mod_id=mediatopstory#mediatopstory");a.delegate("click",function(R){this.tabClicked(R)},"#"+e+" .tabs","a",this,true)}else{I=0}if(s){a.delegate("click",function(R){this.moreClicked(R)},"#"+e,".more-inline",this,true);this.updateMoreLink(a.one("#"+e+" ."+b+"content-"+I))}if(k.size()>=2||s){this.cacheInitialData();this.initUlt()}a.after("ysc_login:logout_facebook",function(R){this.switchTabForSC(false)},this);a.after("ysc_sharing:status_changed",function(S,R){this.switchTabForSC(R)},this)};this.switchTabForSC=function(R){if(L===null){L=a.one("#"+e+" .nav .ysc-active a")}if(L===null){return}m=this.extractTabId(L);if(R){var Q="#"+e+" ."+b+"content-"+m;if(a.one(Q)){n[e]=n[e]||{};n[e][this.getCacheKey(m,0)]=a.one(Q).get("innerHTML");if(G){this.updateTabStyles(L,m);I=m;this.getTabItems(L)}}}else{if(I!==m){return}this.updateTabStyles(y,P);I=P;this.getTabItems(y)}};this.cacheInitialData=function(){var R,Q;R=a.one("#"+e+" .tabs li.selected a")||false;if(R===false){return}Q=this.extractTabId(R);I=Q;this.cache(Q)};this.tabClicked=function(S){YAHOO.ULT.SRC_SPACEID_KEY=f;var R={sec:this.getSec(S.target),slk:S.target.get("text"),pos:j.extractTabId(S.target),s:i};D.beacon(R);YAHOO.ULT.SRC_SPACEID_KEY=z;var U=S.target,T=this.extractTabId(U),Q;S.preventDefault();if(T===I){return}this.updateTabStyles(U,T);I=T;this.getTabItems(U)};this.moreClicked=function(V){var R=a.one("#"+e+" ."+b+I),U=a.one("#"+e+" ."+b+"content-"+I+" ."+h),Q=a.one("#"+e),S=V.target,T={};if(U&&U.hasClass(h+"-hasmore")){V.preventDefault();if(!Q.inViewportRegion(true)){Q.scrollIntoView(true)}this.updateTabStyles(R);T={sec:this.getSec(R),slk:S.get("text")};D.beacon(T);if(!R&&k.size()==0){R=a.one("#"+e+" .hd")}this.getTabItems(R,this.extractPageNumber(U))}};this.getTabItems=function(T,R){this.refreshAds();var S=this.extractTabId(T);if(l.id>=0){if(l.isInProgress()){l.abort()}}if(this.isCached(S,R)){var Q=1;this.updateContent(n[e][this.getCacheKey(S,R)],Q)}else{listId=H[S];latestOn=w[S];if(!latestOn){q=""}else{q=K}setTimeout(function(){j.getRemoteData(T,listId,latestOn,R)},0)}};this.updateTabStyles=function(R,T){var S="#"+e+" ."+b+I,Q=a.one("#"+e+" .bd");Q.get("children").addClass("hide");F.setStyle("height",M);F.removeClass("hide");if(R){a.one(S).removeClass("selected").get("parentNode").removeClass("selected");R.addClass("selected").get("parentNode").addClass("selected")}};this.getRemoteData=function(W,R,V,U){var T,S,Q;q=a.JSON.stringify(q);q=encodeURIComponent(q.substring(1,q.length-1));if(W&&W.hasClass("sc-loaded")){this.updateContent(null,1);return}T=(O)?"/_xhr/top-story-temp/":"/_xhr/top-story/";S=j.getSec(W);U=U||0;Q=a.substitute(c,{categories:p[I].categories?encodeURIComponent(a.JSON.stringify(p[I].categories)):"",content_id:A,apply_filter:t,filters:N,img_end:p[I].img_end,img_start:p[I].img_start,item_template:p[I].item_template,latest_on:V,list_id:R,list_source:p[I].list_source,max_summary_length:p[I].max_summary_length,max_title_length:p[I].max_title_length,pagequery:q,popup_switch:p[I].popup_switch,provider_switch:p[I].provider_switch,relatedcollections_index:p[I].relatedcollections_index,s:d,sec:S,selected_tab:I,story_start:(U*p[I].storycount)+(parseInt(p[I].storystart,10)),base_start:p[I].storystart,storycount:p[I].storycount,timestamp_switch:p[I].timestamp_switch,more_inline:s});l=a.io(T,{method:"POST",data:Q,on:{success:function(Y,X){j.updateFromNewData(W,U,X)},failure:function(Y,X){}}})};this.updateFromNewData=function(T,R,S){var Q=S&&S.responseText;if(Q){this.updateContent(Q);this.cache(this.extractTabId(T),R)}};this.updateContent=function(S,R){var U=a.one("#"+e+" ."+b+"content-"+I),Q,V,T;if(R!=1){Q=U.one("span");Q.setContent(S);if(s){Q=Q.one("."+h);if(Q){T=parseInt(this.extractPageNumber(Q),10);if(T&&a.Lang.isNumber(T)&&T>1){Q.set("start",((T-1)*p[I].storycount+1))}this.updateMoreLink(U,Q)}}}U.removeClass("hide");F.addClass("hide");this.cleanPanelHeight(I);if(v!=false){E.setup()}M=this.getPanelHeight()};this.updateMoreLink=function(R,Q){if(R){if(!Q){Q=R.one("span ."+h)}if(Q){if(!Q.hasClass("yom-list-hasmore")){moreLink=R.one(".more-inline");if(moreLink){moreLink.addClass("hide")}}}}};this.extractTabId=function(Q){return this.extractFromClass(Q,b)||0};this.extractPageNumber=function(Q){return this.extractFromClass(Q,C)};this.extractFromClass=function(R,T){if(R){var U=R.get("className").split(" ");for(var S=0,Q=U.length;S<Q;S++){if(0===U[S].indexOf(T)){return U[S].substring(T.length)}}}return null};this.isCached=function(Q,R){return n[e]&&n[e][this.getCacheKey(Q,R)]};this.cache=function(Q,R){if(Q){n[e]=n[e]||{};n[e][this.getCacheKey(Q,R)]=a.one("#"+e+" ."+b+"content-"+Q).get("innerHTML")}};this.getCacheKey=function(Q,R){if(R){Q=Q+"-"+R}return Q};this.getPanelHeight=function(){return(a.one("#"+e+" ."+b+"content-"+I).getStyle("height")=="0px")?"30px":a.one("#"+e+" ."+b+"content-"+I).getStyle("height")};this.cleanPanelHeight=function(Q){a.one("#"+e+" ."+b+"content-"+Q).setStyle("height",null);return true};this.getSec=function(S){var Q=this.extractTabId(S);if(Q==0&&o){return o}var R=S&&S.get("text").replace(/[^\d\w]/gi,"")||false;return R?"ln_"+R+"_gal":o};this.initUlt=function(){var Q={spaceid:d,events:{click:{"ymg-tabs-click-track":{tabs:{node:"a",data:function(T){var S=j.getSec(T.target),R=T.target.get("text"),U=j.extractTabId(T.target);return{slk:R,sec:S,pos:U}},bubbles:true}}}}};D=new YAHOO.Media.Tracking({conf:Q,el:e,namespace:"ymg-tabs-click-track"})};this.refreshAds=function(){if(YUI.AdsDarla&&a.Lang.isArray(g)&&g.length>0){for(var Q=0,R=g.length;Q<R;Q++){if(!g[Q].counter){g[Q].counter=0}g[Q].refresh_frequency=parseInt(g[Q].refresh_frequency,10);g[Q].counter++;if(YUI.AdsDarla[g[Q].darla_id]&&(g[Q].counter%g[Q].refresh_frequency===0)){YUI.AdsDarla[g[Q].darla_id].fetch()}}}};if(r=='"0"'){v=false}else{v=true;var u=(e!=="")?"#"+e:".yom-top-story",E=new a.Media.Tooltip({containerId:u,classes:["yog-11u"],selector:".bd ul .nothumb .txt a"});E.setup()}}},"1.0",{requires:["event-base","event-mouseenter","event-delegate","json","io-base","node","node-base","overlay","anim","substitute","media-tooltip"]});
/* tooltip.js 368145 */ YUI().add("media-tooltip",function(a){a.namespace("Media");a.Media.Tooltip=function(j){var b;var s=j?j:{};var o=function(){var u={containerId:"body",tooltipId:"tooltip",selector:"a",content:".preview",classes:[],width:"450",delayIn:0.1,delayOut:0.08,delayMove:0.5,delayGet:0.5,onMove:"hide",moveOffsetX:30,moveOffsetY:30,fadeIn:true,fadeOut:true,animDurationIn:0.1,animDurationOut:0.08,mouseOffsetX:15,mouseOffsetY:20,opacity:1};for(pref in u){s[pref]=typeof s[pref]!=="undefined"?s[pref]:u[pref]}};var h=function(){o()};var r=0;var p=0;var m=function(){var w={};var u=function(x){if(r!==0){return}var y=x.target;t(y);y.tooltip.e=x;l(y)};var v=function(x){clearTimeout(p);p="";var y=x.target;d(y)};a.delegate("mouseover",u,s.containerId,s.selector);a.delegate("mouseout",v,s.containerId,s.selector)};var t=function(u){if(typeof u.tooltip==="undefined"){u.tooltip={};if(u.get("alt")!==""){u.tooltip.alt=u.get("alt");u.set("alt","")}if(u.get("title")!==""){u.tooltip.title=u.get("title");u.set("title","")}}};var l=function(u){if(u.tooltip&&u.tooltip.tHide){clearTimeout(u.tooltip.tHide);u.tooltip.tHide=null}p=setTimeout(function(){f(u)},s.delayGet*1000)};var d=function(u){if(u.tooltip){if(u.tooltip.tShow){clearTimeout(u.tooltip.tShow);u.tooltip.tShow=null}if(s.delayOut===0){e(u)}else{if(!u.tooltip.tHide){u.tooltip.tHide=setTimeout(function(){e(u)},s.delayOut*0)}}}};var f=function(u){if(u.get("parentNode").one(s.content)){u.tooltip.content=u.get("parentNode").one(s.content).get("innerHTML");c(u)}else{if(u.get("parentNode").get("parentNode").one(s.content)){u.tooltip.content=u.get("parentNode").get("parentNode").one(s.content).get("innerHTML");c(u)}}};var c=function(u){if(u.tooltip.content&&u.tooltip.content!==""){if(s.delayIn===0){n(u)}else{if(!u.tooltip.tShow){u.tooltip.tShow=setTimeout(function(){n(u)},s.delayIn*1000)}}}};var n=function(x){if(x.tooltip.content&&x.tooltip.content!==""){b=q(x);var u=x.tooltip.content;if(u!==""){if(b&&b.one(".wrap")){b.one(".wrap").set("innerHTML",u);var v=function(){if(b.hasClass("off")){b.replaceClass("off","on")}b.setStyles({display:"block",visibility:"visible"});b.tooltip.allowHide=true};var w=function(){x.tooltip.animIn=new a.Anim({node:b,duration:s.animDurationIn,from:{opacity:0},to:{opacity:s.opacity}});b.setStyle("opacity","0");x.tooltip.animIn.on("start",v);x.tooltip.animIn.run()};if(s.fadeIn===true){w()}else{v()}r=1;k(x);if(x.tooltip.alt&&x.tooltip.alt!==""){x.set("alt","")}if(x.tooltip.title&&x.tooltip.title!==""){x.set("title","")}}}}};var e=function(v){if(v.tooltip&&b&&b.tooltip&&b.tooltip.allowHide===true){if(typeof b!=="undefined"){var u=function(){if(b.hasClass("on")){b.replaceClass("on","off")}b.setStyles({display:"none",visibility:"hidden"});g(v);if(v.tooltip.alt&&v.tooltip.alt!==""){v.set("alt",v.tooltip.alt)}if(v.tooltip.title&&v.tooltip.title!==""){v.set("title",v.tooltip.title)}b.tooltip.allowHide=false};if(s.fadeOut===true){v.tooltip.animOut=new a.Anim({node:b,duration:s.animDurationOut,from:{opacity:s.opacity},to:{opacity:0}});b.setStyle("opacity",s.opacity);v.tooltip.animOut.on("end",u);v.tooltip.animOut.run()}else{u()}r=0}}};var q=function(y){var v=a.one(document.body);var u={};var x={};if(!v.one("#"+s.tooltipId)){u='<div id="'+s.tooltipId+'" class="yom-dialog yom-tooltip"><div class="wrap"></div><div class="wraptooltip"></div></div>';x=v.create(u);v.insert(x);x=a.one("#"+s.tooltipId);x.setStyles({position:"absolute",display:"none",visibility:"hidden"});if(s.width!==""){x.setStyle("width",s.width)}if(s.classes&&s.classes.length>0){for(var w=0;w<s.classes.length;w++){if(!x.hasClass(s.classes[w])){x.addClass(s.classes[w])}}}if(x.hasClass("on")){x.replaceClass("on","off")}else{x.addClass("off")}x.tooltip={}}else{x=a.one("#"+s.tooltipId)}if(x){x.tooltip.evmouseover=x.on("mouseover",function(z){x.tooltip.allowHide=false});x.tooltip.evmouseout=x.on("mouseout",function(A){x.tooltip.allowHide=true;var z=A.relatedTarget;if(z&&z.ancestor("#"+x._node.id)===null){if(y.tooltip&&y.tooltip.tHide){clearTimeout(y.tooltip.tHide);y.tooltip.tHide=null}d(y)}})}return x};var k=function(v){if(b){var u=function(A){var y=b.get("viewportRegion");var z=b.get("region");var C=0,B=0;var x=35;marginY=35;if((A.pageX+s.mouseOffsetX)<0){C=x}else{if((A.pageX+s.mouseOffsetX+z.width+x)>y.width){C=A.pageX-s.mouseOffsetX-z.width}else{C=A.pageX+s.mouseOffsetX}}if((A.pageY+s.mouseOffsetY)<0){B=marginY}else{if((z.height+s.mouseOffsetY)>A.clientY){B=A.pageY+s.mouseOffsetY}else{if((A.pageY+s.mouseOffsetY+z.height+marginY)>y.height){B=A.pageY-s.mouseOffsetY-z.height}else{B=A.pageY+s.mouseOffsetY}}}var w=[C,B];b.setXY(w)};u(v.tooltip.e)}};var g=function(u){if(b&&b.tooltip.evmouseover){a.detach(b.tooltip.evmouseover)}if(b&&b.tooltip.evmousemove){a.detach(b.tooltip.evmousemove)}if(u.tooltip&&u.tooltip.tMove){clearTimeout(u.tooltip.tMove)}};var i={setup:function(){m()}};h();return i}},"0.1",{requires:["node","anim"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-color",function(b){var a=Number;b.Anim.behaviors.color={set:function(f,d,i,h,c,g,e){i=b.Color.re_RGB.exec(b.Color.toRGB(i));h=b.Color.re_RGB.exec(b.Color.toRGB(h));if(!i||i.length<3||!h||h.length<3){b.error("invalid from or to passed to color behavior");}f._node.setStyle(d,"rgb("+[Math.floor(e(c,a(i[1]),a(h[1])-a(i[1]),g)),Math.floor(e(c,a(i[2]),a(h[2])-a(i[2]),g)),Math.floor(e(c,a(i[3]),a(h[3])-a(i[3]),g))].join(", ")+")");},get:function(d,c){var e=d._node.getComputedStyle(c);e=(e==="transparent")?"rgb(255, 255, 255)":e;return e;}};b.each(["backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor"],function(c,d){b.Anim.behaviors[c]=b.Anim.behaviors.color;});},"3.5.1",{requires:["anim-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-xy",function(b){var a=Number;b.Anim.behaviors.xy={set:function(f,d,i,h,c,g,e){f._node.setXY([e(c,a(i[0]),a(h[0])-a(i[0]),g),e(c,a(i[1]),a(h[1])-a(i[1]),g)]);},get:function(c){return c._node.getXY();}};},"3.5.1",{requires:["anim-base","node-screen"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-curve",function(a){a.Anim.behaviors.curve={set:function(f,c,i,h,b,g,e){i=i.slice.call(i);h=h.slice.call(h);var d=e(b,0,100,g)/100;h.unshift(i);f._node.setXY(a.Anim.getBezier(h,d));},get:function(c,b){return c._node.getXY();}};a.Anim.getBezier=function(f,e){var g=f.length;var d=[];for(var c=0;c<g;++c){d[c]=[f[c][0],f[c][1]];}for(var b=1;b<g;++b){for(c=0;c<g-b;++c){d[c][0]=(1-e)*d[c][0]+e*d[parseInt(c+1,10)][0];d[c][1]=(1-e)*d[c][1]+e*d[parseInt(c+1,10)][1];}}return[d[0][0],d[0][1]];};},"3.5.1",{requires:["anim-xy"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-node-plugin",function(b){var a=function(c){c=(c)?b.merge(c):{};c.node=c.host;a.superclass.constructor.apply(this,arguments);};a.NAME="nodefx";a.NS="fx";b.extend(a,b.Anim);b.namespace("Plugin");b.Plugin.NodeFX=a;},"3.5.1",{requires:["node-pluginhost","anim-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("anim-scroll",function(b){var a=Number;b.Anim.behaviors.scroll={set:function(f,g,i,j,k,e,h){var d=f._node,c=([h(k,a(i[0]),a(j[0])-a(i[0]),e),h(k,a(i[1]),a(j[1])-a(i[1]),e)]);if(c[0]){d.set("scrollLeft",c[0]);}if(c[1]){d.set("scrollTop",c[1]);}},get:function(d){var c=d._node;return[c.get("scrollLeft"),c.get("scrollTop")];}};},"3.5.1",{requires:["anim-base"]});
/* localnews.js 663407 */ YUI.add("media-localnews",function(b){b.namespace("Media.Index");var a=b.Media.Index;a.Localnews={Subscribe:(function(){var c={},e={srcNode:"#overlayWindow",width:"314px",zIndex:"1000",visible:false,shim:false,tabIndex:null,align:{node:"#show",points:["tr","br"]},plugins:[b.Plugin.Drag]},h={},d=b.Node.create("<li>");function g(i){i.stopPropagation();if(c.get("visible")){c.hide();h.removeClass("on")}else{c.show();h.addClass("on")}}function f(i){var j=i.target;if(!c.get("visible")||b.one("#overlayWindow").contains(j)){return false}h.removeClass("on");c.hide()}return{init:function(){if(!b.one(".yom-rss")){return false}h=b.one("#show .subscribe_icon");c=new b.Overlay(e);c.render();b.on("click",g,["#show","#hide"]);b.on("click",f,[b.one(document.body)])}}})(),Index:(function(){var l="",k="",m="",f="",e="",g="",i=null,j=null,d={divID:"lw_widget",appID:"universal_location_widget__v2",ctx:"news",locale:"en-US",locationLevel:"city",anchorText:"Change location",callback:c,crumb:"",upapiExtracted:{currentLoc:null,defaultLoc:null},overlayAnchor:"lw_widget"};function h(n){var o=b.one("html").get("lang");if(n=="region"){return o.match(/[A-Z]+$/)[0]}if(n=="lang"){return o}}function c(s){var r=s.loc;var p="";var o=b.one("html").getAttribute("lang").split("-")[1];var t="-1";if(o.toLowerCase()==r.cc.toLowerCase()){t=r.woe}if(typeof b.Media.localvideofp!=="undefined"){var n=b.Media.localvideofp.config;p="&"+["template="+n.template,"titleLength="+n.titleLength,"summaryLength="+n.summaryLength].join("&")}var q="/_xhr/get-localnews/",u=function(y,w){if(w.status=="200"){var v=b.Node.create(w.responseText);if(v.one("#lw_label")){b.one("#lw_label").set("innerHTML",v.one("#lw_label").get("text"));b.all(".yom-local-news .hide").removeClass("hide");b.one(".yom-local-news .bd").replace(v.one(".yom-local-news .bd"));b.one(".yom-local-news .ft").replace(v.one(".yom-local-news .ft"))}if(v.one(".yom-local-video-fp")){var x=v.one(".yom-local-video-fp").get("innerHTML");b.one(".yom-local-video-fp").set("innerHTML",x).removeClass("hide")}else{b.all(".yom-local-video-fp").addClass("hide").set("innerHTML","")}}},n={method:"POST",on:{complete:u},data:"list_type="+d.renderedPage+"&type=ajax&spaceid="+l+"&index_page_url="+k+"&max_title_length="+m+"&story_num_list="+encodeURIComponent(f)+"&story_max_num="+e+"&iptc="+g+((t)?"&woeid="+t:"")+"&local_video="+(b.one(".yom-local-video-fp")?"1":"0")+p};if(d.renderedPage==="front"){b.io(q,n)}else{if(t!="-1"){var q=k+encodeURIComponent(r.city.replace(/ /g,"-"))+"-"+t+".html"}else{var q=k}window.location.href=q}}return{init:function(n){j=n;d.renderedPage=n.pageType;d.crumb=n.crumbVal;d.currentLoc=n.curLocObj;d.defaultLoc=n.defLocObj;d.anchorText=n.str_change_location;d.locale=h("lang");l=n.spaceId;k=n.indexUrl;m=n.max_title_length||"";f=n.story_num_list||"";e=n.story_max_num||"";g=n.iptc||"";if(b.one("#lw_label")){i=new LocdropLocationPicker(d);i.init();b.all(".yom-local-news .hide").removeClass("hide")}}}})()}},"0.1",{requires:["node","event","anim","io-base","json-parse","substitute","overlay","dd-plugin","dump"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-form",function(b){var a=encodeURIComponent;b.mix(b.IO.prototype,{_serialize:function(w,B){var q=[],y=w.useDisabled||false,A=0,g=(typeof w.id==="string")?w.id:w.id.getAttribute("id"),t,r,k,z,u,p,x,l,m,h;if(!g){g=b.guid("io:");w.id.setAttribute("id",g);}r=b.config.doc.getElementById(g);for(p=0,x=r.elements.length;p<x;++p){t=r.elements[p];u=t.disabled;k=t.name;if(y?k:k&&!u){k=a(k)+"=";z=a(t.value);switch(t.type){case"select-one":if(t.selectedIndex>-1){h=t.options[t.selectedIndex];q[A++]=k+a(h.attributes.value&&h.attributes.value.specified?h.value:h.text);}break;case"select-multiple":if(t.selectedIndex>-1){for(l=t.selectedIndex,m=t.options.length;l<m;++l){h=t.options[l];if(h.selected){q[A++]=k+a(h.attributes.value&&h.attributes.value.specified?h.value:h.text);}}}break;case"radio":case"checkbox":if(t.checked){q[A++]=k+z;}break;case"file":case undefined:case"reset":case"button":break;case"submit":default:q[A++]=k+z;}}}return B?q.join("&")+"&"+B:q.join("&");}},true);},"3.5.1",{requires:["io-base","node-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-upload-iframe",function(g){var b=g.config.win,f=g.config.doc,c=(f.documentMode&&f.documentMode>=8),a=decodeURIComponent;function h(j,l,k){var d=g.Node.create('<iframe src="#" id="io_iframe'+j.id+'" name="io_iframe'+j.id+'" />');d._node.style.position="absolute";d._node.style.top="-1000px";d._node.style.left="-1000px";g.one("body").appendChild(d);g.on("load",function(){k._uploadComplete(j,l);},"#io_iframe"+j.id);}function e(d){g.Event.purgeElement("#io_iframe"+d,false);g.one("body").removeChild(g.one("#io_iframe"+d));}g.mix(g.IO.prototype,{_addData:function(p,n){if(g.Lang.isObject(n)){n=g.QueryString.stringify(n);}var q=[],d=n.split("="),k,j;for(k=0,j=d.length-1;k<j;k++){q[k]=f.createElement("input");q[k].type="hidden";q[k].name=a(d[k].substring(d[k].lastIndexOf("&")+1));q[k].value=(k+1===j)?a(d[k+1]):a(d[k+1].substring(0,(d[k+1].lastIndexOf("&"))));p.appendChild(q[k]);}return q;},_removeData:function(k,m){var j,d;for(j=0,d=m.length;j<d;j++){k.removeChild(m[j]);}},_setAttrs:function(i,j,d){i.setAttribute("action",d);i.setAttribute("method","POST");i.setAttribute("target","io_iframe"+j);i.setAttribute(g.UA.ie&&!c?"encoding":"enctype","multipart/form-data");},_resetAttrs:function(i,d){g.Object.each(d,function(j,k){if(j){i.setAttribute(k,j);}else{i.removeAttribute(k);}});},_startUploadTimeout:function(d,j){var i=this;i._timeout[d.id]=b.setTimeout(function(){d.status=0;d.statusText="timeout";i.complete(d,j);i.end(d,j);},j.timeout);},_clearUploadTimeout:function(i){var d=this;b.clearTimeout(d._timeout[i]);delete d._timeout[i];},_uploadComplete:function(m,q){var n=this,l=g.one("#io_iframe"+m.id).get("contentWindow.document"),i=l.one("body"),k;if(q.timeout){n._clearUploadTimeout(m.id);}try{if(i){k=i.one("pre:first-child");m.c.responseText=k?k.get("text"):i.get("text");}else{m.c.responseXML=l._node;}}catch(j){m.e="upload failure";}n.complete(m,q);n.end(m,q);b.setTimeout(function(){e(m.id);},0);},_upload:function(l,j,n){var m=this,k=(typeof n.form.id==="string")?f.getElementById(n.form.id):n.form.id,i={action:k.getAttribute("action"),target:k.getAttribute("target")},d;m._setAttrs(k,l.id,j);if(n.data){d=m._addData(k,n.data);}if(n.timeout){m._startUploadTimeout(l,n);}k.submit();m.start(l,n);if(n.data){m._removeData(k,d);}m._resetAttrs(k,i);return{id:l.id,abort:function(){l.status=0;l.statusText="abort";if(g.one("#io_iframe"+l.id)){e(l.id);m.complete(l,n);m.end(l,n);}else{return false;}},isInProgress:function(){return g.one("#io_iframe"+l.id)?true:false;},io:m};},upload:function(i,d,j){h(i,j,this);return this._upload(i,d,j);}});},"3.5.1",{requires:["io-base","node-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("queue-promote",function(a){a.mix(a.Queue.prototype,{indexOf:function(b){return a.Array.indexOf(this._q,b);},promote:function(c){var b=this.indexOf(c);if(b>-1){this._q.unshift(this._q.splice(b,1)[0]);}},remove:function(c){var b=this.indexOf(c);if(b>-1){this._q.splice(b,1);}}});},"3.5.1",{requires:["yui-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("io-queue",function(b){var c=b.io._map["io:0"]||new b.IO();b.mix(b.IO.prototype,{_q:new b.Queue(),_qActiveId:null,_qInit:false,_qState:1,_qShift:function(){var e=this,d=e._q.next();e._qActiveId=d.id;e._qState=0;e.send(d.uri,d.cfg,d.id);},queue:function(d,g){var f=this,e={uri:d,cfg:g,id:this._id++};if(!f._qInit){b.on("io:complete",function(i,h){f._qNext(i);},f);f._qInit=true;}f._q.add(e);if(f._qState===1){f._qShift();}return e;},_qNext:function(e){var d=this;d._qState=1;if(d._qActiveId===e&&d._q.size()>0){d._qShift();}},qPromote:function(d){this._q.promote(d);},qRemove:function(d){this._q.remove(d);},qStart:function(){var d=this;d._qState=1;if(d._q.size()>0){d._qShift();}},qStop:function(){this._qState=0;},qSize:function(){return this._q.size();}},true);function a(d,e){return c.queue.apply(c,[d,e]);}a.start=function(){c.qStart();};a.stop=function(){c.qStop();};a.promote=function(d){c.qPromote(d);};a.remove=function(d){c.qRemove(d);};a.size=function(){c.qSize();};b.io.queue=a;},"3.5.1",{requires:["io-base","queue-promote"]});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(c){var a="";var k,h,f,j,g,e,d;var b=0;c=Base64._utf8_encode(c);while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a=a+this._keyStr.charAt(j)+this._keyStr.charAt(g)+this._keyStr.charAt(e)+this._keyStr.charAt(d)}return a},decode:function(c){var a="";var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(b<c.length){j=this._keyStr.indexOf(c.charAt(b++));g=this._keyStr.indexOf(c.charAt(b++));e=this._keyStr.indexOf(c.charAt(b++));d=this._keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a=a+String.fromCharCode(k);if(e!=64){a=a+String.fromCharCode(h)}if(d!=64){a=a+String.fromCharCode(f)}}a=Base64._utf8_decode(a);return a},_utf8_encode:function(b){b=b.replace(/\r\n/g,"\n");var a="";for(var e=0;e<b.length;e++){var d=b.charCodeAt(e);if(d<128){a+=String.fromCharCode(d)}else{if((d>127)&&(d<2048)){a+=String.fromCharCode((d>>6)|192);a+=String.fromCharCode((d&63)|128)}else{a+=String.fromCharCode((d>>12)|224);a+=String.fromCharCode(((d>>6)&63)|128);a+=String.fromCharCode((d&63)|128)}}}return a},_utf8_decode:function(a){var b="";var d=0;var e=c1=c2=0;while(d<a.length){e=a.charCodeAt(d);if(e<128){b+=String.fromCharCode(e);d++}else{if((e>191)&&(e<224)){c2=a.charCodeAt(d+1);b+=String.fromCharCode(((e&31)<<6)|(c2&63));d+=2}else{c2=a.charCodeAt(d+1);c3=a.charCodeAt(d+2);b+=String.fromCharCode(((e&15)<<12)|((c2&63)<<6)|(c3&63));d+=3}}}return b}};function LocdropYQLData(){this.proto="http://";this.yqlHost="us-locdrop.query.yahoo.com";this.yqlTable="user.location.public";this.urlPath="/v1/public/yql?";this.namespace="LocdropYQLAccess";this.crumb=null;this.pendingCallback=false;this.yqlTimeout=5000;this.url=function(){var a=this.proto+this.yqlHost+this.urlPath;return a};this.addRequest=function(f,e,d){var a=this;if(this.pendingCallback){return false}else{this.pendingCallback=true}var c=this.url()+"q="+f;c+="&format=json&callback={callback}";var b={callbackStr:e,context:d,instance:a};YUI().use("jsonp","jsonp-url",function(g){service=new g.JSONPRequest(c,{on:{success:a.LocdropYQLDataCallback,timeout:a.LocdropYQLDataTimeout,failure:a.LocdropYQLDataFailure},timeout:a.yqlTimeout,args:[b]});service.send()});return true};this.cacheData={keys:[],vals:[]};this.getCtxTypeLocs=function(a,d){var c=a+"-"+d;for(var b=0;b<this.cacheData.keys.length;b++){if(this.cacheData.keys[b]==c){return this.cacheData.vals[b];break}}};this.fetchCtxTypeLocs=function(a,c,f,b){if(this.getCtxTypeLocs(a,c)!=null){return false}var e={ctx:a,type:c,callback:f,context:b};var d="select%20*%20from%20"+this.yqlTable+"%20where%20ctx%3D%22"+a+"%22%20and%20type%3D%22"+c+"%22%20and%20crumb%3D%22"+this.crumb+"%22";return this.addRequest(d,"fetchCtxTypeCallback",e)};this.decodeLocation=function(d){for(var b=0;b<d.length;b++){var a=d[b].key;var c=d[b].content;if(c!=null){if(d[b].encoding!=null){c=Base64.decode(c)}this[a]=c}}};this.parseLocations=function(c){var d=new Array();if(typeof(c.query.results.Response.Attribute.Item)!="undefined"&&typeof(c.query.results.Response.Attribute.Item)=="object"){if(c.query.results.Response.Attribute.Item.length){var a=c.query.results.Response.Attribute.Item}else{var a=new Array();a.push(c.query.results.Response.Attribute.Item)}for(var b=0;b<a.length;b++){d[b]=new this.decodeLocation(a[b].Item)}}return d};this.fetchCtxTypeCallback=function(b,e){if(e.context!=null){e.context.errObj=e.errObj}if(e.errObj.errCode){if(e.callback!=null){e.callback(e.context)}return}var d=e.ctx+"-"+e.type;var a=this.parseLocations(b);var c;for(c=0;c<this.cacheData.keys.length;c++){if(this.cacheData.keys[c]==d){this.cacheData.vals[c]=a;break}}if(c==this.cacheData.keys.length){this.cacheData.vals.push(a);this.cacheData.keys.push(d)}if(e.callback!=null){e.callback(e.context)}};this.setUse=function(e,a,f,b){var c={ctx:a,id:e,callback:f,context:b};var d="UPDATE%20"+this.yqlTable+"%20SET%20used%20%3D%20%22true%22%20where%20id%3D%22"+e+"%22%20and%20ctx%3D%22"+a+"%22%20and%20crumb%3D%22"+this.crumb+"%22";return this.addRequest(d,"setUseCallback",c)};this.setUseCallback=function(a,b){if(b.context!=null){b.context.errObj=b.errObj}if(b.errObj.errCode){if(b.callback!=null){b.callback(b.context)}return}if(b.callback!=null){b.callback(b.context)}};this.addLatLon=function(f,a,i,g,d,h,b){var c={callback:h,context:b};var e="insert%20into%20"+this.yqlTable+"%20(app%2C%20lat%2C%20lon%2C%20ctx%2C%20type%2C%20crumb)%20values%20(%22YQL%20Console%22%2C%20%22"+f+"%22%2C%20%22"+a+"%22%2C%20%22"+i+"%22%2C%20%22"+g+"%22%2C%20%22"+this.crumb+"%22)";return this.addRequest(e,"addCallback",c)};this.addWoe=function(e,a,c,f,h,b){var g={callback:h,context:b};var d="insert%20into%20"+this.yqlTable+"%20(app%2C%20woe%2C%20ctx%2C%20type%2C%20crumb)%20values%20(%22"+f+"%22%2C%20%22"+e+"%22%2C%20%22"+a+"%22%2C%20%22"+c+"%22%2C%20%22"+this.crumb+"%22)";return this.addRequest(d,"addCallback",g)};this.addPoint=function(f,g,a,j,h,d,i,b){var c={callback:i,context:b};var e="insert%20into%20"+this.yqlTable+"%20(app%2C%20address%2C%20lat%2C%20lon%2C%20ctx%2C%20type%2C%20crumb)%20values%20(%22"+d+"%22%2C%20%22"+f+"%22%2C%20%22"+g+"%22%2C%20%22"+a+"%22%2C%20%22"+j+"%22%2C%20%22"+h+"%22%2C%20%22"+this.crumb+"%22)";return this.addRequest(e,"addCallback",c)};this.addPlace=function(e,g,i,f,c,h,a){var b={callback:h,context:a};var d="insert%20into%20"+this.yqlTable+"%20(app%2C%20address%2C%20woe%2C%20ctx%2C%20type%2C%20crumb)%20values%20(%22"+c+"%22%2C%20%22"+e+"%22%2C%20%22"+g+"%22%2C%20%22"+i+"%22%2C%20%22"+f+"%22%2C%20%22"+this.crumb+"%22)";return this.addRequest(d,"addCallback",b)};this.addCallback=function(a,c){if(c.context!=null){c.context.errObj=c.errObj}if(c.errObj.errCode){if(c.callback!=null){c.callback(c.context)}return}var b;for(b=0;b<this.cacheData.keys.length;b++){this.cacheData.vals[b]=null}if(c.callback!=null){c.context.response=a;c.callback(c.context)}};this.responseErrorCheck=function(a){var b={errCode:0};if(typeof a==="undefined"||typeof a.error!=="undefined"){b.errCode="LYD_API_ERR";return b}if(typeof a.query=="undefined"||typeof a.query.results=="undefined"){b.errCode="LYD_NETWORK_TIMEOUT";return b}if(a.query.results==null){b.errCode="LYD_API_ERR";return b}if(typeof a.query.results.Response!="undefined"&&typeof a.query.results.Response.Attribute!="undefined"&&typeof a.query.results.Response.Attribute.status!="undefined"&&typeof a.query.results.Response.Attribute.actionTaken!="undefined"&&a.query.results.Response.Attribute.status=="ERROR"){switch(a.query.results.Response.Attribute.actionTaken){case"get":b.errCode="LYD_API_ERR";break;case"set":b.errCode="LYD_API_ERR";break;default:return}return b}if((typeof a.query.results.Error!="undefined")||(typeof a.query.results.result!="undefined")){b.errCode="LYD_API_ERR";return b}return b};this.LocdropYQLDataCallback=function(b,a){a.instance.pendingCallback=false;a.context.errObj=a.instance.responseErrorCheck(b);a.instance[a.callbackStr](b,a.context)};this.LocdropYQLDataTimeout=function(b,a){a.instance.pendingCallback=false;a.context.errObj={errCode:"LYD_NETWORK_TIMEOUT"};a.instance[a.callbackStr](b,a.context)};this.LocdropYQLDataFailure=function(b,a){a.instance.pendingCallback=false;a.context.errObj=a.instance.responseErrorCheck(b);a.context.errObj={errCode:"LYD_API_ERR"};a.instance[a.callbackStr](b,a.context)};return this}var LYD=new LocdropYQLData();var YahooGeoLocationInstance=null;function YahooGeoLocation(a){this.geoSupport=true;if(!navigator.geolocation){this.geoSupport=false;return this.geoSupport}if(YahooGeoLocationInstance!=null){return YahooGeoLocationInstance}this.running=false;this.callbacks=null;this.app=a;this.geoTimeout=5000;this.getCBList=function(){var b=this.callbacks;this.callbacks=null;return b};this.detectFailure=function(c){var d={errCode:"LW_DETECT_ERR"};var b=YahooGeoLocationInstance;b.notifyFailure(d)};this.notifyFailure=function(d){this.running=false;var b=this.getCBList();while(b!=null){var c=b;b=c.next;c.failure(c.context,d)}};this.updateDone=function(c){c.running=false;var b=c.getCBList();while(b!=null){var d=b;b=d.next;d.success(d.context)}};this.getYQLAccessor=function(){return LYD};this.detectSuccess=function(c){var b=YahooGeoLocationInstance;var f=b.updateDone;var e=b.getYQLAccessor().addLatLon(c.coords.latitude,c.coords.longitude,"global","physical",b.app,f,b);if(!e){var d={errCode:"LW_DETECT_ERR"};b.notifyFailure(d)}};this.detect=function(e,c,b){var d={success:e,failure:c,context:b,next:this.callbacks};this.callbacks=d;if(!this.running){navigator.geolocation.getCurrentPosition(this.detectSuccess,this.detectFailure,{timeout:this.geoTimeout});this.running=true}};YahooGeoLocationInstance=this;return this}var LocdropLocationPickerCommonInstance=null;function LocdropLocationPickerCommon(){this.widgets=[];this.upapiCurLoc=null;this.upapiDefLoc=null;this.crumb=null;this.namespace="LocdropLocationPicker_";this.yqlTimeout=null;this.yqlHost=null;this.yrbContainer=null;this.pendingYrbCall=false;this.placeFinderHost="locdrop.query.yahoo.com";this.placeFinderTimeout=5000;this.pendingPlaceFinder=false;this.locale="en-US";this.placeFinderGflags="f";this.geocoding={widgetID:null,address:null};this.getWidget=function(b){for(var a=0;a<this.widgets.length;a++){if(this.widgets[a].id==b){return this.widgets[a]}}return null};this.addWidget=function(a){if(this.getWidget(a.id)==null){this.widgets.push(a)}};this.setYrbContainer=function(a){if(this.yrbContainer==null){this.yrbContainer=a}};this.getYrbContainer=function(){return this.yrbContainer};this.setPendingYrbCall=function(a){this.pendingYrbCall=a};this.getPendingYrbCall=function(){return this.pendingYrbCall};this.setLocale=function(a){this.locale=a};this.resetPlaceFinderGflags=function(){this.placeFinderGflags=""};this.setCrumb=function(a){if(this.crumb==null){this.crumb=a;LYD.crumb=a}};this.getCrumb=function(){return this.crumb};this.setYqlTimeout=function(a){if(this.yqlTimeout==null){this.yqlTimeout=a;LYD.yqlTimeout=a}};this.setYqlHost=function(a){if(this.yqlHost==null){this.yqlHost=a;LYD.yqlHost=a}};this.setExtractedLocs=function(a,b){if(this.upapiCurLoc==null){this.upapiCurLoc=a}if(this.upapiDefLoc==null){this.upapiDefLoc=b}};this.actionCallback=function(d,c,b){var a=this.getWidget(d);if(a==null){return}a.handleAction(c,b)};this.actionCallbackWithBool=function(d,c,b){var a=this.getWidget(d);if(a==null){return true}return a.handleAction(c,b)};this.geocodingDone=function(a,b){if(typeof(a)==="undefined"||typeof(a.error)!=="undefined"||typeof(a.query.results)==="undefined"){b.instance.geocodingFailure(a,b)}else{b.instance.pendingPlaceFinder=false;b.instance.geocoding.widgetID=null;b.instance.geocoding.address=null;b.context.geocodeDone(a)}};this.geocodingFailure=function(b,c){var a=c.instance;var d=c.context;a.pendingPlaceFinder=false;a.geocoding.widgetID=null;a.geocoding.address=null;var e=d.templateSubstitute("LW_ERROR_TEMPLATE",{lwErrorText:a.yrbContainer.LW_DISAMBIGUATE_ERR});d.disambiguateSearch(e);d.setState("reopen")};this.geocodingTimeout=function(b,c){var a=c.instance;var d=c.context;a.pendingPlaceFinder=false;var e=d.templateSubstitute("LW_ERROR_TEMPLATE",{lwErrorText:a.yrbContainer.LYD_NETWORK_TIMEOUT});d.disambiguateSearch(e);d.setState("reopen");a.geocoding.widgetID=null;a.geocoding.address=null};this.invokePlaceMaker=function(d){var a=LocdropLocationPickerCommonInstance;this.placeFinderCfg={proto:"http://",host:a.yqlHost||a.placeFinderHost,table:"locdrop.placefinder",path:"/v1/public/yql?"};if(a.geocoding.address!=null){var f=(a.geocoding.address+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0");var c="select line1, line2, line3, line4, city, uzip, statecode, countrycode, latitude, longitude, country, woeid, quality, house, street from "+this.placeFinderCfg.table+' where text="'+encodeURIComponent(f)+'" and locale="'+this.locale+'"';if(this.placeFinderGflags.length>0){c+=' and gflags="'+this.placeFinderGflags+'"'}if(a.pendingPlaceFinder){return}else{a.pendingPlaceFinder=true}var e=this.placeFinderCfg.proto+this.placeFinderCfg.host+this.placeFinderCfg.path+"q="+c+"&format=json&callback={callback}";var b={instance:a,context:d};YUI().use("jsonp","jsonp-url",function(g){service=new g.JSONPRequest(e,{on:{success:a.geocodingDone,timeout:a.geocodingTimeout,failure:a.geocodingFailure},timeout:a.placeFinderTimeout,args:[b]});service.send()})}};this.geocode=function(a,b){if(this.geocoding.widgetID!=null){return false}this.geocoding.widgetID=b.id;this.geocoding.address=a;this.invokePlaceMaker(b);return true}}function LocdropLocationPicker(q){if(LocdropLocationPickerCommonInstance==null){LocdropLocationPickerCommonInstance=new LocdropLocationPickerCommon()}var m=LocdropLocationPickerCommonInstance.getWidget(q.divID);if(m!=null){return m}this.id=q.divID;this.app=q.appID;this.ctx=q.ctx;this.callback=q.callback;this.minWidth=q.minWidth||300;this.defaultLocale="en-US";this.locale=q.locale||this.defaultLocale;var j="#"+this.id;this.displayLocs=7;this.maxPixelLength=this.minWidth-60;this.searchStartLen=3;this.locationLevel="addr";this.widgetLocLevels=["addr","city","zip"];this.state;this.searchItemList=null;this.searchItemId=null;this.geoPlaceType="saved";this.customInput=q.customInput;var o="loading",p="open",g="reopen",f="error",e="closed",t="default",i="current",n="sqloc",h="first",s="detect",d="select",b="point",u="place";this.guid=YUI.guid("lw");var k,c,r,l,a;this.yrbContainer=null;this.msgContainer={LYD_NETWORK_TIMEOUT:"Request is taking too long to complete. Please try again",LYD_API_ERR:"Unable to update/save/retrieve your location. Please try again",LW_DISAMBIGUATE_ERR:"No matching record found",LW_DETECTSUPPORT_ERR:"Your browser does not support location detection",LW_DETECT_ERR:"We were unable to detect your current location",OS_CURRENT_LOCATION:"current location",OS_LOCATION_DETECT:"Detect your accurate location",OS_LOCATION_PICK:"No default location available",OS_DEFAULT_LOC_EDIT:"edit",OS_DEFAULT_LOC_ADD:"add",GHOST_TEXT_ADDR:"Enter an Address",GHOST_TEXT_CITY:"Enter a City",GHOST_TEXT_ZIP:"Enter a Postal Code",OS_MANAGE_LOCATIONS:"Manage Locations",CURRENT_LOCATION_CONTEXTUAL_HELP:'Your current location offers a convenient option for you to customize the content on any Yahoo! page in which it appears. <br/><br/> Your current location is based on the IP address provided by the internet service provider through which you are connecting to the internet. From this information, Yahoo! is generally able to determine the city in which you are currently located. <br/><br/> You can allow Yahoo! to detect more accurate location from your HTML5 browser by clicking on the detect link. This will allow Yahoo! to serve more relevant content. <br/><br/> For additional information regarding current location, click <a href="{0}" target="_blank">here</a>',PRIVACY_POLICY:"Privacy Policy",HELP:"Help",CLOSE:"Close",OS_MANAGE_LOCATIONS_URL:"http://info.yahoo.com/locationmgt/?locale=en-US",CURRENT_LOCATION_HELP_URL:"http://help.yahoo.com/l/us/yahoo/location/",PRIVACY_POLICY_URL:"http://info.yahoo.com/privacy/us/yahoo/location"};this.geoLocation=new YahooGeoLocation(this.app);this.getGeoLocation=function(){return this.geoLocation};this.yrbConfig={proto:"http://",host:q.yrbHost||"l.yimg.com",path:q.yrbPath||"/rl/ulw/yrb/2.0.1/",base:"ulwv2yrb"};this.yrbReqFailure=function(v,w){w.instance.setYrbContainer(w.instance.msgContainer);LocdropLocationPickerCommonInstance.setLocale(this.defaultLocale)};this.initYrb=function(w){if(this.getPendingYrbCall()){return}else{this.setPendingYrbCall(true)}if(this.getYrbContainer()!=null){this.setYrbContainer(this.getYrbContainer());return}var v=this;var y=this.yrbConfig.proto+this.yrbConfig.host+this.yrbConfig.path+this.yrbConfig.base+"_"+w+".js?callback={callback}";var x={instance:v};YUI().use("jsonp","jsonp-url",function(z){service=new z.JSONPRequest(y,{on:{failure:v.yrbReqFailure},args:[x]});service.send()})};this.init=function(){if(q.crumb){LocdropLocationPickerCommonInstance.setCrumb(q.crumb)}if(q.yqlHost){LocdropLocationPickerCommonInstance.setYqlHost(q.yqlHost)}if(q.upapiExtracted.currentLoc||q.upapiExtracted.defaultLoc){LocdropLocationPickerCommonInstance.setExtractedLocs(q.upapiExtracted.currentLoc,q.upapiExtracted.defaultLoc)}if(q.locationLevel){var w=false;for(var x=0;x<this.widgetLocLevels.length;x++){if(this.widgetLocLevels[x]==q.locationLevel){w=true;break}}if(w){this.locationLevel=q.locationLevel}}if(q.yqlTimeout){LocdropLocationPickerCommonInstance.setYqlTimeout(q.yqlTimeout)}if(!q.placeFinderGflags){LocdropLocationPickerCommonInstance.resetPlaceFinderGflags()}this.yrbContainer=this.msgContainer;if(this.defaultLocale!=this.locale){this.initYrb(this.locale);LocdropLocationPickerCommonInstance.setLocale(this.locale)}else{this.setYrbContainer(this.msgContainer)}this.setPositionXY(q.positionXY);var v=this;YUI().use("node","event","substitute","overlay",function(A){if(typeof(v.state)==="undefined"){if(!v.customInput){A.on("click",v.handleDocumentClick,document,v)}A.on("keyup",v.handleDocumentKeyup,document,v)}if(!v.customInput){v.anchorId=v.makeElementId("closedState");var y={anchorId:v.anchorId,anchorTxt:q.anchorText||""};var z=A.substitute(v.LW_ANCHOR_TEMPLATE,y);A.one(j).set("innerHTML",z);A.on("click",v.open,j,v)}})};this.setPositionXY=function(w){if(w){this.positionXY=w;this.positionX=this.positionXY[0];this.positionY=this.positionXY[1]}else{var v=this;YUI().use("node",function(x){v.positionXY=x.one(j).getXY();v.positionX=v.positionXY[0];v.positionY=v.positionXY[1]+20})}};this.setYrbContainer=function(v){this.yrbContainer=v;LocdropLocationPickerCommonInstance.setYrbContainer(v)};this.getYrbContainer=function(){return LocdropLocationPickerCommonInstance.getYrbContainer()};this.setPendingYrbCall=function(v){LocdropLocationPickerCommonInstance.setPendingYrbCall(v)};this.getPendingYrbCall=function(){return LocdropLocationPickerCommonInstance.getPendingYrbCall()};this.makeElementId=function(v){return LocdropLocationPickerCommonInstance.namespace+"_"+this.id+"_"+v};this.getYQLAccessor=function(){return LYD};this.locationSorter=function(w,v){var y=w.freq;if(y==null){y=0}var x=v.freq;if(x==null){x=0}return x-y};this.setState=function(z){var v=this;if(z==p||z==g){if(typeof(l)!="undefined"){l.show()}if(typeof(r)!="undefined"){r.hide()}if(typeof(a)!="undefined"){a.hide()}if(!this.customInput){YUI().use("node",function(B){B.one("#"+v.inputId).focus()})}}else{if(z==o){if(typeof(r)!="undefined"){r.show()}else{this.rulerId=this.guid+"_ruler";YUI().use("overlay","substitute",function(C){var B=C.substitute(v.LW_LOADING_MSG,{rulerId:v.rulerId});r=new C.Overlay({bodyContent:B,width:v.minWidth,zIndex:100,xy:[v.positionX,v.positionY],constrain:true,render:true,visible:true})})}if(typeof(a)!="undefined"){a.hide()}if(typeof(l)!="undefined"){l.hide()}}else{if(z==f){var w=this.guid+"error_close";var A="#"+w;var y={width:this.minWidth,lwErrorText:this.lastError,closeId:w};if(typeof(a)!="undefined"){var x=this.templateSubstitute("LW_OPEN_ERROR_TEMPLATE",y);a.set("bodyContent",x);a.show()}else{YUI().use("overlay","substitute",function(C){var B=C.substitute(v.LW_OPEN_ERROR_TEMPLATE,y);a=new C.Overlay({bodyContent:B,width:v.minWidth,zIndex:100,xy:[v.positionX,v.positionY],constrain:true,render:true,visible:true})})}if(typeof(r)!="undefined"){r.hide()}if(typeof(l)!="undefined"){l.hide()}YUI().use("node","event",function(B){B.on("click",B.bind(a.hide,a),A)})}else{if(z==e){if(typeof(r)!="undefined"){r.hide()}if(typeof(l)!="undefined"){l.hide()}if(typeof(a)!="undefined"){a.hide()}if(typeof(c)!="undefined"){c.hide()}}}}}this.state=z;return};this.setError=function(v){this.lastError=v;this.setState(f)};this.handleWoe=function(w){if(w.errObj.errCode){w.setError(w.yrbContainer[w.errObj.errCode]);return}var x=null;var v=w.getYQLAccessor();if(typeof(w.response)!="undefined"&&typeof(w.response.query.results.Response.Result)!="undefined"){x=w.response.query.results.Response.Result;if(x!=null){v.setUse(x,w.ctx,null,null)}return true}return false};this.handleSet=function(x){if(x.errObj.errCode){x.setError(x.yrbContainer[x.errObj.errCode]);return}if(typeof(x.response)!="undefined"&&typeof(x.response.query.results.Response.Result)!="undefined"&&x.response.query.results.Response.Result==null){var w=x.searchItemList;for(var v=0;v<w.length;v++){if(w[v].id==x.searchItemId){x.loc=w[v];break}}}else{var y=x.response.query.results.Response.Result;x.getYQLAccessor().setUse(y,x.ctx,null,null);var w=x.searchItemList;for(var v=0;v<w.length;v++){if(w[v].id==x.searchItemId){x.loc=w[v];x.loc.id=y;break}}}x.setState(e);if(x.callback!=null){x.callback(x)}return true};this.getLocationType=function(v){if(v.quality>=80){return b}else{if(v.quality>=70){if(v.quality!=74){return b}}else{if(v.quality>50){if((v.quality==65)||(v.quality==64)||(v.quality==63)){return b}}else{if(v.house&&v.street){return b}}}}return u};this.select=function(y){if(y.search("new-")==0){this.searchItemId=y;var A=Base64.decode(y.substr(4));var x=this.searchItemList;var v=null;for(var w=0;w<x.length;w++){if(x[w].id==this.searchItemId){v=x[w];break}}if(v!=null){if(this.getLocationType(v)==b){var z=this.getYQLAccessor().addPoint(A,v.latitude,v.longitude,this.ctx,"saved",this.app,this.handleSet,this)}else{var z=this.getYQLAccessor().addPlace(A,v.woeid,this.ctx,"saved",this.app,this.handleSet,this)}if(!z){this.setError(this.yrbContainer.LYD_API_ERR);return false}else{this.setState(o)}}return true}var x=this.getYQLAccessor().getCtxTypeLocs("*","*");this.loc=null;for(var w=0;w<x.length;w++){if(x[w].id==y){this.loc=x[w];this.getYQLAccessor().setUse(this.loc.id,this.ctx,null,null);break}}if(this.loc==null){if(y=="id_current"){this.loc=LocdropLocationPickerCommonInstance.upapiCurLoc;this.getYQLAccessor().addWoe(this.loc.woe,"global","physical",this.app,this.handleWoe,this)}else{if(y=="id_regzip"){this.loc=LocdropLocationPickerCommonInstance.upapiDefLoc;this.getYQLAccessor().addWoe(this.loc.woe,"global","default",this.app,this.handleWoe,this)}}}this.setState(e);if(this.callback!=null){this.callback(this)}return true};this.detectSuccess=function(v){v.open(null)};this.detectFailed=function(w,v){if(v.errCode){w.setError(w.yrbContainer[v.errCode]);return}};this.detect=function(w){var v=this.getGeoLocation();if(v==null){this.setError(this.yrbContainer.LW_DETECTSUPPORT_ERR)}else{v.detect(this.detectSuccess,this.detectFailed,this)}};this.populateLoc=function(D,G,w){var H=G.addr,F=G.lbl,z=G.id,E="";var H=this.getAddressStr(G);if(H==null){return""}if(w!=null&&w!=h){E+=w}var A=this.getDisplayStr(G,D);if(D!=null&&D==i){var y={displayStr:A,displayTtl:H,lType:i,dAction:d,locId:z,curLocTxt:this.yrbContainer.OS_CURRENT_LOCATION};var x=this.templateSubstitute("LW_CURRENT_LOC_TEMPLATE",y);if(x){E+=x}}else{if(D!=null&&D==t){var v={displayStr:A,displayTtl:H,locId:z,lType:t,dAction:d,editStr:this.yrbContainer.OS_DEFAULT_LOC_EDIT,editLink:this.yrbContainer.OS_MANAGE_LOCATIONS_URL};var B=this.templateSubstitute("LW_DEFAULT_LOC_EDIT_TEMPLATE",v);if(B){E+=B}}else{var C="";if(D!=null&&w==h){C="sqlocation-record-first"}E+='<li class="sqlocation-record line-item '+C+'" data-lid="'+z+'" data-acp="'+H+'" data-ltype="'+n+'" data-action="'+d+'"><a data-lid="'+z+'" data-acp="'+H+'" data-ltype="'+n+'" data-action="'+d+'" href="javascript: void(0);" title="'+H+'">'+A+"</a></li>"}}return E};this.populateLocsSub=function(B,x,A,w){var z=null;var F=0;if((w!=null)&&(w.length>0)){z=new RegExp(w,"i")}for(var v=0;(v<A.length)&&(x.length<this.displayLocs);v++){if(!this.canBeAddedToDisplayedLocs(A[v],x)){continue}var E=A[v];var D=E[this.locationLevel];if(D==null){D=""}var C=E.lbl;if(C==null){C=""}if(z!=null){if(!z.test(D)&&!z.test(C)){continue}}F++;var y="";if(F===1){y+=this.populateLoc(n,A[v],h)}else{y+=this.populateLoc(n,A[v])}if(y.length>0){B+=y;x.push(A[v])}else{F--}}return B};this.populateLocs=function(C,A){var D="";var B=-1;var I=-1;C.sort(this.locationSorter);if((A==null)||(A.length==0)){for(var y=0;y<C.length;y++){var H=C[y].id;if(H.search("global-default-")!=-1){B=y}else{if(H.search("global-physical-")!=-1){I=y}}if((B!=-1)&&(I!=-1)){break}}}var G=null;this.detectGeoId=this.guid+"_detect_geo";this.chelpId=this.guid+"chelp";var v="#"+this.chelpId;var w=this.getGeoLocation();if(w.geoSupport&&w!=null){var F={displayStr:this.yrbContainer.OS_LOCATION_DETECT,detectId:this.detectGeoId,lType:s,dAction:s,chelpId:this.chelpId,helpTxt:this.yrbContainer.HELP,detectTtl:this.yrbContainer.OS_LOCATION_DETECT};G=this.templateSubstitute("LW_DETECT_LOC_TEMPLATE",F)}else{var F={displayStr:this.yrbContainer.OS_LOCATION_DETECT,detectId:this.detectGeoId,lType:s,chelpId:this.chelpId,helpTxt:this.yrbContainer.HELP,detectTtl:this.yrbContainer.LW_DETECTSUPPORT_ERR};G=this.templateSubstitute("LW_DETECT_DISABLED_TEMPLATE",F)}var z=new Array();if(I>=0){D+=this.populateLoc(i,C[I],G);z.push(C[I])}else{if((LocdropLocationPickerCommonInstance.upapiCurLoc!=null)&&((A==null)||(A.length==0))){D+=this.populateLoc(i,LocdropLocationPickerCommonInstance.upapiCurLoc,G);z.push(LocdropLocationPickerCommonInstance.upapiCurLoc)}}if(B>=0){D+=this.populateLoc(t,C[B]);z.push(C[B])}else{if((LocdropLocationPickerCommonInstance.upapiDefLoc!=null)&&((A==null)||(A.length==0))){D+=this.populateLoc(t,LocdropLocationPickerCommonInstance.upapiDefLoc);z.push(LocdropLocationPickerCommonInstance.upapiDefLoc)}else{if((A==null)||(A.length==0)){var E={displayStr:this.yrbContainer.OS_LOCATION_PICK,displayTtl:this.yrbContainer.OS_LOCATION_PICK,addStr:this.yrbContainer.OS_DEFAULT_LOC_ADD,lType:t,addLink:this.yrbContainer.OS_MANAGE_LOCATIONS_URL};var x=this.templateSubstitute("LW_DEFAULT_LOC_ADD_TEMPLATE",E);if(x){D+=x}}}}return this.populateLocsSub(D,z,C,A)};this.getAddressStr=function(v){var w=v[this.locationLevel];if(w==null){return null}if(this.locationLevel=="zip"){if(w==""||w=="0"){return null}if(v.city!=null){w=v.city+", "+w}}if(this.locationLevel=="city"){if(typeof(v.sc)!="undeifned"&&v.sc!=null){if(w.length>0){w+=", "}w+=v.sc}if(typeof(v.cc)!="undeifned"&&v.cc!=null){if(w.length>0){w+=", "}w+=v.cc}}return w};this.getDisplayStr=function(x,z){var y=x.lbl;var A=null;if((x.lbl!=null)&&(x.lbl!="")){A=x.lbl}else{A=this.getAddressStr(x)}if(A==null){return null}var v=this.maxPixelLength;if(z==i){v=v-this.getOffsetWidth(this.yrbContainer.OS_CURRENT_LOCATION)}else{if(z==t){v=v-this.getOffsetWidth(this.yrbContainer.OS_DEFAULT_LOC_EDIT)}}if(this.getOffsetWidth(A)>v){var w=this.getOffsetWidth("...");while((this.getOffsetWidth(A)+w)>v){A=A.substring(0,A.length-1)}return A+"..."}return A};this.getOffsetWidth=function(v){var w=document.getElementById(this.rulerId);w.innerHTML=v;return w.offsetWidth};this.canBeAddedToDisplayedLocs=function(y,v){var B=y.id;var x=this.getDisplayStr(y,n);for(var w=0;w<v.length;w++){var z=v[w];if(B==z.id){return false}var A=this.getDisplayStr(z,n);if(A==x){return false}}return true};this.renderHelp=function(){var v=this;v.helpCloseId=this.makeElementId("helpCloseId");var w="#"+v.helpCloseId;v.chelpOvlyId=v.guid+"chelp_ovly";YUI().use("substitute","node","overlay","event",function(A){if(typeof(c)!="undefined"){c.show()}else{var z=A.substitute(v.yrbContainer.CURRENT_LOCATION_CONTEXTUAL_HELP,{0:v.yrbContainer.CURRENT_LOCATION_HELP_URL});var x=A.substitute(v.LW_CL_CONTEXTUAL_HELP_TEMPLATE,{chelpHtml:z,closeId:v.helpCloseId,chelpOvlyId:v.chelpOvlyId,privacyPolicyTxt:v.yrbContainer.PRIVACY_POLICY,privacyPolicyUrl:v.yrbContainer.PRIVACY_POLICY_URL,closeTxt:v.yrbContainer.CLOSE});var y=A.one("#"+v.chelpId).getXY();c=new A.Overlay({bodyContent:x,constrain:true,render:true,visible:true,zIndex:1001,xy:[y[0]+10,y[1]+35]})}A.on("click",A.bind(v.hideHelp,v),w)})};this.hideHelp=function(){if(typeof(c)!="undefined"){c.hide()}};this.templateSubstitute=function(x,v){var y;var w=this;YUI().use("substitute",function(z){y=z.substitute(w[x],v)});return y};this.disambiguateSearch=function(w){var v=this;var x=this.templateSubstitute("LW_LOCS_CONTAINER_TEMPLATE",{lwBodyId:v.lwBodyId,topLocs:w});l.set("bodyContent",x);l.set("footerContent","");this.registerLocationSelect(this)};this.autoCompleteSearch=function(w){var v=this;var x=this.templateSubstitute("LW_LOCS_CONTAINER_TEMPLATE",{lwBodyId:v.lwBodyId,topLocs:w});l.set("bodyContent",x);l.set("footerContent","");this.registerLocationSelect(this)};this.openState=function(w){if(typeof(r)!="undefined"){r.hide()}if(typeof(a)!="undefined"){a.hide()}this.lwBodyId=this.makeElementId("lwBody");this.lwFooterId=this.makeElementId("lwFooter");var v=this;YUI().use("node","event","overlay","substitute",function(A){var B=A.substitute(v.LW_LOCS_CONTAINER_TEMPLATE,{lwBodyId:v.lwBodyId,topLocs:w});var x=A.substitute(v.LW_MANAGE_LOC_TEMPLATE,{lwFooterId:v.lwFooterId,manageLocUrl:v.yrbContainer.OS_MANAGE_LOCATIONS_URL,manageLocTxt:v.yrbContainer.OS_MANAGE_LOCATIONS});if(!v.customInput){v.inputId=v.makeElementId("input");var z="#"+v.inputId;v.lwHeaderId=v.makeElementId("lwHeader");var y=A.substitute(v.LW_OPEN_STATE_HEAD_TEMPLATE,{lwHeaderId:v.lwHeaderId,inputId:v.inputId,ghostTxt:v.getGhostText()});if(typeof(l)!="undefined"){l.set("headerContent",y);l.set("bodyContent",B);l.set("footerContent",x);l.show()}else{l=new A.Overlay({headerContent:y,bodyContent:B,footerContent:x,width:v.minWidth,zIndex:100,xy:[v.positionX,v.positionY],constrain:true,render:true,visible:true})}v.detachGhosting(v.inputId);A.on("keyup",A.bind(v.handleInputEvents,v),z)}else{if(typeof(l)!="undefined"){l.set("bodyContent",B);l.set("footerContent",x);l.show()}else{l=new A.Overlay({bodyContent:B,footerContent:x,width:v.minWidth,zIndex:100,xy:[v.positionX,v.positionY],constrain:true,render:true,visible:true})}}A.on("click",A.bind(v.renderHelp,v),"#"+v.chelpId);v.registerLocationSelect(v)});if(typeof v.overlayContentBox==="undefined"){v.initFocusManager()}v.state=p};this.detachGhosting=function(w){var v="#"+w;YUI().use("node","event",function(x){x.on("ghosting|focus",function(y){var z=y.target;z.set("value","");z.removeClass("ghost-text");x.detach("ghosting|focus")},v,this)})};this.getGhostText=function(){var v="";switch(this.locationLevel){case"city":v=this.yrbContainer.GHOST_TEXT_CITY;break;case"zip":v=this.yrbContainer.GHOST_TEXT_ZIP;break;default:v=this.yrbContainer.GHOST_TEXT_ADDR}return v};this.initFocusManager=function(){var v=this;YUI().use("node-focusmanager",function(w){v.overlayContentBox=l.get("contentBox");v.overlayContentBox.plug(w.Plugin.NodeFocusManager,{descendants:"a",keys:{next:"down:40",previous:"down:38"},focusClass:{className:"line-item-focus",fn:function(x){return x}},circular:false})})};this.registerLocationSelect=function(v){YUI().use("node","event",function(w){w.one("#"+v.lwBodyId).delegate("click",v.dispatchCallback,"li a",v)})};this.dispatchCallback=function(x){var w=x.target,v=w.getAttribute("data-lid"),y=w.getAttribute("data-action");if(v&&y){LocdropLocationPickerCommonInstance.actionCallback(this.id,y,v)}};this.handleInputEvents=function(A){var v=this;var w=A.target,y=YUI().Lang.trim(w.get("value"));if(40===A.keyCode){v.overlayContentBox.focusManager.refresh();v.overlayContentBox.focusManager.set("activeDescendant",0);v.overlayContentBox.focusManager.focus();A.halt();return}if(""===y){var z=v.getYQLAccessor().getCtxTypeLocs("*","*");var x=v.populateLocs(z,y);v.openState(x);this.setState(g);return}if(13===A.keyCode){if(y==null){return false}if(y.length==0){return false}var B=LocdropLocationPickerCommonInstance.geocode(y,this);if(B){this.setState(o)}return false}else{if(w==null||(y.length>=1&&y.length<this.searchStartLen)){return false}var z=v.getYQLAccessor().getCtxTypeLocs("*","*");var x=v.populateLocs(z,y);v.autoCompleteSearch(x);return true}};this.handleDocumentKeyup=function(v){if(27===v.keyCode){this.close();v.halt();return}};this.handleDocumentClick=function(v){if(!this.clickedInside(v,null)){this.close()}};this.clickedInside=function(z,A){var v=this;var y=z.target,x=y.get("id"),w=y.get("parentNode").get("id");if((x||w)&&(x==v.inputId||w==v.lwHeaderId||w==v.lwBodyId||w==v.lwFooterId||w==v.anchorId||x==v.anchorId||x==v.chelpId||x==v.helpCloseId||x==v.detectGeoId||x==v.chelpOvlyId||w==v.chelpOvlyId)){return true}if(A&&(x==A||w==A)){return true}return false};this.handleGet=function(v){if(v.errObj.errCode){v.widget.setError(v.widget.yrbContainer[v.errObj.errCode]);return}v.widget.open(v.locs)};this.open=function(w){var B=this.getYQLAccessor();var z=B.getCtxTypeLocs("*","*");if(z==null){var v={widget:this,locs:w};if(B.fetchCtxTypeLocs("*","*",this.handleGet,v)==false){this.setError(this.yrbContainer.LYD_API_ERR)}else{this.setState(o)}return true}var A;if((w!=null)&&(w==i)){var y;for(y=0;y<z.length;y++){if((z[y].ctx=="global")&&(z[y].type=="physical")){A=new Array();A.push(z[y]);break}}if(A==null){this.setError(this.yrbContainer.LW_DETECT_ERR);return false}}else{A=z;this.setState(o)}var x=this.populateLocs(A,null);this.openState(x)};this.close=function(){this.setState(e)};this.geocodeDone=function(D){var z=D.query.count;if(z==0){var C=this.templateSubstitute("LW_ERROR_TEMPLATE",{lwErrorText:this.yrbContainer.LW_DISAMBIGUATE_ERR});this.disambiguateSearch(C);this.setState(g);return}var y=null;if(z==1){y=new Array();y.push(D.query.results.Result)}else{y=D.query.results.Result}var w;var B=y.length;for(w=0;w<B;w++){var A="";if(y[w].line1!=null){A=y[w].line1}if(y[w].line2!=null){if(A.length>0){A+=", "}A+=y[w].line2}if(y[w].line3!=null){if(A.length>0){A+=", "}A+=y[w].line3}if(y[w].line4!=null){if(A.length>0){A+=", "}A+=y[w].line4}y[w].id="new-"+Base64.encode(A);y[w].addr=A;if(y[w].uzip!=null&&y[w].uzip!=""&&y[w].uzip!="0"){y[w].zip=y[w].uzip}if(y[w].statecode!=null){y[w].sc=y[w].statecode}if(y[w].countrycode!=null){y[w].cc=y[w].countrycode}if(y[w].country!=null){y[w].ctry=y[w].country}if(y[w].latitude!=null){y[w].lat=y[w].latitude}if(y[w].longitude!=null){y[w].lon=y[w].longitude}if(y[w].woeid!=null){y[w].woe=y[w].woeid}y[w].app=this.app;y[w].ctx=this.ctx;y[w].type=this.geoPlaceType}this.searchItemList=y;var x=new Array();var v=this.populateLocsSub("",x,y,null);if(v==""){v=this.templateSubstitute("LW_ERROR_TEMPLATE",{lwErrorText:this.yrbContainer.LW_DISAMBIGUATE_ERR})}this.disambiguateSearch(v);this.setState(g)};this.handleAction=function(w,v){return this[w](v)};this.LW_OPEN_STATE_HEAD_TEMPLATE='<div id="{lwHeaderId}"><label for="{inputId}" class="hide">{ghostTxt}</label><input type="text" class="lc-input ghost-text" id="{inputId}" value="{ghostTxt}" style="width:97%;"/></div>';this.LW_LOCS_CONTAINER_TEMPLATE='<ul id="{lwBodyId}" class="locations-container">{topLocs}</ul>';this.LW_LOCS_CON_TEMPLATE='<ul class="locations-container">{clMkup}{dlMkup}{lcsMkup}</ul>';this.LW_DETECT_LOC_TEMPLATE='<li class="detectlocation-con"><div style="float:left;"><div class="detect-location line-item" data-ltype="{lType}" data-lid="{detectId}" data-acp="{detectTtl}" data-action="{dAction}"><a id="{detectId}" data-lid="{detectId}" data-ltype="{lType}" data-action="{dAction}" data-acp="{detectTtl}" href="javascript: void(0);" title="{detectTtl}">{displayStr}</a></div></div><a id="{chelpId}" href="javascript: void(0);" class="chelp-anchor" role="button"><span>{helpTxt}</span></a><div id="{eclOptinId}" class="messageBox hide"></div></li><li class="lw-separator" style="clear:both;"></li>';this.LW_DETECT_DISABLED_TEMPLATE='<li class="detect-disabled-con"><div style="float:left;"><div id="{detectId}" class="detect-disabled line-item detect-non-label" data-ltype="{lType}" title="{detectTtl}">{displayStr}</div></div><a id="{chelpId}" href="javascript: void(0);" class="chelp-anchor" role="button"><span>{helpTxt}</span></a><div id="{eclOptinId}" class="messageBox hide"></div></li><li class="lw-separator" style="clear:both;"></li>';this.LW_CURRENT_LOC_TEMPLATE='<li class="clocation-record line-item" data-lid="{locId}" data-ltype="{lType}" data-action="{dAction}"  data-acp="{displayTtl}"><a data-lid="{locId}" data-acp="{displayTtl}" data-ltype="{lType}" data-action="{dAction}" href="javascript: void(0);" title="{displayTtl}">{displayStr} <span class="non-label" data-lid="{id}">({curLocTxt})</span></a></li><li class="lw-separator"></li>';this.LW_DEFAULT_LOC_EDIT_TEMPLATE='<li class="dlocation-record line-item" data-lid="{locId}" data-ltype="{lType}" data-action="{dAction}" data-acp="{displayTtl}"><a data-lid="{locId}" data-acp="{displayTtl}" data-ltype="{lType}" data-action="{dAction}" href="javascript: void(0);" title="{displayTtl}">{displayStr}</a> <span><a class="non-label" style="color: #6C717A" id="{defEditId}" href="{editLink}" taget="_blank">({editStr})</a></span></a></li><li class="lw-separator"></li>';this.LW_DEFAULT_LOC_ADD_TEMPLATE='<li class="line-item dlocation-wrap" data-lid="" data-ltype="{lType}"><div class="dlocation-icon"></div><div style="margin-left: 30px"><a data-lid="" data-acp="" taget="_blank" data-ltype="{lType}" href="{addLink}" title="{displayTtl}">{displayStr} <span class="non-label" style="color: #6C717A">({addStr})</span></a></div></li><li class="lw-separator"></li>';this.LW_SQ_LOC_TEMPLATE='<li class="sqlocation-record line-item {sqfirstClass}" data-lid="{locId}" data-acp="{address}" data-ltype="{lType}" data-action="{dAction}"><a data-lid="{locId}" data-acp="{address}" data-ltype="{lType}" data-action="{dAction}" href="javascript: void(0);" title="{address}">{displayStr}</a></li>';this.LW_MANAGE_LOC_TEMPLATE='<ul id="{lwFooterId}" class="zero-margin"><li class="lw-separator"></li><li class="ml line-item"><a href="{manageLocUrl}" id="{id}" target="_blank">{manageLocTxt}</a></li></ul>';this.LW_CL_CONTEXTUAL_HELP_TEMPLATE='<div class="lw-contextual-help-ovly" id="{chelpOvlyId}" role="alert"><div class="lw-contextual-help-close"><a id="{closeId}" href="javascript: void(0);"><span>{closeTxt}</span></a></div><div> {chelpHtml} </div> <br/><div> <a href="{privacyPolicyUrl}" target="_blank">{privacyPolicyTxt}</a> </div></div>';this.LW_LOADING_MSG='<div class="lw-loading-msg"><img src="http://l.yimg.com/a/i/ww/met/anim_loading_sm_082208.gif"/><span id="{rulerId}" class="lw-pixel-ruler"></span></div>';this.LW_OPEN_ERROR_TEMPLATE='<div class="locations-container"><div class="dum-error lw-contextual-help-close"><a id="{closeId}" href="javascript: void(0);" style="margin-left: 5px"> </a><span style="color: #ff0000">{lwErrorText}</span></div></div>';this.LW_ERROR_TEMPLATE='<div class="dum-error"><span style="color: #ff0000">{lwErrorText}</span></div></div>';this.LW_ANCHOR_TEMPLATE='<a class="lw-anchor-item" id="{anchorId}"><span class="lw-anchor-icon"></span><span class="lw-anchor-txt">{anchorTxt}</span></a>';LocdropLocationPickerCommonInstance.addWidget(this);return this};/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("yui-throttle",function(a){
/*! Based on work by Simon Willison: http://gist.github.com/292562 */
a.throttle=function(c,b){b=(b)?b:(a.config.throttleTime||150);if(b===-1){return(function(){c.apply(null,arguments);});}var d=a.Lang.now();return(function(){var e=a.Lang.now();if(e-d>b){d=e;c.apply(null,arguments);}});};},"3.5.1",{requires:["yui-base"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("dd-ddm-base",function(b){var a=function(){a.superclass.constructor.apply(this,arguments);};a.NAME="ddm";a.ATTRS={dragCursor:{value:"move"},clickPixelThresh:{value:3},clickTimeThresh:{value:1000},throttleTime:{value:-1},dragMode:{value:"point",setter:function(c){this._setDragMode(c);return c;}}};b.extend(a,b.Base,{_createPG:function(){},_active:null,_setDragMode:function(c){if(c===null){c=b.DD.DDM.get("dragMode");}switch(c){case 1:case"intersect":return 1;case 2:case"strict":return 2;case 0:case"point":return 0;}return 0;},CSS_PREFIX:b.ClassNameManager.getClassName("dd"),_activateTargets:function(){},_drags:[],activeDrag:false,_regDrag:function(c){if(this.getDrag(c.get("node"))){return false;}if(!this._active){this._setupListeners();}this._drags.push(c);return true;},_unregDrag:function(e){var c=[];b.each(this._drags,function(f,d){if(f!==e){c[c.length]=f;}});this._drags=c;},_setupListeners:function(){this._createPG();this._active=true;var c=b.one(b.config.doc);c.on("mousemove",b.throttle(b.bind(this._move,this),this.get("throttleTime")));c.on("mouseup",b.bind(this._end,this));},_start:function(){this.fire("ddm:start");this._startDrag();},_startDrag:function(){},_endDrag:function(){},_dropMove:function(){},_end:function(){if(this.activeDrag){this._endDrag();this.fire("ddm:end");this.activeDrag.end.call(this.activeDrag);this.activeDrag=null;}},stopDrag:function(){if(this.activeDrag){this._end();}return this;},_move:function(c){if(this.activeDrag){this.activeDrag._move.call(this.activeDrag,c);this._dropMove();}},cssSizestoObject:function(d){var c=d.split(" ");switch(c.length){case 1:c[1]=c[2]=c[3]=c[0];break;case 2:c[2]=c[0];c[3]=c[1];break;case 3:c[3]=c[1];break;}return{top:parseInt(c[0],10),right:parseInt(c[1],10),bottom:parseInt(c[2],10),left:parseInt(c[3],10)};},getDrag:function(d){var c=false,e=b.one(d);if(e instanceof b.Node){b.each(this._drags,function(g,f){if(e.compareTo(g.get("node"))){c=g;}});}return c;},swapPosition:function(d,c){d=b.DD.DDM.getNode(d);c=b.DD.DDM.getNode(c);var f=d.getXY(),e=c.getXY();d.setXY(e);c.setXY(f);return d;},getNode:function(c){if(c instanceof b.Node){return c;}if(c&&c.get){if(b.Widget&&(c instanceof b.Widget)){c=c.get("boundingBox");}else{c=c.get("node");}}else{c=b.one(c);}return c;},swapNode:function(e,c){e=b.DD.DDM.getNode(e);c=b.DD.DDM.getNode(c);var f=c.get("parentNode"),d=c.get("nextSibling");if(d==e){f.insertBefore(e,c);}else{if(c==e.get("nextSibling")){f.insertBefore(c,e);}else{e.get("parentNode").replaceChild(c,e);f.insertBefore(e,d);}}return e;}});b.namespace("DD");b.DD.DDM=new a();},"3.5.1",{skinnable:false,requires:["node","base","yui-throttle","classnamemanager"]});/*
YUI 3.5.1 (build 22)
Copyright 2012 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/
YUI.add("dd-drag",function(d){var e=d.DD.DDM,r="node",g="dragging",m="dragNode",c="offsetHeight",k="offsetWidth",h="drag:mouseDown",b="drag:afterMouseDown",f="drag:removeHandle",l="drag:addHandle",p="drag:removeInvalid",q="drag:addInvalid",j="drag:start",i="drag:end",n="drag:drag",o="drag:align",a=function(t){this._lazyAddAttrs=false;a.superclass.constructor.apply(this,arguments);var s=e._regDrag(this);if(!s){d.error("Failed to register node, already in use: "+t.node);}};a.NAME="drag";a.START_EVENT="mousedown";a.ATTRS={node:{setter:function(s){if(this._canDrag(s)){return s;}var t=d.one(s);if(!t){d.error("DD.Drag: Invalid Node Given: "+s);}return t;}},dragNode:{setter:function(s){if(this._canDrag(s)){return s;}var t=d.one(s);if(!t){d.error("DD.Drag: Invalid dragNode Given: "+s);}return t;}},offsetNode:{value:true},startCentered:{value:false},clickPixelThresh:{value:e.get("clickPixelThresh")},clickTimeThresh:{value:e.get("clickTimeThresh")},lock:{value:false,setter:function(s){if(s){this.get(r).addClass(e.CSS_PREFIX+"-locked");}else{this.get(r).removeClass(e.CSS_PREFIX+"-locked");}return s;}},data:{value:false},move:{value:true},useShim:{value:true},activeHandle:{value:false},primaryButtonOnly:{value:true},dragging:{value:false},parent:{value:false},target:{value:false,setter:function(s){this._handleTarget(s);return s;}},dragMode:{value:null,setter:function(s){return e._setDragMode(s);}},groups:{value:["default"],getter:function(){if(!this._groups){this._groups={};}var s=[];d.each(this._groups,function(u,t){s[s.length]=t;});return s;},setter:function(s){this._groups={};d.each(s,function(u,t){this._groups[u]=true;},this);return s;}},handles:{value:null,setter:function(s){if(s){this._handles={};d.each(s,function(u,t){var w=u;if(u instanceof d.Node||u instanceof d.NodeList){w=u._yuid;}this._handles[w]=u;},this);}else{this._handles=null;}return s;}},bubbles:{setter:function(s){this.addTarget(s);return s;}},haltDown:{value:true}};d.extend(a,d.Base,{_canDrag:function(s){if(s&&s.setXY&&s.getXY&&s.test&&s.contains){return true;}return false;},_bubbleTargets:d.DD.DDM,addToGroup:function(s){this._groups[s]=true;e._activateTargets();return this;},removeFromGroup:function(s){delete this._groups[s];e._activateTargets();return this;},target:null,_handleTarget:function(s){if(d.DD.Drop){if(s===false){if(this.target){e._unregTarget(this.target);this.target=null;}return false;}else{if(!d.Lang.isObject(s)){s={};}s.bubbleTargets=("bubbleTargets" in s)?s.bubbleTargets:d.Object.values(this._yuievt.targets);s.node=this.get(r);s.groups=s.groups||this.get("groups");this.target=new d.DD.Drop(s);}}else{return false;}},_groups:null,_createEvents:function(){this.publish(h,{defaultFn:this._defMouseDownFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(o,{defaultFn:this._defAlignFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(n,{defaultFn:this._defDragFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});this.publish(i,{defaultFn:this._defEndFn,preventedFn:this._prevEndFn,queuable:false,emitFacade:true,bubbles:true,prefix:"drag"});var s=[b,f,l,p,q,j,"drag:drophit","drag:dropmiss","drag:over","drag:enter","drag:exit"];d.each(s,function(u,t){this.publish(u,{type:u,emitFacade:true,bubbles:true,preventable:false,queuable:false,prefix:"drag"});},this);},_ev_md:null,_startTime:null,_endTime:null,_handles:null,_invalids:null,_invalidsDefault:{"textarea":true,"input":true,"a":true,"button":true,"select":true},_dragThreshMet:null,_fromTimeout:null,_clickTimeout:null,deltaXY:null,startXY:null,nodeXY:null,lastXY:null,actXY:null,realXY:null,mouseXY:null,region:null,_handleMouseUp:function(s){this.fire("drag:mouseup");this._fixIEMouseUp();if(e.activeDrag){e._end();}},_fixDragStart:function(s){s.preventDefault();},_ieSelectFix:function(){return false;},_ieSelectBack:null,_fixIEMouseDown:function(s){if(d.UA.ie){this._ieSelectBack=d.config.doc.body.onselectstart;d.config.doc.body.onselectstart=this._ieSelectFix;}},_fixIEMouseUp:function(){if(d.UA.ie){d.config.doc.body.onselectstart=this._ieSelectBack;}},_handleMouseDownEvent:function(s){this.fire(h,{ev:s});},_defMouseDownFn:function(t){var s=t.ev;this._dragThreshMet=false;this._ev_md=s;if(this.get("primaryButtonOnly")&&s.button>1){return false;}if(this.validClick(s)){this._fixIEMouseDown(s);if(this.get("haltDown")){s.halt();}else{s.preventDefault();}this._setStartPosition([s.pageX,s.pageY]);e.activeDrag=this;this._clickTimeout=d.later(this.get("clickTimeThresh"),this,this._timeoutCheck);}this.fire(b,{ev:s});},validClick:function(w){var v=false,z=false,s=w.target,u=null,t=null,x=null,y=false;if(this._handles){d.each(this._handles,function(A,B){if(A instanceof d.Node||A instanceof d.NodeList){if(!v){x=A;if(x instanceof d.Node){x=new d.NodeList(A._node);}x.each(function(C){if(C.contains(s)){v=true;}});}}else{if(d.Lang.isString(B)){if(s.test(B+", "+B+" *")&&!u){u=B;v=true;}}}});}else{z=this.get(r);if(z.contains(s)||z.compareTo(s)){v=true;}}if(v){if(this._invalids){d.each(this._invalids,function(A,B){if(d.Lang.isString(B)){if(s.test(B+", "+B+" *")){v=false;}}});}}if(v){if(u){t=w.currentTarget.all(u);y=false;t.each(function(B,A){if((B.contains(s)||B.compareTo(s))&&!y){y=true;this.set("activeHandle",B);}},this);}else{this.set("activeHandle",this.get(r));}}return v;},_setStartPosition:function(s){this.startXY=s;this.nodeXY=this.lastXY=this.realXY=this.get(r).getXY();if(this.get("offsetNode")){this.deltaXY=[(this.startXY[0]-this.nodeXY[0]),(this.startXY[1]-this.nodeXY[1])];}else{this.deltaXY=[0,0];}},_timeoutCheck:function(){if(!this.get("lock")&&!this._dragThreshMet&&this._ev_md){this._fromTimeout=this._dragThreshMet=true;this.start();this._alignNode([this._ev_md.pageX,this._ev_md.pageY],true);}},removeHandle:function(t){var s=t;if(t instanceof d.Node||t instanceof d.NodeList){s=t._yuid;}if(this._handles[s]){delete this._handles[s];this.fire(f,{handle:t});}return this;},addHandle:function(t){if(!this._handles){this._handles={};}var s=t;
if(t instanceof d.Node||t instanceof d.NodeList){s=t._yuid;}this._handles[s]=t;this.fire(l,{handle:t});return this;},removeInvalid:function(s){if(this._invalids[s]){this._invalids[s]=null;delete this._invalids[s];this.fire(p,{handle:s});}return this;},addInvalid:function(s){if(d.Lang.isString(s)){this._invalids[s]=true;this.fire(q,{handle:s});}return this;},initializer:function(s){this.get(r).dd=this;if(!this.get(r).get("id")){var t=d.stamp(this.get(r));this.get(r).set("id",t);}this.actXY=[];this._invalids=d.clone(this._invalidsDefault,true);this._createEvents();if(!this.get(m)){this.set(m,this.get(r));}this.on("initializedChange",d.bind(this._prep,this));this.set("groups",this.get("groups"));},_prep:function(){this._dragThreshMet=false;var s=this.get(r);s.addClass(e.CSS_PREFIX+"-draggable");s.on(a.START_EVENT,d.bind(this._handleMouseDownEvent,this));s.on("mouseup",d.bind(this._handleMouseUp,this));s.on("dragstart",d.bind(this._fixDragStart,this));},_unprep:function(){var s=this.get(r);s.removeClass(e.CSS_PREFIX+"-draggable");s.detachAll("mouseup");s.detachAll("dragstart");s.detachAll(a.START_EVENT);this.mouseXY=[];this.deltaXY=[0,0];this.startXY=[];this.nodeXY=[];this.lastXY=[];this.actXY=[];this.realXY=[];},start:function(){if(!this.get("lock")&&!this.get(g)){var t=this.get(r),s,u,v;this._startTime=(new Date()).getTime();e._start();t.addClass(e.CSS_PREFIX+"-dragging");this.fire(j,{pageX:this.nodeXY[0],pageY:this.nodeXY[1],startTime:this._startTime});t=this.get(m);v=this.nodeXY;s=t.get(k);u=t.get(c);if(this.get("startCentered")){this._setStartPosition([v[0]+(s/2),v[1]+(u/2)]);}this.region={"0":v[0],"1":v[1],area:0,top:v[1],right:v[0]+s,bottom:v[1]+u,left:v[0]};this.set(g,true);}return this;},end:function(){this._endTime=(new Date()).getTime();if(this._clickTimeout){this._clickTimeout.cancel();}this._dragThreshMet=this._fromTimeout=false;if(!this.get("lock")&&this.get(g)){this.fire(i,{pageX:this.lastXY[0],pageY:this.lastXY[1],startTime:this._startTime,endTime:this._endTime});}this.get(r).removeClass(e.CSS_PREFIX+"-dragging");this.set(g,false);this.deltaXY=[0,0];return this;},_defEndFn:function(s){this._fixIEMouseUp();this._ev_md=null;},_prevEndFn:function(s){this._fixIEMouseUp();this.get(m).setXY(this.nodeXY);this._ev_md=null;this.region=null;},_align:function(s){this.fire(o,{pageX:s[0],pageY:s[1]});},_defAlignFn:function(s){this.actXY=[s.pageX-this.deltaXY[0],s.pageY-this.deltaXY[1]];},_alignNode:function(s){this._align(s);this._moveNode();},_moveNode:function(s){var t=[],u=[],w=this.nodeXY,v=this.actXY;t[0]=(v[0]-this.lastXY[0]);t[1]=(v[1]-this.lastXY[1]);u[0]=(v[0]-this.nodeXY[0]);u[1]=(v[1]-this.nodeXY[1]);this.region={"0":v[0],"1":v[1],area:0,top:v[1],right:v[0]+this.get(m).get(k),bottom:v[1]+this.get(m).get(c),left:v[0]};this.fire(n,{pageX:v[0],pageY:v[1],scroll:s,info:{start:w,xy:v,delta:t,offset:u}});this.lastXY=v;},_defDragFn:function(s){if(this.get("move")){if(s.scroll){s.scroll.node.set("scrollTop",s.scroll.top);s.scroll.node.set("scrollLeft",s.scroll.left);}this.get(m).setXY([s.pageX,s.pageY]);this.realXY=[s.pageX,s.pageY];}},_move:function(u){if(this.get("lock")){return false;}else{this.mouseXY=[u.pageX,u.pageY];if(!this._dragThreshMet){var t=Math.abs(this.startXY[0]-u.pageX),s=Math.abs(this.startXY[1]-u.pageY);if(t>this.get("clickPixelThresh")||s>this.get("clickPixelThresh")){this._dragThreshMet=true;this.start();this._alignNode([u.pageX,u.pageY]);}}else{if(this._clickTimeout){this._clickTimeout.cancel();}this._alignNode([u.pageX,u.pageY]);}}},stopDrag:function(){if(this.get(g)){e._end();}return this;},destructor:function(){this._unprep();if(this.target){this.target.destroy();}e._unregDrag(this);}});d.namespace("DD");d.DD.Drag=a;},"3.5.1",{skinnable:false,requires:["dd-ddm-base"]});